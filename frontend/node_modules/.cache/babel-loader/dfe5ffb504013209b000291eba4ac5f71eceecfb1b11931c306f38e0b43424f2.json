{"ast":null,"code":"var _jsxFileName = \"/Users/nishant/Desktop/sledgeNew/Test/frontend/src/pages/Distributors/distributorProducts.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport { Pencil, Trash2, PlusCircle, Eye, AlertTriangle, Package, X } from \"lucide-react\";\nimport API from \"../../api\";\nimport { useAuth } from \"../../components/AuthContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function DistributorProducts() {\n  _s();\n  var _product$variants;\n  const {\n    user\n  } = useAuth();\n  const distributorId = user === null || user === void 0 ? void 0 : user._id;\n  const [active, setActive] = useState(\"Groceries\");\n  const [products, setProducts] = useState({});\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [showEditModal, setShowEditModal] = useState(false);\n  const [showViewModal, setShowViewModal] = useState(false);\n  const [editProduct, setEditProduct] = useState(null);\n  const [viewProduct, setViewProduct] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n  const distributorships = [\"Groceries\", \"Beverages\", \"Personal Care\"];\n\n  //   // Fetch products from the backend\n  //   const fetchProducts = useCallback(async () => {\n  //     if (!distributorId) return;\n\n  //     setLoading(true);\n  //     setError(\"\");\n\n  //     try {\n  //       const response = await API.get(\"/products\", {\n  //         params: { distributorId },\n  //       });\n\n  //       const groupedProducts = response.data.reduce((acc, product) => {\n  //         const category = product.category || 'Uncategorized';\n  //         acc[category] = acc[category] || [];\n  //         acc[category].push(product);\n  //         return acc;\n  //       }, {});\n\n  //       setProducts(groupedProducts);\n  //     } catch (error) {\n  //       console.error(\"Error fetching products:\", error);\n  //       setError(\"Failed to fetch products. Please try again.\");\n  //     } finally {\n  //       setLoading(false);\n  //     }\n  //   }, [distributorId]);\n\n  //   useEffect(() => {\n  //     fetchProducts();\n  //   }, [fetchProducts]);\n\n  //   const handleAddProduct = async (product) => {\n  //     if (!product.name?.trim()) {\n  //       setError(\"Product name is required\");\n  //       return;\n  //     }\n\n  //     try {\n  //       setLoading(true);\n  //       setError(\"\");\n\n  //       // Generate unique product ID\n  //       const productId = Date.now();\n\n  //       // Generate SKUs for variants that don't have them\n  //       const variantsWithSKU = product.variants.map((variant, index) => ({\n  //         ...variant,\n  //         id: variant.id || Date.now() + index,\n  //         sku: variant.sku || `${productId}-VAR-${index + 1}`,\n  //         expiry: variant.expiry || 'N/A',\n  //         stock: Number(variant.stock) || 0,\n  //         sellingPrice: Number(variant.sellingPrice) || 0,\n  //         costPrice: Number(variant.costPrice) || 0\n  //       }));\n\n  //       const response = await API.post(\"/products\", {\n  //         ...product,\n  //         id: productId,\n  //         user: user,\n  //         distributorships: [active],\n  //         category: active,\n\n  //         variants: variantsWithSKU,\n  //       });\n\n  //       setProducts((prev) => ({\n  //         ...prev,\n  //         [active]: [...(prev[active] || []), response.data],\n  //       }));\n\n  //       setShowAddModal(false);\n  //     } catch (error) {\n  //       console.error(\"Error adding product:\", error);\n  //       setError(\"Failed to add product. Please check all required fields.\");\n  //     } finally {\n  //       setLoading(false);\n  //     }\n  //   };\n\n  //   const handleEditProduct = async (updated) => {\n  //     if (!updated.name?.trim()) {\n  //       setError(\"Product name is required\");\n  //       return;\n  //     }\n\n  //     try {\n  //       setLoading(true);\n  //       setError(\"\");\n\n  //       // Ensure all variants have required fields\n  //       const updatedVariants = updated.variants.map((variant) => ({\n  //         ...variant,\n  //         sku: variant.sku || `${updated.id}-VAR-${variant.id}`,\n  //         expiry: variant.expiry || 'N/A',\n  //         stock: Number(variant.stock) || 0,\n  //         sellingPrice: Number(variant.sellingPrice) || 0,\n  //         costPrice: Number(variant.costPrice) || 0\n  //       }));\n\n  //       const response = await API.put(`/products/${updated._id}`, {\n  //         ...updated,\n  //         distributorId,\n  //         distributorships: [active],\n  //         variants: updatedVariants,\n  //       });\n\n  //       setProducts((prev) => ({\n  //         ...prev,\n  //         [active]: prev[active]?.map((p) => (p._id === updated._id ? response.data : p)) || [],\n  //       }));\n\n  //       setShowEditModal(false);\n  //       setEditProduct(null);\n  //     } catch (error) {\n  //       console.error(\"Error updating product:\", error);\n  //       setError(\"Failed to update product. Please check all required fields.\");\n  //     } finally {\n  //       setLoading(false);\n  //     }\n  //   };\n\n  //   const handleDelete = async (id) => {\n  //     if (!window.confirm(\"Are you sure you want to delete this product?\")) return;\n\n  //     try {\n  //       setLoading(true);\n  //       setError(\"\");\n\n  //       await API.delete(`/products/${id}`);\n\n  //       setProducts((prev) => ({\n  //         ...prev,\n  //         [active]: prev[active]?.filter((p) => p._id !== id) || [],\n  //       }));\n  //     } catch (error) {\n  //       console.error(\"Error deleting product:\", error);\n  //       setError(\"Failed to delete product. Please try again.\");\n  //     } finally {\n  //       setLoading(false);\n  //     }\n  //   };\n\n  //   const getTotalStock = (variants) => {\n  //     return (variants || []).reduce((sum, variant) => sum + (Number(variant.stock) || 0), 0);\n  //   };   \n\n  //   const getPriceRange = (variants) => {\n  //     if (!variants?.length) return \"â‚¹0\";\n\n  //     const prices = variants\n  //       .map(v => Number(v.sellingPrice) || 0)\n  //       .filter(p => p > 0);\n\n  //     if (!prices.length) return \"â‚¹0\";\n\n  //     const min = Math.min(...prices);\n  //     const max = Math.max(...prices);\n  //     return min === max ? `â‚¹${min}` : `â‚¹${min} - â‚¹${max}`;\n  //   };\n\n  //   const getLowStockVariants = (variants) => {\n  //     return (variants || []).filter((v) => (Number(v.stock) || 0) <= 10);\n  //   };\n\n  //   const closeModals = () => {\n  //     setShowAddModal(false);\n  //     setShowEditModal(false);\n  //     setShowViewModal(false);\n  //     setEditProduct(null);\n  //     setViewProduct(null);\n  //   };\n\n  //   if (!distributorId) {\n  //     return (\n  //       <div className=\"p-4 text-center\">\n  //         <div className=\"text-red-600\">Please log in to manage products.</div>\n  //       </div>\n  //     );\n  //   }\n\n  //   return (\n  //     <div className=\"p-4 max-w-7xl mx-auto\">\n  //       <div className=\"flex justify-between items-center mb-6\">\n  //         <h1 className=\"text-3xl font-bold text-blue-800\">Product Management</h1>\n  //         <div className=\"text-sm text-gray-600 bg-blue-50 px-3 py-1 rounded-full\">\n  //           Total Products: {products[active]?.length || 0}\n  //         </div>\n  //       </div>\n\n  //       {error && (\n  //         <div className=\"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg flex justify-between items-center\">\n  //           <span>{error}</span>\n  //           <button \n  //             onClick={() => setError(\"\")}\n  //             className=\"text-red-700 hover:text-red-900\"\n  //           >\n  //             <X size={16} />\n  //           </button>\n  //         </div>\n  //       )}\n\n  //       <div className=\"flex flex-wrap gap-3 mb-6\">\n  //         {distributorships.map((name) => (\n  //           <button\n  //             key={name}\n  //             onClick={() => setActive(name)}\n  //             className={`px-5 py-2 rounded-full border-2 transition-all duration-200 font-medium ${\n  //               active === name \n  //                 ? \"bg-blue-700 text-white border-blue-700 shadow-lg\" \n  //                 : \"bg-white text-blue-700 border-blue-200 hover:bg-blue-50\"\n  //             }`}\n  //           >\n  //             {name} ({products[name]?.length || 0})\n  //           </button>\n  //         ))}\n  //       </div>\n\n  //       {loading ? (\n  //         <div className=\"text-center py-12\">\n  //           <div className=\"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n  //           <p className=\"mt-2 text-gray-600\">Loading products...</p>\n  //         </div>\n  //       ) : (\n  //         <div className=\"bg-white rounded-xl shadow-lg overflow-hidden\">\n  //           <div className=\"overflow-x-auto\">\n  //             <table className=\"min-w-full\">\n  //               <thead className=\"bg-gradient-to-r from-blue-600 to-blue-700 text-white\">\n  //                 <tr>\n  //                   <th className=\"px-6 py-4 text-left font-semibold\">Product</th>\n  //                   <th className=\"px-6 py-4 text-left font-semibold\">Total Stock</th>\n  //                   <th className=\"px-6 py-4 text-left font-semibold\">Price Range</th>\n  //                   <th className=\"px-6 py-4 text-left font-semibold\">Variants</th>\n  //                   <th className=\"px-6 py-4 text-left font-semibold\">Status</th>\n  //                   <th className=\"px-6 py-4 text-right font-semibold\">Actions</th>\n  //                 </tr>\n  //               </thead>\n  //               <tbody className=\"divide-y divide-gray-200\">\n  //                 {products[active]?.length ? (\n  //                   products[active].map((product, index) => {\n  //                     const lowStockVariants = getLowStockVariants(product.variants);\n  //                     return (\n  //                       <tr\n  //                         key={product._id}\n  //                         className={`hover:bg-blue-50 transition-colors ${\n  //                           index % 2 === 0 ? 'bg-gray-50' : 'bg-white'\n  //                         }`}\n  //                       >\n  //                         <td className=\"px-6 py-4\">\n  //                           <div className=\"flex items-center gap-3\">\n  //                             <span className=\"text-2xl\">{product.icon}</span>\n  //                             <div>\n  //                               <div className=\"font-semibold text-gray-900\">{product.name}</div>\n  //                               <div className=\"text-sm text-gray-500\">ID: {product.id}</div>\n  //                             </div>\n  //                           </div>\n  //                         </td>\n  //                         <td className=\"px-6 py-4\">\n  //                           <div className=\"flex items-center gap-2\">\n  //                             <Package size={18} className=\"text-gray-500\" />\n  //                             <span className=\"font-medium\">{getTotalStock(product.variants)}</span>\n  //                           </div>\n  //                         </td>\n  //                         <td className=\"px-6 py-4 font-semibold text-green-600\">\n  //                           {getPriceRange(product.variants)}\n  //                         </td>\n  //                         <td className=\"px-6 py-4\">\n  //                           <span className=\"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-sm\">\n  //                             {product.variants?.length || 0} variant{(product.variants?.length || 0) !== 1 ? 's' : ''}\n  //                           </span>\n  //                         </td>\n  //                         <td className=\"px-6 py-4\">\n  //                           {lowStockVariants.length > 0 ? (\n  //                             <div className=\"flex items-center gap-2 text-orange-600\">\n  //                               <AlertTriangle size={16} />\n  //                               <span className=\"text-sm font-medium\">Low Stock</span>\n  //                             </div>\n  //                           ) : (\n  //                             <span className=\"text-green-600 text-sm font-medium\">In Stock</span>\n  //                           )}\n  //                         </td>\n  //                         <td className=\"px-6 py-4\">\n  //                           <div className=\"flex justify-end gap-2\">\n  //                             <button\n  //                               onClick={() => {\n  //                                 setViewProduct(product);\n  //                                 setShowViewModal(true);\n  //                               }}\n  //                               className=\"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors\"\n  //                               title=\"View Details\"\n  //                             >\n  //                               <Eye size={18} />\n  //                             </button>\n  //                             <button\n  //                               onClick={() => {\n  //                                 setEditProduct(product);\n  //                                 setShowEditModal(true);\n  //                               }}\n  //                               className=\"p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-100 rounded-lg transition-colors\"\n  //                               title=\"Edit Product\"\n  //                             >\n  //                               <Pencil size={18} />\n  //                             </button>\n  //                             <button\n  //                               onClick={() => handleDelete(product._id)}\n  //                               className=\"p-2 text-red-500 hover:text-red-700 hover:bg-red-100 rounded-lg transition-colors\"\n  //                               title=\"Delete Product\"\n  //                               disabled={loading}\n  //                             >\n  //                               <Trash2 size={18} />\n  //                             </button>\n  //                           </div>\n  //                         </td>\n  //                       </tr>\n  //                     );\n  //                   })\n  //                 ) : (\n  //                   <tr>\n  //                     <td colSpan=\"6\" className=\"px-6 py-12 text-center text-gray-500\">\n  //                       <Package size={48} className=\"mx-auto mb-4 text-gray-300\" />\n  //                       <p className=\"text-lg font-medium\">No products found in {active}</p>\n  //                       <p className=\"text-sm\">Add your first product to get started.</p>\n  //                     </td>\n  //                   </tr>\n  //                 )}\n  //               </tbody>\n  //             </table>\n  //           </div>\n  //         </div>\n  //       )}\n\n  //       <button\n  //         onClick={() => setShowAddModal(true)}\n  //         disabled={loading}\n  //         className=\"mt-6 flex items-center gap-3 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white px-6 py-3 rounded-full shadow-lg hover:shadow-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed font-medium\"\n  //       >\n  //         <PlusCircle size={20} /> Add New Product\n  //       </button>\n\n  //       {showAddModal && (\n  //         <ProductModal\n  //           title=\"Add New Product\"\n  //           category={active}\n  //           onClose={closeModals}\n  //           onSubmit={handleAddProduct}\n  //           loading={loading}\n  //         />\n  //       )}\n\n  //       {showEditModal && editProduct && (\n  //         <ProductModal\n  //           title=\"Edit Product\"\n  //           product={editProduct}\n  //           category={active}\n  //           onClose={closeModals}\n  //           onSubmit={handleEditProduct}\n  //           loading={loading}\n  //         />\n  //       )}\n\n  //       {showViewModal && viewProduct && (\n  //         <ProductViewModal\n  //           product={viewProduct}\n  //           onClose={closeModals}\n  //         />\n  //       )}\n  //     </div>\n  //   );\n  // }\n\n  // function ProductModal({ title, product = {}, category, onClose, onSubmit, loading = false }) {\n  //   const [name, setName] = useState(product.name || \"\");\n  //   const [icon, setIcon] = useState(product.icon || \"ðŸ“¦\");\n  //   const [variants, setVariants] = useState(\n  //     product.variants?.length > 0 \n  //       ? product.variants.map(v => ({...v, stock: v.stock || 0, sellingPrice: v.sellingPrice || 0, costPrice: v.costPrice || 0}))\n  //       : [{ id: Date.now(), name: \"\", stock: 0, sellingPrice: 0, costPrice: 0, sku: \"\", expiry: \"\" }]\n  //   );\n  //   const [errors, setErrors] = useState({});\n\n  //   const validateForm = () => {\n  //     const newErrors = {};\n\n  //     if (!name.trim()) {\n  //       newErrors.name = \"Product name is required\";\n  //     }\n\n  //     variants.forEach((variant, index) => {\n  //       if (!variant.name.trim()) {\n  //         newErrors[`variant_${index}_name`] = \"Variant name is required\";\n  //       }\n  //       if (Number(variant.sellingPrice) <= 0) {\n  //         newErrors[`variant_${index}_sellingPrice`] = \"Selling price must be greater than 0\";\n  //       }\n  //       if (Number(variant.costPrice) < 0) {\n  //         newErrors[`variant_${index}_costPrice`] = \"Cost price cannot be negative\";\n  //       }\n  //       if (Number(variant.stock) < 0) {\n  //         newErrors[`variant_${index}_stock`] = \"Stock cannot be negative\";\n  //       }\n  //     });\n\n  //     setErrors(newErrors);\n  //     return Object.keys(newErrors).length === 0;\n  //   };\n\n  //   const handleAddVariant = () => {\n  //     setVariants((prev) => [\n  //       ...prev,\n  //       { \n  //         id: Date.now(), \n  //         name: \"\", \n  //         stock: 0, \n  //         sellingPrice: 0, \n  //         costPrice: 0, \n  //         sku: \"\", \n  //         expiry: \"\" \n  //       },\n  //     ]);\n  //   };\n\n  //   const handleRemoveVariant = (index) => {\n  //     if (variants.length > 1) {\n  //       setVariants((prev) => prev.filter((_, i) => i !== index));\n  //     }\n  //   };\n\n  //   const handleVariantChange = (index, field, value) => {\n  //     setVariants((prev) =>\n  //       prev.map((variant, i) =>\n  //         i === index ? { ...variant, [field]: value } : variant\n  //       )\n  //     );\n\n  //     // Clear specific error when user starts typing\n  //     if (errors[`variant_${index}_${field}`]) {\n  //       setErrors(prev => ({\n  //         ...prev,\n  //         [`variant_${index}_${field}`]: undefined\n  //       }));\n  //     }\n  //   };\n\n  //   const handleSubmit = (e) => {\n  //     e.preventDefault();\n  //     if (!validateForm()) return;\n\n  //     const data = { \n  //       ...product, \n  //       name: name.trim(), \n  //       icon,\n  //       category,\n  //       variants: variants.map(variant => ({\n  //         ...variant,\n  //         name: variant.name.trim(),\n  //         stock: Number(variant.stock) || 0,\n  //         sellingPrice: Number(variant.sellingPrice) || 0,\n  //         costPrice: Number(variant.costPrice) || 0,\n  //         sku: variant.sku.trim()\n  //       }))\n  //     };\n  //     onSubmit(data);\n  //   };\n\n  //   return (\n  //     <div className=\"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4\">\n  //       <div className=\"bg-white p-6 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto\">\n  //         <div className=\"flex justify-between items-center mb-6\">\n  //           <h2 className=\"text-2xl font-bold text-blue-800\">{title}</h2>\n  //           <button\n  //             onClick={onClose}\n  //             className=\"text-gray-500 hover:text-gray-700 p-1\"\n  //           >\n  //             <X size={24} />\n  //           </button>\n  //         </div>\n\n  //         <form onSubmit={handleSubmit} className=\"space-y-6\">\n  //           <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n  //             <div>\n  //               <label className=\"block text-sm font-semibold mb-2 text-gray-700\">Product Name *</label>\n  //               <input\n  //                 type=\"text\"\n  //                 placeholder=\"Enter product name\"\n  //                 value={name}\n  //                 onChange={(e) => {\n  //                   setName(e.target.value);\n  //                   if (errors.name) setErrors(prev => ({...prev, name: undefined}));\n  //                 }}\n  //                 className={`w-full border-2 px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${\n  //                   errors.name ? 'border-red-500' : 'border-gray-300'\n  //                 }`}\n  //                 disabled={loading}\n  //               />\n  //               {errors.name && <p className=\"text-red-500 text-sm mt-1\">{errors.name}</p>}\n  //             </div>\n\n  //             <div>\n  //               <label className=\"block text-sm font-semibold mb-2 text-gray-700\">Product Icon</label>\n  //               <input\n  //                 type=\"text\"\n  //                 placeholder=\"ðŸ“¦\"\n  //                 value={icon}\n  //                 onChange={(e) => setIcon(e.target.value)}\n  //                 className=\"w-full border-2 border-gray-300 px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n  //                 disabled={loading}\n  //               />\n  //             </div>\n  //           </div>\n\n  //           <div>\n  //             <div className=\"flex justify-between items-center mb-4\">\n  //               <h3 className=\"text-lg font-semibold text-gray-800\">Product Variants *</h3>\n  //               <button\n  //                 type=\"button\"\n  //                 onClick={handleAddVariant}\n  //                 className=\"text-blue-600 hover:text-blue-800 font-medium flex items-center gap-1\"\n  //                 disabled={loading}\n  //               >\n  //                 <PlusCircle size={16} /> Add Variant\n  //               </button>\n  //             </div>\n\n  //             <div className=\"space-y-4\">\n  //               {variants.map((variant, index) => (\n  //                 <div key={variant.id} className=\"border-2 border-gray-200 rounded-lg p-4 bg-gray-50\">\n  //                   <div className=\"flex justify-between items-center mb-3\">\n  //                     <span className=\"font-semibold text-gray-700\">Variant {index + 1}</span>\n  //                     {variants.length > 1 && (\n  //                       <button\n  //                         type=\"button\"\n  //                         onClick={() => handleRemoveVariant(index)}\n  //                         className=\"text-red-500 hover:text-red-700 font-medium\"\n  //                         disabled={loading}\n  //                       >\n  //                         Remove\n  //                       </button>\n  //                     )}\n  //                   </div>\n\n  //                   <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3 mb-3\">\n  //                     <div>\n  //                       <label className=\"block text-sm font-medium text-gray-700 mb-1\">Variant Name *</label>\n  //                       <input\n  //                         type=\"text\"\n  //                         placeholder=\"e.g., 500ml, Large, Red\"\n  //                         value={variant.name}\n  //                         onChange={(e) => handleVariantChange(index, \"name\", e.target.value)}\n  //                         className={`w-full border px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${\n  //                           errors[`variant_${index}_name`] ? 'border-red-500' : 'border-gray-300'\n  //                         }`}\n  //                         disabled={loading}\n  //                       />\n  //                       {errors[`variant_${index}_name`] && (\n  //                         <p className=\"text-red-500 text-xs mt-1\">{errors[`variant_${index}_name`]}</p>\n  //                       )}\n  //                     </div>\n\n  //                     <div>\n  //                       <label className=\"block text-sm font-medium text-gray-700 mb-1\">SKU</label>\n  //                       <input\n  //                         type=\"text\"\n  //                         placeholder=\"Auto-generated if empty\"\n  //                         value={variant.sku}\n  //                         onChange={(e) => handleVariantChange(index, \"sku\", e.target.value)}\n  //                         className=\"w-full border border-gray-300 px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n  //                         disabled={loading}\n  //                       />\n  //                     </div>\n  //                   </div>\n\n  //                   <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\n  //                     <div>\n  //                       <label className=\"block text-sm font-medium text-gray-700 mb-1\">Stock *</label>\n  //                       <input\n  //                         type=\"number\"\n  //                         placeholder=\"0\"\n  //                         value={variant.stock}\n  //                         onChange={(e) => handleVariantChange(index, \"stock\", e.target.value)}\n  //                         className={`w-full border px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${\n  //                           errors[`variant_${index}_stock`] ? 'border-red-500' : 'border-gray-300'\n  //                         }`}\n  //                         min=\"0\"\n  //                         disabled={loading}\n  //                       />\n  //                       {errors[`variant_${index}_stock`] && (\n  //                         <p className=\"text-red-500 text-xs mt-1\">{errors[`variant_${index}_stock`]}</p>\n  //                       )}\n  //                     </div>\n\n  //                     <div>\n  //                       <label className=\"block text-sm font-medium text-gray-700 mb-1\">Selling Price *</label>\n  //                       <input\n  //                         type=\"number\"\n  //                         placeholder=\"0.00\"\n  //                         value={variant.sellingPrice}\n  //                         onChange={(e) => handleVariantChange(index, \"sellingPrice\", e.target.value)}\n  //                         className={`w-full border px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${\n  //                           errors[`variant_${index}_sellingPrice`] ? 'border-red-500' : 'border-gray-300'\n  //                         }`}\n  //                         min=\"0\"\n  //                         step=\"0.01\"\n  //                         disabled={loading}\n  //                       />\n  //                       {errors[`variant_${index}_sellingPrice`] && (\n  //                         <p className=\"text-red-500 text-xs mt-1\">{errors[`variant_${index}_sellingPrice`]}</p>\n  //                       )}\n  //                     </div>\n\n  //                     <div>\n  //                       <label className=\"block text-sm font-medium text-gray-700 mb-1\">Cost Price *</label>\n  //                       <input\n  //                         type=\"number\"\n  //                         placeholder=\"0.00\"\n  //                         value={variant.costPrice}\n  //                         onChange={(e) => handleVariantChange(index, \"costPrice\", e.target.value)}\n  //                         className={`w-full border px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${\n  //                           errors[`variant_${index}_costPrice`] ? 'border-red-500' : 'border-gray-300'\n  //                         }`}\n  //                         min=\"0\"\n  //                         step=\"0.01\"\n  //                         disabled={loading}\n  //                       />\n  //                       {errors[`variant_${index}_costPrice`] && (\n  //                         <p className=\"text-red-500 text-xs mt-1\">{errors[`variant_${index}_costPrice`]}</p>\n  //                       )}\n  //                     </div>\n\n  //                     <div>\n  //                       <label className=\"block text-sm font-medium text-gray-700 mb-1\">Expiry Date</label>\n  //                       <input\n  //                         type=\"date\"\n  //                         value={variant.expiry && variant.expiry !== 'N/A' ? variant.expiry : ''}\n  //                         onChange={(e) => handleVariantChange(index, \"expiry\", e.target.value || 'N/A')}\n  //                         className=\"w-full border border-gray-300 px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n  //                         disabled={loading}\n  //                       />\n  //                     </div>\n  //                   </div>\n  //                 </div>\n  //               ))}\n  //             </div>\n  //           </div>\n\n  //           <div className=\"flex justify-end gap-4 pt-4 border-t\">\n  //             <button\n  //               type=\"button\"\n  //               onClick={onClose}\n  //               className=\"px-6 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors\"\n  //               disabled={loading}\n  //             >\n  //               Cancel\n  //             </button>\n  //             <button\n  //               type=\"submit\"\n  //               className=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2\"\n  //               disabled={loading}\n  //             >\n  //               {loading && <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>}\n  //               {loading ? 'Saving...' : 'Save Product'}\n  //             </button>\n  //           </div>\n  //         </form>\n  //       </div>\n  //     </div>\n  //   );\n  // }\n\n  // function ProductViewModal({ product, onClose }) {\n  //   const getTotalStock = (variants) => {\n  //     return (variants || []).reduce((sum, variant) => sum + (Number(variant.stock) || 0), 0);\n  //   };\n\n  //   const getTotalValue = (variants) => {\n  //     return (variants || []).reduce((sum, variant) => sum + ((Number(variant.stock) || 0) * (Number(variant.sellingPrice) || 0)), 0);\n  //   };\n\n  //   const getVariantProfit = (variant) => {\n  //     const selling = Number(variant.sellingPrice) || 0;\n  //     const cost = Number(variant.costPrice) || 0;\n  //     const profit = selling - cost;\n  //     const margin = cost > 0 ? (profit / cost) * 100 : 0;\n  //     return { profit, margin };\n  //   };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white p-6 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between items-center mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-bold text-blue-800\",\n          children: \"Product Details\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 709,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onClose,\n          className: \"text-gray-500 hover:text-gray-700 p-1 rounded-full hover:bg-gray-100 transition-colors\",\n          children: /*#__PURE__*/_jsxDEV(X, {\n            size: 24\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 714,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 710,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 708,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-xl border border-blue-200\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-4 mb-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-4xl\",\n              children: product.icon\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 722,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"text-2xl font-bold text-gray-900\",\n                children: product.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 724,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-blue-600 font-medium\",\n                children: [\"Category: \", product.category]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 725,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-gray-500\",\n                children: [\"Product ID: \", product.id]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 726,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 723,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 721,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-3 gap-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-white p-4 rounded-lg shadow-sm border\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-center\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-2xl font-bold text-blue-600\",\n                  children: getTotalStock(product.variants)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 734,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-sm text-gray-600\",\n                  children: \"Total Stock\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 735,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 733,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 732,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-white p-4 rounded-lg shadow-sm border\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-center\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-2xl font-bold text-green-600\",\n                  children: [\"\\u20B9\", getTotalValue(product.variants).toFixed(2)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 740,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-sm text-gray-600\",\n                  children: \"Total Value\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 741,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 739,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 738,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-white p-4 rounded-lg shadow-sm border\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-center\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-2xl font-bold text-purple-600\",\n                  children: ((_product$variants = product.variants) === null || _product$variants === void 0 ? void 0 : _product$variants.length) || 0\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 746,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-sm text-gray-600\",\n                  children: \"Variants\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 747,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 745,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 744,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 731,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 720,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"text-xl font-bold mb-4 text-gray-800\",\n            children: \"Variant Details\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 755,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid gap-4\",\n            children: (product.variants || []).map((variant, index) => {\n              const {\n                profit,\n                margin\n              } = getVariantProfit(variant);\n              const stock = Number(variant.stock) || 0;\n              const isLowStock = stock <= 10;\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"border border-gray-200 rounded-lg p-4 bg-white shadow-sm\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex justify-between items-start mb-3\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                    className: \"text-lg font-semibold text-gray-900\",\n                    children: variant.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 765,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: `px-3 py-1 rounded-full text-sm font-medium ${isLowStock ? 'bg-red-100 text-red-800' : 'bg-green-100 text-green-800'}`,\n                    children: isLowStock ? 'Low Stock' : 'In Stock'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 766,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 764,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 text-sm\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"bg-gray-50 p-3 rounded-lg\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-gray-600 font-medium block\",\n                      children: \"SKU\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 775,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"font-mono\",\n                      children: variant.sku || 'Not set'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 776,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 774,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"bg-gray-50 p-3 rounded-lg\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-gray-600 font-medium block\",\n                      children: \"Stock\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 780,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: `font-bold ${isLowStock ? 'text-red-600' : 'text-gray-900'}`,\n                      children: [stock, \" units\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 781,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 779,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"bg-gray-50 p-3 rounded-lg\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-gray-600 font-medium block\",\n                      children: \"Selling Price\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 787,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"font-bold text-green-600\",\n                      children: [\"\\u20B9\", Number(variant.sellingPrice) || 0]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 788,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 786,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"bg-gray-50 p-3 rounded-lg\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-gray-600 font-medium block\",\n                      children: \"Cost Price\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 792,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"font-bold text-blue-600\",\n                      children: [\"\\u20B9\", Number(variant.costPrice) || 0]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 793,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 791,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"bg-gray-50 p-3 rounded-lg\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-gray-600 font-medium block\",\n                      children: \"Profit Margin\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 797,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: `font-bold ${profit > 0 ? 'text-green-600' : 'text-red-600'}`,\n                      children: [\"\\u20B9\", profit.toFixed(2), \" (\", margin.toFixed(1), \"%)\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 798,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 796,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"bg-gray-50 p-3 rounded-lg\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-gray-600 font-medium block\",\n                      children: \"Expiry\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 804,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-gray-900\",\n                      children: variant.expiry === 'N/A' || !variant.expiry ? 'No expiry' : variant.expiry\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 805,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 803,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 773,\n                  columnNumber: 21\n                }, this)]\n              }, variant.id || index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 763,\n                columnNumber: 19\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 756,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 754,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 718,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-end mt-8 pt-4 border-t\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onClose,\n          className: \"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\",\n          children: \"Close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 818,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 817,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 707,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 706,\n    columnNumber: 5\n  }, this);\n}\n_s(DistributorProducts, \"S0mV2/umoGlXZln4198D780ftlY=\", false, function () {\n  return [useAuth];\n});\n_c = DistributorProducts;\nvar _c;\n$RefreshReg$(_c, \"DistributorProducts\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","Pencil","Trash2","PlusCircle","Eye","AlertTriangle","Package","X","API","useAuth","jsxDEV","_jsxDEV","DistributorProducts","_s","_product$variants","user","distributorId","_id","active","setActive","products","setProducts","showAddModal","setShowAddModal","showEditModal","setShowEditModal","showViewModal","setShowViewModal","editProduct","setEditProduct","viewProduct","setViewProduct","loading","setLoading","error","setError","distributorships","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","onClose","size","product","icon","name","category","id","getTotalStock","variants","getTotalValue","toFixed","length","map","variant","index","profit","margin","getVariantProfit","stock","Number","isLowStock","sku","sellingPrice","costPrice","expiry","_c","$RefreshReg$"],"sources":["/Users/nishant/Desktop/sledgeNew/Test/frontend/src/pages/Distributors/distributorProducts.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\";\nimport { Pencil, Trash2, PlusCircle, Eye, AlertTriangle, Package, X } from \"lucide-react\";\nimport API from \"../../api\";\nimport { useAuth } from \"../../components/AuthContext\";\n\nexport default function DistributorProducts() {\n  const { user } = useAuth();\n  const distributorId = user?._id;\n  const [active, setActive] = useState(\"Groceries\");\n  const [products, setProducts] = useState({});\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [showEditModal, setShowEditModal] = useState(false);\n  const [showViewModal, setShowViewModal] = useState(false);\n  const [editProduct, setEditProduct] = useState(null);\n  const [viewProduct, setViewProduct] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n  const distributorships = [\"Groceries\", \"Beverages\", \"Personal Care\"];\n\n//   // Fetch products from the backend\n//   const fetchProducts = useCallback(async () => {\n//     if (!distributorId) return;\n    \n//     setLoading(true);\n//     setError(\"\");\n    \n//     try {\n//       const response = await API.get(\"/products\", {\n//         params: { distributorId },\n//       });\n      \n//       const groupedProducts = response.data.reduce((acc, product) => {\n//         const category = product.category || 'Uncategorized';\n//         acc[category] = acc[category] || [];\n//         acc[category].push(product);\n//         return acc;\n//       }, {});\n      \n//       setProducts(groupedProducts);\n//     } catch (error) {\n//       console.error(\"Error fetching products:\", error);\n//       setError(\"Failed to fetch products. Please try again.\");\n//     } finally {\n//       setLoading(false);\n//     }\n//   }, [distributorId]);\n\n//   useEffect(() => {\n//     fetchProducts();\n//   }, [fetchProducts]);\n\n//   const handleAddProduct = async (product) => {\n//     if (!product.name?.trim()) {\n//       setError(\"Product name is required\");\n//       return;\n//     }\n\n//     try {\n//       setLoading(true);\n//       setError(\"\");\n      \n//       // Generate unique product ID\n//       const productId = Date.now();\n      \n//       // Generate SKUs for variants that don't have them\n//       const variantsWithSKU = product.variants.map((variant, index) => ({\n//         ...variant,\n//         id: variant.id || Date.now() + index,\n//         sku: variant.sku || `${productId}-VAR-${index + 1}`,\n//         expiry: variant.expiry || 'N/A',\n//         stock: Number(variant.stock) || 0,\n//         sellingPrice: Number(variant.sellingPrice) || 0,\n//         costPrice: Number(variant.costPrice) || 0\n//       }));\n\n//       const response = await API.post(\"/products\", {\n//         ...product,\n//         id: productId,\n//         user: user,\n//         distributorships: [active],\n//         category: active,\n\n//         variants: variantsWithSKU,\n//       });\n      \n//       setProducts((prev) => ({\n//         ...prev,\n//         [active]: [...(prev[active] || []), response.data],\n//       }));\n      \n//       setShowAddModal(false);\n//     } catch (error) {\n//       console.error(\"Error adding product:\", error);\n//       setError(\"Failed to add product. Please check all required fields.\");\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   const handleEditProduct = async (updated) => {\n//     if (!updated.name?.trim()) {\n//       setError(\"Product name is required\");\n//       return;\n//     }\n\n//     try {\n//       setLoading(true);\n//       setError(\"\");\n      \n//       // Ensure all variants have required fields\n//       const updatedVariants = updated.variants.map((variant) => ({\n//         ...variant,\n//         sku: variant.sku || `${updated.id}-VAR-${variant.id}`,\n//         expiry: variant.expiry || 'N/A',\n//         stock: Number(variant.stock) || 0,\n//         sellingPrice: Number(variant.sellingPrice) || 0,\n//         costPrice: Number(variant.costPrice) || 0\n//       }));\n\n//       const response = await API.put(`/products/${updated._id}`, {\n//         ...updated,\n//         distributorId,\n//         distributorships: [active],\n//         variants: updatedVariants,\n//       });\n      \n//       setProducts((prev) => ({\n//         ...prev,\n//         [active]: prev[active]?.map((p) => (p._id === updated._id ? response.data : p)) || [],\n//       }));\n      \n//       setShowEditModal(false);\n//       setEditProduct(null);\n//     } catch (error) {\n//       console.error(\"Error updating product:\", error);\n//       setError(\"Failed to update product. Please check all required fields.\");\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   const handleDelete = async (id) => {\n//     if (!window.confirm(\"Are you sure you want to delete this product?\")) return;\n    \n//     try {\n//       setLoading(true);\n//       setError(\"\");\n      \n//       await API.delete(`/products/${id}`);\n      \n//       setProducts((prev) => ({\n//         ...prev,\n//         [active]: prev[active]?.filter((p) => p._id !== id) || [],\n//       }));\n//     } catch (error) {\n//       console.error(\"Error deleting product:\", error);\n//       setError(\"Failed to delete product. Please try again.\");\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   const getTotalStock = (variants) => {\n//     return (variants || []).reduce((sum, variant) => sum + (Number(variant.stock) || 0), 0);\n//   };   \n\n//   const getPriceRange = (variants) => {\n//     if (!variants?.length) return \"â‚¹0\";\n    \n//     const prices = variants\n//       .map(v => Number(v.sellingPrice) || 0)\n//       .filter(p => p > 0);\n    \n//     if (!prices.length) return \"â‚¹0\";\n    \n//     const min = Math.min(...prices);\n//     const max = Math.max(...prices);\n//     return min === max ? `â‚¹${min}` : `â‚¹${min} - â‚¹${max}`;\n//   };\n\n//   const getLowStockVariants = (variants) => {\n//     return (variants || []).filter((v) => (Number(v.stock) || 0) <= 10);\n//   };\n\n//   const closeModals = () => {\n//     setShowAddModal(false);\n//     setShowEditModal(false);\n//     setShowViewModal(false);\n//     setEditProduct(null);\n//     setViewProduct(null);\n//   };\n\n//   if (!distributorId) {\n//     return (\n//       <div className=\"p-4 text-center\">\n//         <div className=\"text-red-600\">Please log in to manage products.</div>\n//       </div>\n//     );\n//   }\n\n//   return (\n//     <div className=\"p-4 max-w-7xl mx-auto\">\n//       <div className=\"flex justify-between items-center mb-6\">\n//         <h1 className=\"text-3xl font-bold text-blue-800\">Product Management</h1>\n//         <div className=\"text-sm text-gray-600 bg-blue-50 px-3 py-1 rounded-full\">\n//           Total Products: {products[active]?.length || 0}\n//         </div>\n//       </div>\n\n//       {error && (\n//         <div className=\"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg flex justify-between items-center\">\n//           <span>{error}</span>\n//           <button \n//             onClick={() => setError(\"\")}\n//             className=\"text-red-700 hover:text-red-900\"\n//           >\n//             <X size={16} />\n//           </button>\n//         </div>\n//       )}\n\n//       <div className=\"flex flex-wrap gap-3 mb-6\">\n//         {distributorships.map((name) => (\n//           <button\n//             key={name}\n//             onClick={() => setActive(name)}\n//             className={`px-5 py-2 rounded-full border-2 transition-all duration-200 font-medium ${\n//               active === name \n//                 ? \"bg-blue-700 text-white border-blue-700 shadow-lg\" \n//                 : \"bg-white text-blue-700 border-blue-200 hover:bg-blue-50\"\n//             }`}\n//           >\n//             {name} ({products[name]?.length || 0})\n//           </button>\n//         ))}\n//       </div>\n\n//       {loading ? (\n//         <div className=\"text-center py-12\">\n//           <div className=\"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n//           <p className=\"mt-2 text-gray-600\">Loading products...</p>\n//         </div>\n//       ) : (\n//         <div className=\"bg-white rounded-xl shadow-lg overflow-hidden\">\n//           <div className=\"overflow-x-auto\">\n//             <table className=\"min-w-full\">\n//               <thead className=\"bg-gradient-to-r from-blue-600 to-blue-700 text-white\">\n//                 <tr>\n//                   <th className=\"px-6 py-4 text-left font-semibold\">Product</th>\n//                   <th className=\"px-6 py-4 text-left font-semibold\">Total Stock</th>\n//                   <th className=\"px-6 py-4 text-left font-semibold\">Price Range</th>\n//                   <th className=\"px-6 py-4 text-left font-semibold\">Variants</th>\n//                   <th className=\"px-6 py-4 text-left font-semibold\">Status</th>\n//                   <th className=\"px-6 py-4 text-right font-semibold\">Actions</th>\n//                 </tr>\n//               </thead>\n//               <tbody className=\"divide-y divide-gray-200\">\n//                 {products[active]?.length ? (\n//                   products[active].map((product, index) => {\n//                     const lowStockVariants = getLowStockVariants(product.variants);\n//                     return (\n//                       <tr\n//                         key={product._id}\n//                         className={`hover:bg-blue-50 transition-colors ${\n//                           index % 2 === 0 ? 'bg-gray-50' : 'bg-white'\n//                         }`}\n//                       >\n//                         <td className=\"px-6 py-4\">\n//                           <div className=\"flex items-center gap-3\">\n//                             <span className=\"text-2xl\">{product.icon}</span>\n//                             <div>\n//                               <div className=\"font-semibold text-gray-900\">{product.name}</div>\n//                               <div className=\"text-sm text-gray-500\">ID: {product.id}</div>\n//                             </div>\n//                           </div>\n//                         </td>\n//                         <td className=\"px-6 py-4\">\n//                           <div className=\"flex items-center gap-2\">\n//                             <Package size={18} className=\"text-gray-500\" />\n//                             <span className=\"font-medium\">{getTotalStock(product.variants)}</span>\n//                           </div>\n//                         </td>\n//                         <td className=\"px-6 py-4 font-semibold text-green-600\">\n//                           {getPriceRange(product.variants)}\n//                         </td>\n//                         <td className=\"px-6 py-4\">\n//                           <span className=\"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-sm\">\n//                             {product.variants?.length || 0} variant{(product.variants?.length || 0) !== 1 ? 's' : ''}\n//                           </span>\n//                         </td>\n//                         <td className=\"px-6 py-4\">\n//                           {lowStockVariants.length > 0 ? (\n//                             <div className=\"flex items-center gap-2 text-orange-600\">\n//                               <AlertTriangle size={16} />\n//                               <span className=\"text-sm font-medium\">Low Stock</span>\n//                             </div>\n//                           ) : (\n//                             <span className=\"text-green-600 text-sm font-medium\">In Stock</span>\n//                           )}\n//                         </td>\n//                         <td className=\"px-6 py-4\">\n//                           <div className=\"flex justify-end gap-2\">\n//                             <button\n//                               onClick={() => {\n//                                 setViewProduct(product);\n//                                 setShowViewModal(true);\n//                               }}\n//                               className=\"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors\"\n//                               title=\"View Details\"\n//                             >\n//                               <Eye size={18} />\n//                             </button>\n//                             <button\n//                               onClick={() => {\n//                                 setEditProduct(product);\n//                                 setShowEditModal(true);\n//                               }}\n//                               className=\"p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-100 rounded-lg transition-colors\"\n//                               title=\"Edit Product\"\n//                             >\n//                               <Pencil size={18} />\n//                             </button>\n//                             <button\n//                               onClick={() => handleDelete(product._id)}\n//                               className=\"p-2 text-red-500 hover:text-red-700 hover:bg-red-100 rounded-lg transition-colors\"\n//                               title=\"Delete Product\"\n//                               disabled={loading}\n//                             >\n//                               <Trash2 size={18} />\n//                             </button>\n//                           </div>\n//                         </td>\n//                       </tr>\n//                     );\n//                   })\n//                 ) : (\n//                   <tr>\n//                     <td colSpan=\"6\" className=\"px-6 py-12 text-center text-gray-500\">\n//                       <Package size={48} className=\"mx-auto mb-4 text-gray-300\" />\n//                       <p className=\"text-lg font-medium\">No products found in {active}</p>\n//                       <p className=\"text-sm\">Add your first product to get started.</p>\n//                     </td>\n//                   </tr>\n//                 )}\n//               </tbody>\n//             </table>\n//           </div>\n//         </div>\n//       )}\n\n//       <button\n//         onClick={() => setShowAddModal(true)}\n//         disabled={loading}\n//         className=\"mt-6 flex items-center gap-3 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white px-6 py-3 rounded-full shadow-lg hover:shadow-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed font-medium\"\n//       >\n//         <PlusCircle size={20} /> Add New Product\n//       </button>\n\n//       {showAddModal && (\n//         <ProductModal\n//           title=\"Add New Product\"\n//           category={active}\n//           onClose={closeModals}\n//           onSubmit={handleAddProduct}\n//           loading={loading}\n//         />\n//       )}\n\n//       {showEditModal && editProduct && (\n//         <ProductModal\n//           title=\"Edit Product\"\n//           product={editProduct}\n//           category={active}\n//           onClose={closeModals}\n//           onSubmit={handleEditProduct}\n//           loading={loading}\n//         />\n//       )}\n\n//       {showViewModal && viewProduct && (\n//         <ProductViewModal\n//           product={viewProduct}\n//           onClose={closeModals}\n//         />\n//       )}\n//     </div>\n//   );\n// }\n\n// function ProductModal({ title, product = {}, category, onClose, onSubmit, loading = false }) {\n//   const [name, setName] = useState(product.name || \"\");\n//   const [icon, setIcon] = useState(product.icon || \"ðŸ“¦\");\n//   const [variants, setVariants] = useState(\n//     product.variants?.length > 0 \n//       ? product.variants.map(v => ({...v, stock: v.stock || 0, sellingPrice: v.sellingPrice || 0, costPrice: v.costPrice || 0}))\n//       : [{ id: Date.now(), name: \"\", stock: 0, sellingPrice: 0, costPrice: 0, sku: \"\", expiry: \"\" }]\n//   );\n//   const [errors, setErrors] = useState({});\n\n//   const validateForm = () => {\n//     const newErrors = {};\n    \n//     if (!name.trim()) {\n//       newErrors.name = \"Product name is required\";\n//     }\n    \n//     variants.forEach((variant, index) => {\n//       if (!variant.name.trim()) {\n//         newErrors[`variant_${index}_name`] = \"Variant name is required\";\n//       }\n//       if (Number(variant.sellingPrice) <= 0) {\n//         newErrors[`variant_${index}_sellingPrice`] = \"Selling price must be greater than 0\";\n//       }\n//       if (Number(variant.costPrice) < 0) {\n//         newErrors[`variant_${index}_costPrice`] = \"Cost price cannot be negative\";\n//       }\n//       if (Number(variant.stock) < 0) {\n//         newErrors[`variant_${index}_stock`] = \"Stock cannot be negative\";\n//       }\n//     });\n    \n//     setErrors(newErrors);\n//     return Object.keys(newErrors).length === 0;\n//   };\n\n//   const handleAddVariant = () => {\n//     setVariants((prev) => [\n//       ...prev,\n//       { \n//         id: Date.now(), \n//         name: \"\", \n//         stock: 0, \n//         sellingPrice: 0, \n//         costPrice: 0, \n//         sku: \"\", \n//         expiry: \"\" \n//       },\n//     ]);\n//   };\n\n//   const handleRemoveVariant = (index) => {\n//     if (variants.length > 1) {\n//       setVariants((prev) => prev.filter((_, i) => i !== index));\n//     }\n//   };\n\n//   const handleVariantChange = (index, field, value) => {\n//     setVariants((prev) =>\n//       prev.map((variant, i) =>\n//         i === index ? { ...variant, [field]: value } : variant\n//       )\n//     );\n    \n//     // Clear specific error when user starts typing\n//     if (errors[`variant_${index}_${field}`]) {\n//       setErrors(prev => ({\n//         ...prev,\n//         [`variant_${index}_${field}`]: undefined\n//       }));\n//     }\n//   };\n\n//   const handleSubmit = (e) => {\n//     e.preventDefault();\n//     if (!validateForm()) return;\n    \n//     const data = { \n//       ...product, \n//       name: name.trim(), \n//       icon,\n//       category,\n//       variants: variants.map(variant => ({\n//         ...variant,\n//         name: variant.name.trim(),\n//         stock: Number(variant.stock) || 0,\n//         sellingPrice: Number(variant.sellingPrice) || 0,\n//         costPrice: Number(variant.costPrice) || 0,\n//         sku: variant.sku.trim()\n//       }))\n//     };\n//     onSubmit(data);\n//   };\n\n//   return (\n//     <div className=\"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4\">\n//       <div className=\"bg-white p-6 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto\">\n//         <div className=\"flex justify-between items-center mb-6\">\n//           <h2 className=\"text-2xl font-bold text-blue-800\">{title}</h2>\n//           <button\n//             onClick={onClose}\n//             className=\"text-gray-500 hover:text-gray-700 p-1\"\n//           >\n//             <X size={24} />\n//           </button>\n//         </div>\n        \n//         <form onSubmit={handleSubmit} className=\"space-y-6\">\n//           <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n//             <div>\n//               <label className=\"block text-sm font-semibold mb-2 text-gray-700\">Product Name *</label>\n//               <input\n//                 type=\"text\"\n//                 placeholder=\"Enter product name\"\n//                 value={name}\n//                 onChange={(e) => {\n//                   setName(e.target.value);\n//                   if (errors.name) setErrors(prev => ({...prev, name: undefined}));\n//                 }}\n//                 className={`w-full border-2 px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${\n//                   errors.name ? 'border-red-500' : 'border-gray-300'\n//                 }`}\n//                 disabled={loading}\n//               />\n//               {errors.name && <p className=\"text-red-500 text-sm mt-1\">{errors.name}</p>}\n//             </div>\n            \n//             <div>\n//               <label className=\"block text-sm font-semibold mb-2 text-gray-700\">Product Icon</label>\n//               <input\n//                 type=\"text\"\n//                 placeholder=\"ðŸ“¦\"\n//                 value={icon}\n//                 onChange={(e) => setIcon(e.target.value)}\n//                 className=\"w-full border-2 border-gray-300 px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n//                 disabled={loading}\n//               />\n//             </div>\n//           </div>\n\n//           <div>\n//             <div className=\"flex justify-between items-center mb-4\">\n//               <h3 className=\"text-lg font-semibold text-gray-800\">Product Variants *</h3>\n//               <button\n//                 type=\"button\"\n//                 onClick={handleAddVariant}\n//                 className=\"text-blue-600 hover:text-blue-800 font-medium flex items-center gap-1\"\n//                 disabled={loading}\n//               >\n//                 <PlusCircle size={16} /> Add Variant\n//               </button>\n//             </div>\n            \n//             <div className=\"space-y-4\">\n//               {variants.map((variant, index) => (\n//                 <div key={variant.id} className=\"border-2 border-gray-200 rounded-lg p-4 bg-gray-50\">\n//                   <div className=\"flex justify-between items-center mb-3\">\n//                     <span className=\"font-semibold text-gray-700\">Variant {index + 1}</span>\n//                     {variants.length > 1 && (\n//                       <button\n//                         type=\"button\"\n//                         onClick={() => handleRemoveVariant(index)}\n//                         className=\"text-red-500 hover:text-red-700 font-medium\"\n//                         disabled={loading}\n//                       >\n//                         Remove\n//                       </button>\n//                     )}\n//                   </div>\n                  \n//                   <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3 mb-3\">\n//                     <div>\n//                       <label className=\"block text-sm font-medium text-gray-700 mb-1\">Variant Name *</label>\n//                       <input\n//                         type=\"text\"\n//                         placeholder=\"e.g., 500ml, Large, Red\"\n//                         value={variant.name}\n//                         onChange={(e) => handleVariantChange(index, \"name\", e.target.value)}\n//                         className={`w-full border px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${\n//                           errors[`variant_${index}_name`] ? 'border-red-500' : 'border-gray-300'\n//                         }`}\n//                         disabled={loading}\n//                       />\n//                       {errors[`variant_${index}_name`] && (\n//                         <p className=\"text-red-500 text-xs mt-1\">{errors[`variant_${index}_name`]}</p>\n//                       )}\n//                     </div>\n                    \n//                     <div>\n//                       <label className=\"block text-sm font-medium text-gray-700 mb-1\">SKU</label>\n//                       <input\n//                         type=\"text\"\n//                         placeholder=\"Auto-generated if empty\"\n//                         value={variant.sku}\n//                         onChange={(e) => handleVariantChange(index, \"sku\", e.target.value)}\n//                         className=\"w-full border border-gray-300 px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n//                         disabled={loading}\n//                       />\n//                     </div>\n//                   </div>\n                  \n//                   <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\n//                     <div>\n//                       <label className=\"block text-sm font-medium text-gray-700 mb-1\">Stock *</label>\n//                       <input\n//                         type=\"number\"\n//                         placeholder=\"0\"\n//                         value={variant.stock}\n//                         onChange={(e) => handleVariantChange(index, \"stock\", e.target.value)}\n//                         className={`w-full border px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${\n//                           errors[`variant_${index}_stock`] ? 'border-red-500' : 'border-gray-300'\n//                         }`}\n//                         min=\"0\"\n//                         disabled={loading}\n//                       />\n//                       {errors[`variant_${index}_stock`] && (\n//                         <p className=\"text-red-500 text-xs mt-1\">{errors[`variant_${index}_stock`]}</p>\n//                       )}\n//                     </div>\n\n//                     <div>\n//                       <label className=\"block text-sm font-medium text-gray-700 mb-1\">Selling Price *</label>\n//                       <input\n//                         type=\"number\"\n//                         placeholder=\"0.00\"\n//                         value={variant.sellingPrice}\n//                         onChange={(e) => handleVariantChange(index, \"sellingPrice\", e.target.value)}\n//                         className={`w-full border px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${\n//                           errors[`variant_${index}_sellingPrice`] ? 'border-red-500' : 'border-gray-300'\n//                         }`}\n//                         min=\"0\"\n//                         step=\"0.01\"\n//                         disabled={loading}\n//                       />\n//                       {errors[`variant_${index}_sellingPrice`] && (\n//                         <p className=\"text-red-500 text-xs mt-1\">{errors[`variant_${index}_sellingPrice`]}</p>\n//                       )}\n//                     </div>\n\n//                     <div>\n//                       <label className=\"block text-sm font-medium text-gray-700 mb-1\">Cost Price *</label>\n//                       <input\n//                         type=\"number\"\n//                         placeholder=\"0.00\"\n//                         value={variant.costPrice}\n//                         onChange={(e) => handleVariantChange(index, \"costPrice\", e.target.value)}\n//                         className={`w-full border px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${\n//                           errors[`variant_${index}_costPrice`] ? 'border-red-500' : 'border-gray-300'\n//                         }`}\n//                         min=\"0\"\n//                         step=\"0.01\"\n//                         disabled={loading}\n//                       />\n//                       {errors[`variant_${index}_costPrice`] && (\n//                         <p className=\"text-red-500 text-xs mt-1\">{errors[`variant_${index}_costPrice`]}</p>\n//                       )}\n//                     </div>\n\n//                     <div>\n//                       <label className=\"block text-sm font-medium text-gray-700 mb-1\">Expiry Date</label>\n//                       <input\n//                         type=\"date\"\n//                         value={variant.expiry && variant.expiry !== 'N/A' ? variant.expiry : ''}\n//                         onChange={(e) => handleVariantChange(index, \"expiry\", e.target.value || 'N/A')}\n//                         className=\"w-full border border-gray-300 px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n//                         disabled={loading}\n//                       />\n//                     </div>\n//                   </div>\n//                 </div>\n//               ))}\n//             </div>\n//           </div>\n        \n//           <div className=\"flex justify-end gap-4 pt-4 border-t\">\n//             <button\n//               type=\"button\"\n//               onClick={onClose}\n//               className=\"px-6 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors\"\n//               disabled={loading}\n//             >\n//               Cancel\n//             </button>\n//             <button\n//               type=\"submit\"\n//               className=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2\"\n//               disabled={loading}\n//             >\n//               {loading && <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>}\n//               {loading ? 'Saving...' : 'Save Product'}\n//             </button>\n//           </div>\n//         </form>\n//       </div>\n//     </div>\n//   );\n// }\n\n// function ProductViewModal({ product, onClose }) {\n//   const getTotalStock = (variants) => {\n//     return (variants || []).reduce((sum, variant) => sum + (Number(variant.stock) || 0), 0);\n//   };\n\n//   const getTotalValue = (variants) => {\n//     return (variants || []).reduce((sum, variant) => sum + ((Number(variant.stock) || 0) * (Number(variant.sellingPrice) || 0)), 0);\n//   };\n\n//   const getVariantProfit = (variant) => {\n//     const selling = Number(variant.sellingPrice) || 0;\n//     const cost = Number(variant.costPrice) || 0;\n//     const profit = selling - cost;\n//     const margin = cost > 0 ? (profit / cost) * 100 : 0;\n//     return { profit, margin };\n//   };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4\">\n      <div className=\"bg-white p-6 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto\">\n        <div className=\"flex justify-between items-center mb-6\">\n          <h2 className=\"text-2xl font-bold text-blue-800\">Product Details</h2>\n          <button\n            onClick={onClose}\n            className=\"text-gray-500 hover:text-gray-700 p-1 rounded-full hover:bg-gray-100 transition-colors\"\n          >\n            <X size={24} />\n          </button>\n        </div>\n        \n        <div className=\"space-y-6\">\n          {/* Product Header */}\n          <div className=\"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-xl border border-blue-200\">\n            <div className=\"flex items-center gap-4 mb-4\">\n              <span className=\"text-4xl\">{product.icon}</span>\n              <div>\n                <h3 className=\"text-2xl font-bold text-gray-900\">{product.name}</h3>\n                <p className=\"text-blue-600 font-medium\">Category: {product.category}</p>\n                <p className=\"text-sm text-gray-500\">Product ID: {product.id}</p>\n              </div>\n            </div>\n            \n            {/* Summary Statistics */}\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n              <div className=\"bg-white p-4 rounded-lg shadow-sm border\">\n                <div className=\"text-center\">\n                  <div className=\"text-2xl font-bold text-blue-600\">{getTotalStock(product.variants)}</div>\n                  <div className=\"text-sm text-gray-600\">Total Stock</div>\n                </div>\n              </div>\n              <div className=\"bg-white p-4 rounded-lg shadow-sm border\">\n                <div className=\"text-center\">\n                  <div className=\"text-2xl font-bold text-green-600\">â‚¹{getTotalValue(product.variants).toFixed(2)}</div>\n                  <div className=\"text-sm text-gray-600\">Total Value</div>\n                </div>\n              </div>\n              <div className=\"bg-white p-4 rounded-lg shadow-sm border\">\n                <div className=\"text-center\">\n                  <div className=\"text-2xl font-bold text-purple-600\">{product.variants?.length || 0}</div>\n                  <div className=\"text-sm text-gray-600\">Variants</div>\n                </div>\n              </div>\n            </div>\n          </div>\n          \n          {/* Variants Details */}\n          <div>\n            <h4 className=\"text-xl font-bold mb-4 text-gray-800\">Variant Details</h4>\n            <div className=\"grid gap-4\">\n              {(product.variants || []).map((variant, index) => {\n                const { profit, margin } = getVariantProfit(variant);\n                const stock = Number(variant.stock) || 0;\n                const isLowStock = stock <= 10;\n                \n                return (\n                  <div key={variant.id || index} className=\"border border-gray-200 rounded-lg p-4 bg-white shadow-sm\">\n                    <div className=\"flex justify-between items-start mb-3\">\n                      <h5 className=\"text-lg font-semibold text-gray-900\">{variant.name}</h5>\n                      <span className={`px-3 py-1 rounded-full text-sm font-medium ${\n                        isLowStock ? 'bg-red-100 text-red-800' : 'bg-green-100 text-green-800'\n                      }`}>\n                        {isLowStock ? 'Low Stock' : 'In Stock'}\n                      </span>\n                    </div>\n                    \n                    <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 text-sm\">\n                      <div className=\"bg-gray-50 p-3 rounded-lg\">\n                        <span className=\"text-gray-600 font-medium block\">SKU</span>\n                        <span className=\"font-mono\">{variant.sku || 'Not set'}</span>\n                      </div>\n                      \n                      <div className=\"bg-gray-50 p-3 rounded-lg\">\n                        <span className=\"text-gray-600 font-medium block\">Stock</span>\n                        <span className={`font-bold ${isLowStock ? 'text-red-600' : 'text-gray-900'}`}>\n                          {stock} units\n                        </span>\n                      </div>\n                      \n                      <div className=\"bg-gray-50 p-3 rounded-lg\">\n                        <span className=\"text-gray-600 font-medium block\">Selling Price</span>\n                        <span className=\"font-bold text-green-600\">â‚¹{Number(variant.sellingPrice) || 0}</span>\n                      </div>\n                      \n                      <div className=\"bg-gray-50 p-3 rounded-lg\">\n                        <span className=\"text-gray-600 font-medium block\">Cost Price</span>\n                        <span className=\"font-bold text-blue-600\">â‚¹{Number(variant.costPrice) || 0}</span>\n                      </div>\n                      \n                      <div className=\"bg-gray-50 p-3 rounded-lg\">\n                        <span className=\"text-gray-600 font-medium block\">Profit Margin</span>\n                        <span className={`font-bold ${profit > 0 ? 'text-green-600' : 'text-red-600'}`}>\n                          â‚¹{profit.toFixed(2)} ({margin.toFixed(1)}%)\n                        </span>\n                      </div>\n                      \n                      <div className=\"bg-gray-50 p-3 rounded-lg\">\n                        <span className=\"text-gray-600 font-medium block\">Expiry</span>\n                        <span className=\"text-gray-900\">\n                          {variant.expiry === 'N/A' || !variant.expiry ? 'No expiry' : variant.expiry}\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n        </div>\n        \n        <div className=\"flex justify-end mt-8 pt-4 border-t\">\n          <button\n            onClick={onClose}\n            className=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n          >\n            Close\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,WAAW,QAAQ,OAAO;AAC/D,SAASC,MAAM,EAAEC,MAAM,EAAEC,UAAU,EAAEC,GAAG,EAAEC,aAAa,EAAEC,OAAO,EAAEC,CAAC,QAAQ,cAAc;AACzF,OAAOC,GAAG,MAAM,WAAW;AAC3B,SAASC,OAAO,QAAQ,8BAA8B;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEvD,eAAe,SAASC,mBAAmBA,CAAA,EAAG;EAAAC,EAAA;EAAA,IAAAC,iBAAA;EAC5C,MAAM;IAAEC;EAAK,CAAC,GAAGN,OAAO,CAAC,CAAC;EAC1B,MAAMO,aAAa,GAAGD,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEE,GAAG;EAC/B,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGrB,QAAQ,CAAC,WAAW,CAAC;EACjD,MAAM,CAACsB,QAAQ,EAAEC,WAAW,CAAC,GAAGvB,QAAQ,CAAC,CAAC,CAAC,CAAC;EAC5C,MAAM,CAACwB,YAAY,EAAEC,eAAe,CAAC,GAAGzB,QAAQ,CAAC,KAAK,CAAC;EACvD,MAAM,CAAC0B,aAAa,EAAEC,gBAAgB,CAAC,GAAG3B,QAAQ,CAAC,KAAK,CAAC;EACzD,MAAM,CAAC4B,aAAa,EAAEC,gBAAgB,CAAC,GAAG7B,QAAQ,CAAC,KAAK,CAAC;EACzD,MAAM,CAAC8B,WAAW,EAAEC,cAAc,CAAC,GAAG/B,QAAQ,CAAC,IAAI,CAAC;EACpD,MAAM,CAACgC,WAAW,EAAEC,cAAc,CAAC,GAAGjC,QAAQ,CAAC,IAAI,CAAC;EACpD,MAAM,CAACkC,OAAO,EAAEC,UAAU,CAAC,GAAGnC,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,CAACoC,KAAK,EAAEC,QAAQ,CAAC,GAAGrC,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAMsC,gBAAgB,GAAG,CAAC,WAAW,EAAE,WAAW,EAAE,eAAe,CAAC;;EAEtE;EACA;EACA;;EAEA;EACA;;EAEA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;;EAEA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;;EAEA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;;EAEA;EACA;EACA;;EAEA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;;EAEA;EACA;;EAEA;EACA;EACA;;EAEA;;EAEA;EACA;EACA;EACA;;EAEA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;;EAEA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;;EAEA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEE,oBACEzB,OAAA;IAAK0B,SAAS,EAAC,gFAAgF;IAAAC,QAAA,eAC7F3B,OAAA;MAAK0B,SAAS,EAAC,kFAAkF;MAAAC,QAAA,gBAC/F3B,OAAA;QAAK0B,SAAS,EAAC,wCAAwC;QAAAC,QAAA,gBACrD3B,OAAA;UAAI0B,SAAS,EAAC,kCAAkC;UAAAC,QAAA,EAAC;QAAe;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eACrE/B,OAAA;UACEgC,OAAO,EAAEC,OAAQ;UACjBP,SAAS,EAAC,wFAAwF;UAAAC,QAAA,eAElG3B,OAAA,CAACJ,CAAC;YAACsC,IAAI,EAAE;UAAG;YAAAN,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACT,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC,eAEN/B,OAAA;QAAK0B,SAAS,EAAC,WAAW;QAAAC,QAAA,gBAExB3B,OAAA;UAAK0B,SAAS,EAAC,kFAAkF;UAAAC,QAAA,gBAC/F3B,OAAA;YAAK0B,SAAS,EAAC,8BAA8B;YAAAC,QAAA,gBAC3C3B,OAAA;cAAM0B,SAAS,EAAC,UAAU;cAAAC,QAAA,EAAEQ,OAAO,CAACC;YAAI;cAAAR,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eAChD/B,OAAA;cAAA2B,QAAA,gBACE3B,OAAA;gBAAI0B,SAAS,EAAC,kCAAkC;gBAAAC,QAAA,EAAEQ,OAAO,CAACE;cAAI;gBAAAT,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CAAC,eACpE/B,OAAA;gBAAG0B,SAAS,EAAC,2BAA2B;gBAAAC,QAAA,GAAC,YAAU,EAACQ,OAAO,CAACG,QAAQ;cAAA;gBAAAV,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eACzE/B,OAAA;gBAAG0B,SAAS,EAAC,uBAAuB;gBAAAC,QAAA,GAAC,cAAY,EAACQ,OAAO,CAACI,EAAE;cAAA;gBAAAX,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC9D,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC,eAGN/B,OAAA;YAAK0B,SAAS,EAAC,uCAAuC;YAAAC,QAAA,gBACpD3B,OAAA;cAAK0B,SAAS,EAAC,0CAA0C;cAAAC,QAAA,eACvD3B,OAAA;gBAAK0B,SAAS,EAAC,aAAa;gBAAAC,QAAA,gBAC1B3B,OAAA;kBAAK0B,SAAS,EAAC,kCAAkC;kBAAAC,QAAA,EAAEa,aAAa,CAACL,OAAO,CAACM,QAAQ;gBAAC;kBAAAb,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eACzF/B,OAAA;kBAAK0B,SAAS,EAAC,uBAAuB;kBAAAC,QAAA,EAAC;gBAAW;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAK,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACrD;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC,eACN/B,OAAA;cAAK0B,SAAS,EAAC,0CAA0C;cAAAC,QAAA,eACvD3B,OAAA;gBAAK0B,SAAS,EAAC,aAAa;gBAAAC,QAAA,gBAC1B3B,OAAA;kBAAK0B,SAAS,EAAC,mCAAmC;kBAAAC,QAAA,GAAC,QAAC,EAACe,aAAa,CAACP,OAAO,CAACM,QAAQ,CAAC,CAACE,OAAO,CAAC,CAAC,CAAC;gBAAA;kBAAAf,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eACtG/B,OAAA;kBAAK0B,SAAS,EAAC,uBAAuB;kBAAAC,QAAA,EAAC;gBAAW;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAK,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACrD;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC,eACN/B,OAAA;cAAK0B,SAAS,EAAC,0CAA0C;cAAAC,QAAA,eACvD3B,OAAA;gBAAK0B,SAAS,EAAC,aAAa;gBAAAC,QAAA,gBAC1B3B,OAAA;kBAAK0B,SAAS,EAAC,oCAAoC;kBAAAC,QAAA,EAAE,EAAAxB,iBAAA,GAAAgC,OAAO,CAACM,QAAQ,cAAAtC,iBAAA,uBAAhBA,iBAAA,CAAkByC,MAAM,KAAI;gBAAC;kBAAAhB,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eACzF/B,OAAA;kBAAK0B,SAAS,EAAC,uBAAuB;kBAAAC,QAAA,EAAC;gBAAQ;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAK,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAClD;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC,eAGN/B,OAAA;UAAA2B,QAAA,gBACE3B,OAAA;YAAI0B,SAAS,EAAC,sCAAsC;YAAAC,QAAA,EAAC;UAAe;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eACzE/B,OAAA;YAAK0B,SAAS,EAAC,YAAY;YAAAC,QAAA,EACxB,CAACQ,OAAO,CAACM,QAAQ,IAAI,EAAE,EAAEI,GAAG,CAAC,CAACC,OAAO,EAAEC,KAAK,KAAK;cAChD,MAAM;gBAAEC,MAAM;gBAAEC;cAAO,CAAC,GAAGC,gBAAgB,CAACJ,OAAO,CAAC;cACpD,MAAMK,KAAK,GAAGC,MAAM,CAACN,OAAO,CAACK,KAAK,CAAC,IAAI,CAAC;cACxC,MAAME,UAAU,GAAGF,KAAK,IAAI,EAAE;cAE9B,oBACEnD,OAAA;gBAA+B0B,SAAS,EAAC,0DAA0D;gBAAAC,QAAA,gBACjG3B,OAAA;kBAAK0B,SAAS,EAAC,uCAAuC;kBAAAC,QAAA,gBACpD3B,OAAA;oBAAI0B,SAAS,EAAC,qCAAqC;oBAAAC,QAAA,EAAEmB,OAAO,CAACT;kBAAI;oBAAAT,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAK,CAAC,eACvE/B,OAAA;oBAAM0B,SAAS,EAAE,8CACf2B,UAAU,GAAG,yBAAyB,GAAG,6BAA6B,EACrE;oBAAA1B,QAAA,EACA0B,UAAU,GAAG,WAAW,GAAG;kBAAU;oBAAAzB,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAClC,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACJ,CAAC,eAEN/B,OAAA;kBAAK0B,SAAS,EAAC,8DAA8D;kBAAAC,QAAA,gBAC3E3B,OAAA;oBAAK0B,SAAS,EAAC,2BAA2B;oBAAAC,QAAA,gBACxC3B,OAAA;sBAAM0B,SAAS,EAAC,iCAAiC;sBAAAC,QAAA,EAAC;oBAAG;sBAAAC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAM,CAAC,eAC5D/B,OAAA;sBAAM0B,SAAS,EAAC,WAAW;sBAAAC,QAAA,EAAEmB,OAAO,CAACQ,GAAG,IAAI;oBAAS;sBAAA1B,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAO,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAC1D,CAAC,eAEN/B,OAAA;oBAAK0B,SAAS,EAAC,2BAA2B;oBAAAC,QAAA,gBACxC3B,OAAA;sBAAM0B,SAAS,EAAC,iCAAiC;sBAAAC,QAAA,EAAC;oBAAK;sBAAAC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAM,CAAC,eAC9D/B,OAAA;sBAAM0B,SAAS,EAAE,aAAa2B,UAAU,GAAG,cAAc,GAAG,eAAe,EAAG;sBAAA1B,QAAA,GAC3EwB,KAAK,EAAC,QACT;oBAAA;sBAAAvB,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAM,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACJ,CAAC,eAEN/B,OAAA;oBAAK0B,SAAS,EAAC,2BAA2B;oBAAAC,QAAA,gBACxC3B,OAAA;sBAAM0B,SAAS,EAAC,iCAAiC;sBAAAC,QAAA,EAAC;oBAAa;sBAAAC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAM,CAAC,eACtE/B,OAAA;sBAAM0B,SAAS,EAAC,0BAA0B;sBAAAC,QAAA,GAAC,QAAC,EAACyB,MAAM,CAACN,OAAO,CAACS,YAAY,CAAC,IAAI,CAAC;oBAAA;sBAAA3B,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAO,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACnF,CAAC,eAEN/B,OAAA;oBAAK0B,SAAS,EAAC,2BAA2B;oBAAAC,QAAA,gBACxC3B,OAAA;sBAAM0B,SAAS,EAAC,iCAAiC;sBAAAC,QAAA,EAAC;oBAAU;sBAAAC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAM,CAAC,eACnE/B,OAAA;sBAAM0B,SAAS,EAAC,yBAAyB;sBAAAC,QAAA,GAAC,QAAC,EAACyB,MAAM,CAACN,OAAO,CAACU,SAAS,CAAC,IAAI,CAAC;oBAAA;sBAAA5B,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAO,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAC/E,CAAC,eAEN/B,OAAA;oBAAK0B,SAAS,EAAC,2BAA2B;oBAAAC,QAAA,gBACxC3B,OAAA;sBAAM0B,SAAS,EAAC,iCAAiC;sBAAAC,QAAA,EAAC;oBAAa;sBAAAC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAM,CAAC,eACtE/B,OAAA;sBAAM0B,SAAS,EAAE,aAAasB,MAAM,GAAG,CAAC,GAAG,gBAAgB,GAAG,cAAc,EAAG;sBAAArB,QAAA,GAAC,QAC7E,EAACqB,MAAM,CAACL,OAAO,CAAC,CAAC,CAAC,EAAC,IAAE,EAACM,MAAM,CAACN,OAAO,CAAC,CAAC,CAAC,EAAC,IAC3C;oBAAA;sBAAAf,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAM,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACJ,CAAC,eAEN/B,OAAA;oBAAK0B,SAAS,EAAC,2BAA2B;oBAAAC,QAAA,gBACxC3B,OAAA;sBAAM0B,SAAS,EAAC,iCAAiC;sBAAAC,QAAA,EAAC;oBAAM;sBAAAC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAM,CAAC,eAC/D/B,OAAA;sBAAM0B,SAAS,EAAC,eAAe;sBAAAC,QAAA,EAC5BmB,OAAO,CAACW,MAAM,KAAK,KAAK,IAAI,CAACX,OAAO,CAACW,MAAM,GAAG,WAAW,GAAGX,OAAO,CAACW;oBAAM;sBAAA7B,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACvE,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACJ,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACH,CAAC;cAAA,GA9CEe,OAAO,CAACP,EAAE,IAAIQ,KAAK;gBAAAnB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OA+CxB,CAAC;YAEV,CAAC;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACC,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,eAEN/B,OAAA;QAAK0B,SAAS,EAAC,qCAAqC;QAAAC,QAAA,eAClD3B,OAAA;UACEgC,OAAO,EAAEC,OAAQ;UACjBP,SAAS,EAAC,iFAAiF;UAAAC,QAAA,EAC5F;QAED;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV;AAAC7B,EAAA,CAtzBuBD,mBAAmB;EAAA,QACxBH,OAAO;AAAA;AAAA4D,EAAA,GADFzD,mBAAmB;AAAA,IAAAyD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}