{"ast":null,"code":"var _jsxFileName = \"/Users/nishant/Desktop/sledgeNew/Test/frontend/src/pages/Distributors/distributorProducts.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n// import React, { useState, useEffect, useCallback } from \"react\";\n// import { Pencil, Trash2, PlusCircle, Eye, AlertTriangle, Package, X } from \"lucide-react\";\n// import API from \"../../api\";\n// import { useAuth } from \"../../components/AuthContext\";\n\n// export default function DistributorProducts() {\n//   const { user } = useAuth();\n//   const distributorId = user?._id;\n//   const [active, setActive] = useState(\"Groceries\");\n//   const [products, setProducts] = useState({});\n//   const [showAddModal, setShowAddModal] = useState(false);\n//   const [showEditModal, setShowEditModal] = useState(false);\n//   const [showViewModal, setShowViewModal] = useState(false);\n//   const [editProduct, setEditProduct] = useState(null);\n//   const [viewProduct, setViewProduct] = useState(null);\n//   const [loading, setLoading] = useState(false);\n//   const [error, setError] = useState(\"\");\n//   const distributorships = [\"Groceries\", \"Beverages\", \"Personal Care\"];\n\n//   // Fetch products from the backend\n//   const fetchProducts = useCallback(async () => {\n//     if (!distributorId) return;\n\n//     setLoading(true);\n//     setError(\"\");\n\n//     try {\n//       const response = await API.get(\"/products\", {\n//         params: { distributorId },\n//       });\n\n//       const groupedProducts = response.data.reduce((acc, product) => {\n//         const category = product.category || 'Uncategorized';\n//         acc[category] = acc[category] || [];\n//         acc[category].push(product);\n//         return acc;\n//       }, {});\n\n//       setProducts(groupedProducts);\n//     } catch (error) {\n//       console.error(\"Error fetching products:\", error);\n//       setError(\"Failed to fetch products. Please try again.\");\n//     } finally {\n//       setLoading(false);\n//     }\n//   }, [distributorId]);\n\n//   useEffect(() => {\n//     fetchProducts();\n//   }, [fetchProducts]);\n\n//   const handleAddProduct = async (product) => {\n//     if (!product.name?.trim()) {\n//       setError(\"Product name is required\");\n//       return;\n//     }\n\n//     try {\n//       setLoading(true);\n//       setError(\"\");\n\n//       // Generate unique product ID\n//       const productId = Date.now();\n\n//       // Generate SKUs for variants that don't have them\n//       const variantsWithSKU = product.variants.map((variant, index) => ({\n//         ...variant,\n//         id: variant.id || Date.now() + index,\n//         sku: variant.sku || `${productId}-VAR-${index + 1}`,\n//         expiry: variant.expiry || 'N/A',\n//         stock: Number(variant.stock) || 0,\n//         sellingPrice: Number(variant.sellingPrice) || 0,\n//         costPrice: Number(variant.costPrice) || 0\n//       }));\n\n//       const response = await API.post(\"/products\", {\n//         ...product,\n//         id: productId,\n//         user: user,\n//         distributorships: [active],\n//         category: active,\n\n//         variants: variantsWithSKU,\n//       });\n\n//       setProducts((prev) => ({\n//         ...prev,\n//         [active]: [...(prev[active] || []), response.data],\n//       }));\n\n//       setShowAddModal(false);\n//     } catch (error) {\n//       console.error(\"Error adding product:\", error);\n//       setError(\"Failed to add product. Please check all required fields.\");\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   const handleEditProduct = async (updated) => {\n//     if (!updated.name?.trim()) {\n//       setError(\"Product name is required\");\n//       return;\n//     }\n\n//     try {\n//       setLoading(true);\n//       setError(\"\");\n\n//       // Ensure all variants have required fields\n//       const updatedVariants = updated.variants.map((variant) => ({\n//         ...variant,\n//         sku: variant.sku || `${updated.id}-VAR-${variant.id}`,\n//         expiry: variant.expiry || 'N/A',\n//         stock: Number(variant.stock) || 0,\n//         sellingPrice: Number(variant.sellingPrice) || 0,\n//         costPrice: Number(variant.costPrice) || 0\n//       }));\n\n//       const response = await API.put(`/products/${updated._id}`, {\n//         ...updated,\n//         distributorId,\n//         distributorships: [active],\n//         variants: updatedVariants,\n//       });\n\n//       setProducts((prev) => ({\n//         ...prev,\n//         [active]: prev[active]?.map((p) => (p._id === updated._id ? response.data : p)) || [],\n//       }));\n\n//       setShowEditModal(false);\n//       setEditProduct(null);\n//     } catch (error) {\n//       console.error(\"Error updating product:\", error);\n//       setError(\"Failed to update product. Please check all required fields.\");\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   const handleDelete = async (id) => {\n//     if (!window.confirm(\"Are you sure you want to delete this product?\")) return;\n\n//     try {\n//       setLoading(true);\n//       setError(\"\");\n\n//       await API.delete(`/products/${id}`);\n\n//       setProducts((prev) => ({\n//         ...prev,\n//         [active]: prev[active]?.filter((p) => p._id !== id) || [],\n//       }));\n//     } catch (error) {\n//       console.error(\"Error deleting product:\", error);\n//       setError(\"Failed to delete product. Please try again.\");\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   const getTotalStock = (variants) => {\n//     return (variants || []).reduce((sum, variant) => sum + (Number(variant.stock) || 0), 0);\n//   };   \n\n//   const getPriceRange = (variants) => {\n//     if (!variants?.length) return \"₹0\";\n\n//     const prices = variants\n//       .map(v => Number(v.sellingPrice) || 0)\n//       .filter(p => p > 0);\n\n//     if (!prices.length) return \"₹0\";\n\n//     const min = Math.min(...prices);\n//     const max = Math.max(...prices);\n//     return min === max ? `₹${min}` : `₹${min} - ₹${max}`;\n//   };\n\n//   const getLowStockVariants = (variants) => {\n//     return (variants || []).filter((v) => (Number(v.stock) || 0) <= 10);\n//   };\n\n//   const closeModals = () => {\n//     setShowAddModal(false);\n//     setShowEditModal(false);\n//     setShowViewModal(false);\n//     setEditProduct(null);\n//     setViewProduct(null);\n//   };\n\n//   if (!distributorId) {\n//     return (\n//       <div className=\"p-4 text-center\">\n//         <div className=\"text-red-600\">Please log in to manage products.</div>\n//       </div>\n//     );\n//   }\n\n//   return (\n//     <div className=\"p-4 max-w-7xl mx-auto\">\n//       <div className=\"flex justify-between items-center mb-6\">\n//         <h1 className=\"text-3xl font-bold text-blue-800\">Product Management</h1>\n//         <div className=\"text-sm text-gray-600 bg-blue-50 px-3 py-1 rounded-full\">\n//           Total Products: {products[active]?.length || 0}\n//         </div>\n//       </div>\n\n//       {error && (\n//         <div className=\"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg flex justify-between items-center\">\n//           <span>{error}</span>\n//           <button \n//             onClick={() => setError(\"\")}\n//             className=\"text-red-700 hover:text-red-900\"\n//           >\n//             <X size={16} />\n//           </button>\n//         </div>\n//       )}\n\n//       <div className=\"flex flex-wrap gap-3 mb-6\">\n//         {distributorships.map((name) => (\n//           <button\n//             key={name}\n//             onClick={() => setActive(name)}\n//             className={`px-5 py-2 rounded-full border-2 transition-all duration-200 font-medium ${\n//               active === name \n//                 ? \"bg-blue-700 text-white border-blue-700 shadow-lg\" \n//                 : \"bg-white text-blue-700 border-blue-200 hover:bg-blue-50\"\n//             }`}\n//           >\n//             {name} ({products[name]?.length || 0})\n//           </button>\n//         ))}\n//       </div>\n\n//       {loading ? (\n//         <div className=\"text-center py-12\">\n//           <div className=\"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n//           <p className=\"mt-2 text-gray-600\">Loading products...</p>\n//         </div>\n//       ) : (\n//         <div className=\"bg-white rounded-xl shadow-lg overflow-hidden\">\n//           <div className=\"overflow-x-auto\">\n//             <table className=\"min-w-full\">\n//               <thead className=\"bg-gradient-to-r from-blue-600 to-blue-700 text-white\">\n//                 <tr>\n//                   <th className=\"px-6 py-4 text-left font-semibold\">Product</th>\n//                   <th className=\"px-6 py-4 text-left font-semibold\">Total Stock</th>\n//                   <th className=\"px-6 py-4 text-left font-semibold\">Price Range</th>\n//                   <th className=\"px-6 py-4 text-left font-semibold\">Variants</th>\n//                   <th className=\"px-6 py-4 text-left font-semibold\">Status</th>\n//                   <th className=\"px-6 py-4 text-right font-semibold\">Actions</th>\n//                 </tr>\n//               </thead>\n//               <tbody className=\"divide-y divide-gray-200\">\n//                 {products[active]?.length ? (\n//                   products[active].map((product, index) => {\n//                     const lowStockVariants = getLowStockVariants(product.variants);\n//                     return (\n//                       <tr\n//                         key={product._id}\n//                         className={`hover:bg-blue-50 transition-colors ${\n//                           index % 2 === 0 ? 'bg-gray-50' : 'bg-white'\n//                         }`}\n//                       >\n//                         <td className=\"px-6 py-4\">\n//                           <div className=\"flex items-center gap-3\">\n//                             <span className=\"text-2xl\">{product.icon}</span>\n//                             <div>\n//                               <div className=\"font-semibold text-gray-900\">{product.name}</div>\n//                               <div className=\"text-sm text-gray-500\">ID: {product.id}</div>\n//                             </div>\n//                           </div>\n//                         </td>\n//                         <td className=\"px-6 py-4\">\n//                           <div className=\"flex items-center gap-2\">\n//                             <Package size={18} className=\"text-gray-500\" />\n//                             <span className=\"font-medium\">{getTotalStock(product.variants)}</span>\n//                           </div>\n//                         </td>\n//                         <td className=\"px-6 py-4 font-semibold text-green-600\">\n//                           {getPriceRange(product.variants)}\n//                         </td>\n//                         <td className=\"px-6 py-4\">\n//                           <span className=\"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-sm\">\n//                             {product.variants?.length || 0} variant{(product.variants?.length || 0) !== 1 ? 's' : ''}\n//                           </span>\n//                         </td>\n//                         <td className=\"px-6 py-4\">\n//                           {lowStockVariants.length > 0 ? (\n//                             <div className=\"flex items-center gap-2 text-orange-600\">\n//                               <AlertTriangle size={16} />\n//                               <span className=\"text-sm font-medium\">Low Stock</span>\n//                             </div>\n//                           ) : (\n//                             <span className=\"text-green-600 text-sm font-medium\">In Stock</span>\n//                           )}\n//                         </td>\n//                         <td className=\"px-6 py-4\">\n//                           <div className=\"flex justify-end gap-2\">\n//                             <button\n//                               onClick={() => {\n//                                 setViewProduct(product);\n//                                 setShowViewModal(true);\n//                               }}\n//                               className=\"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors\"\n//                               title=\"View Details\"\n//                             >\n//                               <Eye size={18} />\n//                             </button>\n//                             <button\n//                               onClick={() => {\n//                                 setEditProduct(product);\n//                                 setShowEditModal(true);\n//                               }}\n//                               className=\"p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-100 rounded-lg transition-colors\"\n//                               title=\"Edit Product\"\n//                             >\n//                               <Pencil size={18} />\n//                             </button>\n//                             <button\n//                               onClick={() => handleDelete(product._id)}\n//                               className=\"p-2 text-red-500 hover:text-red-700 hover:bg-red-100 rounded-lg transition-colors\"\n//                               title=\"Delete Product\"\n//                               disabled={loading}\n//                             >\n//                               <Trash2 size={18} />\n//                             </button>\n//                           </div>\n//                         </td>\n//                       </tr>\n//                     );\n//                   })\n//                 ) : (\n//                   <tr>\n//                     <td colSpan=\"6\" className=\"px-6 py-12 text-center text-gray-500\">\n//                       <Package size={48} className=\"mx-auto mb-4 text-gray-300\" />\n//                       <p className=\"text-lg font-medium\">No products found in {active}</p>\n//                       <p className=\"text-sm\">Add your first product to get started.</p>\n//                     </td>\n//                   </tr>\n//                 )}\n//               </tbody>\n//             </table>\n//           </div>\n//         </div>\n//       )}\n\n//       <button\n//         onClick={() => setShowAddModal(true)}\n//         disabled={loading}\n//         className=\"mt-6 flex items-center gap-3 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white px-6 py-3 rounded-full shadow-lg hover:shadow-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed font-medium\"\n//       >\n//         <PlusCircle size={20} /> Add New Product\n//       </button>\n\n//       {showAddModal && (\n//         <ProductModal\n//           title=\"Add New Product\"\n//           category={active}\n//           onClose={closeModals}\n//           onSubmit={handleAddProduct}\n//           loading={loading}\n//         />\n//       )}\n\n//       {showEditModal && editProduct && (\n//         <ProductModal\n//           title=\"Edit Product\"\n//           product={editProduct}\n//           category={active}\n//           onClose={closeModals}\n//           onSubmit={handleEditProduct}\n//           loading={loading}\n//         />\n//       )}\n\n//       {showViewModal && viewProduct && (\n//         <ProductViewModal\n//           product={viewProduct}\n//           onClose={closeModals}\n//         />\n//       )}\n//     </div>\n//   );\n// }\n\n// function ProductModal({ title, product = {}, category, onClose, onSubmit, loading = false }) {\n//   const [name, setName] = useState(product.name || \"\");\n//   const [icon, setIcon] = useState(product.icon || \"📦\");\n//   const [variants, setVariants] = useState(\n//     product.variants?.length > 0 \n//       ? product.variants.map(v => ({...v, stock: v.stock || 0, sellingPrice: v.sellingPrice || 0, costPrice: v.costPrice || 0}))\n//       : [{ id: Date.now(), name: \"\", stock: 0, sellingPrice: 0, costPrice: 0, sku: \"\", expiry: \"\" }]\n//   );\n//   const [errors, setErrors] = useState({});\n\n//   const validateForm = () => {\n//     const newErrors = {};\n\n//     if (!name.trim()) {\n//       newErrors.name = \"Product name is required\";\n//     }\n\n//     variants.forEach((variant, index) => {\n//       if (!variant.name.trim()) {\n//         newErrors[`variant_${index}_name`] = \"Variant name is required\";\n//       }\n//       if (Number(variant.sellingPrice) <= 0) {\n//         newErrors[`variant_${index}_sellingPrice`] = \"Selling price must be greater than 0\";\n//       }\n//       if (Number(variant.costPrice) < 0) {\n//         newErrors[`variant_${index}_costPrice`] = \"Cost price cannot be negative\";\n//       }\n//       if (Number(variant.stock) < 0) {\n//         newErrors[`variant_${index}_stock`] = \"Stock cannot be negative\";\n//       }\n//     });\n\n//     setErrors(newErrors);\n//     return Object.keys(newErrors).length === 0;\n//   };\n\n//   const handleAddVariant = () => {\n//     setVariants((prev) => [\n//       ...prev,\n//       { \n//         id: Date.now(), \n//         name: \"\", \n//         stock: 0, \n//         sellingPrice: 0, \n//         costPrice: 0, \n//         sku: \"\", \n//         expiry: \"\" \n//       },\n//     ]);\n//   };\n\n//   const handleRemoveVariant = (index) => {\n//     if (variants.length > 1) {\n//       setVariants((prev) => prev.filter((_, i) => i !== index));\n//     }\n//   };\n\n//   const handleVariantChange = (index, field, value) => {\n//     setVariants((prev) =>\n//       prev.map((variant, i) =>\n//         i === index ? { ...variant, [field]: value } : variant\n//       )\n//     );\n\n//     // Clear specific error when user starts typing\n//     if (errors[`variant_${index}_${field}`]) {\n//       setErrors(prev => ({\n//         ...prev,\n//         [`variant_${index}_${field}`]: undefined\n//       }));\n//     }\n//   };\n\n//   const handleSubmit = (e) => {\n//     e.preventDefault();\n//     if (!validateForm()) return;\n\n//     const data = { \n//       ...product, \n//       name: name.trim(), \n//       icon,\n//       category,\n//       variants: variants.map(variant => ({\n//         ...variant,\n//         name: variant.name.trim(),\n//         stock: Number(variant.stock) || 0,\n//         sellingPrice: Number(variant.sellingPrice) || 0,\n//         costPrice: Number(variant.costPrice) || 0,\n//         sku: variant.sku.trim()\n//       }))\n//     };\n//     onSubmit(data);\n//   };\n\n//   return (\n//     <div className=\"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4\">\n//       <div className=\"bg-white p-6 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto\">\n//         <div className=\"flex justify-between items-center mb-6\">\n//           <h2 className=\"text-2xl font-bold text-blue-800\">{title}</h2>\n//           <button\n//             onClick={onClose}\n//             className=\"text-gray-500 hover:text-gray-700 p-1\"\n//           >\n//             <X size={24} />\n//           </button>\n//         </div>\n\n//         <form onSubmit={handleSubmit} className=\"space-y-6\">\n//           <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n//             <div>\n//               <label className=\"block text-sm font-semibold mb-2 text-gray-700\">Product Name *</label>\n//               <input\n//                 type=\"text\"\n//                 placeholder=\"Enter product name\"\n//                 value={name}\n//                 onChange={(e) => {\n//                   setName(e.target.value);\n//                   if (errors.name) setErrors(prev => ({...prev, name: undefined}));\n//                 }}\n//                 className={`w-full border-2 px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${\n//                   errors.name ? 'border-red-500' : 'border-gray-300'\n//                 }`}\n//                 disabled={loading}\n//               />\n//               {errors.name && <p className=\"text-red-500 text-sm mt-1\">{errors.name}</p>}\n//             </div>\n\n//             <div>\n//               <label className=\"block text-sm font-semibold mb-2 text-gray-700\">Product Icon</label>\n//               <input\n//                 type=\"text\"\n//                 placeholder=\"📦\"\n//                 value={icon}\n//                 onChange={(e) => setIcon(e.target.value)}\n//                 className=\"w-full border-2 border-gray-300 px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n//                 disabled={loading}\n//               />\n//             </div>\n//           </div>\n\n//           <div>\n//             <div className=\"flex justify-between items-center mb-4\">\n//               <h3 className=\"text-lg font-semibold text-gray-800\">Product Variants *</h3>\n//               <button\n//                 type=\"button\"\n//                 onClick={handleAddVariant}\n//                 className=\"text-blue-600 hover:text-blue-800 font-medium flex items-center gap-1\"\n//                 disabled={loading}\n//               >\n//                 <PlusCircle size={16} /> Add Variant\n//               </button>\n//             </div>\n\n//             <div className=\"space-y-4\">\n//               {variants.map((variant, index) => (\n//                 <div key={variant.id} className=\"border-2 border-gray-200 rounded-lg p-4 bg-gray-50\">\n//                   <div className=\"flex justify-between items-center mb-3\">\n//                     <span className=\"font-semibold text-gray-700\">Variant {index + 1}</span>\n//                     {variants.length > 1 && (\n//                       <button\n//                         type=\"button\"\n//                         onClick={() => handleRemoveVariant(index)}\n//                         className=\"text-red-500 hover:text-red-700 font-medium\"\n//                         disabled={loading}\n//                       >\n//                         Remove\n//                       </button>\n//                     )}\n//                   </div>\n\n//                   <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3 mb-3\">\n//                     <div>\n//                       <label className=\"block text-sm font-medium text-gray-700 mb-1\">Variant Name *</label>\n//                       <input\n//                         type=\"text\"\n//                         placeholder=\"e.g., 500ml, Large, Red\"\n//                         value={variant.name}\n//                         onChange={(e) => handleVariantChange(index, \"name\", e.target.value)}\n//                         className={`w-full border px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${\n//                           errors[`variant_${index}_name`] ? 'border-red-500' : 'border-gray-300'\n//                         }`}\n//                         disabled={loading}\n//                       />\n//                       {errors[`variant_${index}_name`] && (\n//                         <p className=\"text-red-500 text-xs mt-1\">{errors[`variant_${index}_name`]}</p>\n//                       )}\n//                     </div>\n\n//                     <div>\n//                       <label className=\"block text-sm font-medium text-gray-700 mb-1\">SKU</label>\n//                       <input\n//                         type=\"text\"\n//                         placeholder=\"Auto-generated if empty\"\n//                         value={variant.sku}\n//                         onChange={(e) => handleVariantChange(index, \"sku\", e.target.value)}\n//                         className=\"w-full border border-gray-300 px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n//                         disabled={loading}\n//                       />\n//                     </div>\n//                   </div>\n\n//                   <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\n//                     <div>\n//                       <label className=\"block text-sm font-medium text-gray-700 mb-1\">Stock *</label>\n//                       <input\n//                         type=\"number\"\n//                         placeholder=\"0\"\n//                         value={variant.stock}\n//                         onChange={(e) => handleVariantChange(index, \"stock\", e.target.value)}\n//                         className={`w-full border px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${\n//                           errors[`variant_${index}_stock`] ? 'border-red-500' : 'border-gray-300'\n//                         }`}\n//                         min=\"0\"\n//                         disabled={loading}\n//                       />\n//                       {errors[`variant_${index}_stock`] && (\n//                         <p className=\"text-red-500 text-xs mt-1\">{errors[`variant_${index}_stock`]}</p>\n//                       )}\n//                     </div>\n\n//                     <div>\n//                       <label className=\"block text-sm font-medium text-gray-700 mb-1\">Selling Price *</label>\n//                       <input\n//                         type=\"number\"\n//                         placeholder=\"0.00\"\n//                         value={variant.sellingPrice}\n//                         onChange={(e) => handleVariantChange(index, \"sellingPrice\", e.target.value)}\n//                         className={`w-full border px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${\n//                           errors[`variant_${index}_sellingPrice`] ? 'border-red-500' : 'border-gray-300'\n//                         }`}\n//                         min=\"0\"\n//                         step=\"0.01\"\n//                         disabled={loading}\n//                       />\n//                       {errors[`variant_${index}_sellingPrice`] && (\n//                         <p className=\"text-red-500 text-xs mt-1\">{errors[`variant_${index}_sellingPrice`]}</p>\n//                       )}\n//                     </div>\n\n//                     <div>\n//                       <label className=\"block text-sm font-medium text-gray-700 mb-1\">Cost Price *</label>\n//                       <input\n//                         type=\"number\"\n//                         placeholder=\"0.00\"\n//                         value={variant.costPrice}\n//                         onChange={(e) => handleVariantChange(index, \"costPrice\", e.target.value)}\n//                         className={`w-full border px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${\n//                           errors[`variant_${index}_costPrice`] ? 'border-red-500' : 'border-gray-300'\n//                         }`}\n//                         min=\"0\"\n//                         step=\"0.01\"\n//                         disabled={loading}\n//                       />\n//                       {errors[`variant_${index}_costPrice`] && (\n//                         <p className=\"text-red-500 text-xs mt-1\">{errors[`variant_${index}_costPrice`]}</p>\n//                       )}\n//                     </div>\n\n//                     <div>\n//                       <label className=\"block text-sm font-medium text-gray-700 mb-1\">Expiry Date</label>\n//                       <input\n//                         type=\"date\"\n//                         value={variant.expiry && variant.expiry !== 'N/A' ? variant.expiry : ''}\n//                         onChange={(e) => handleVariantChange(index, \"expiry\", e.target.value || 'N/A')}\n//                         className=\"w-full border border-gray-300 px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n//                         disabled={loading}\n//                       />\n//                     </div>\n//                   </div>\n//                 </div>\n//               ))}\n//             </div>\n//           </div>\n\n//           <div className=\"flex justify-end gap-4 pt-4 border-t\">\n//             <button\n//               type=\"button\"\n//               onClick={onClose}\n//               className=\"px-6 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors\"\n//               disabled={loading}\n//             >\n//               Cancel\n//             </button>\n//             <button\n//               type=\"submit\"\n//               className=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2\"\n//               disabled={loading}\n//             >\n//               {loading && <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>}\n//               {loading ? 'Saving...' : 'Save Product'}\n//             </button>\n//           </div>\n//         </form>\n//       </div>\n//     </div>\n//   );\n// }\n\n// function ProductViewModal({ product, onClose }) {\n//   const getTotalStock = (variants) => {\n//     return (variants || []).reduce((sum, variant) => sum + (Number(variant.stock) || 0), 0);\n//   };\n\n//   const getTotalValue = (variants) => {\n//     return (variants || []).reduce((sum, variant) => sum + ((Number(variant.stock) || 0) * (Number(variant.sellingPrice) || 0)), 0);\n//   };\n\n//   const getVariantProfit = (variant) => {\n//     const selling = Number(variant.sellingPrice) || 0;\n//     const cost = Number(variant.costPrice) || 0;\n//     const profit = selling - cost;\n//     const margin = cost > 0 ? (profit / cost) * 100 : 0;\n//     return { profit, margin };\n//   };\n\n//   return (\n//     <div className=\"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4\">\n//       <div className=\"bg-white p-6 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto\">\n//         <div className=\"flex justify-between items-center mb-6\">\n//           <h2 className=\"text-2xl font-bold text-blue-800\">Product Details</h2>\n//           <button\n//             onClick={onClose}\n//             className=\"text-gray-500 hover:text-gray-700 p-1 rounded-full hover:bg-gray-100 transition-colors\"\n//           >\n//             <X size={24} />\n//           </button>\n//         </div>\n\n//         <div className=\"space-y-6\">\n//           {/* Product Header */}\n//           <div className=\"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-xl border border-blue-200\">\n//             <div className=\"flex items-center gap-4 mb-4\">\n//               <span className=\"text-4xl\">{product.icon}</span>\n//               <div>\n//                 <h3 className=\"text-2xl font-bold text-gray-900\">{product.name}</h3>\n//                 <p className=\"text-blue-600 font-medium\">Category: {product.category}</p>\n//                 <p className=\"text-sm text-gray-500\">Product ID: {product.id}</p>\n//               </div>\n//             </div>\n\n//             {/* Summary Statistics */}\n//             <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n//               <div className=\"bg-white p-4 rounded-lg shadow-sm border\">\n//                 <div className=\"text-center\">\n//                   <div className=\"text-2xl font-bold text-blue-600\">{getTotalStock(product.variants)}</div>\n//                   <div className=\"text-sm text-gray-600\">Total Stock</div>\n//                 </div>\n//               </div>\n//               <div className=\"bg-white p-4 rounded-lg shadow-sm border\">\n//                 <div className=\"text-center\">\n//                   <div className=\"text-2xl font-bold text-green-600\">₹{getTotalValue(product.variants).toFixed(2)}</div>\n//                   <div className=\"text-sm text-gray-600\">Total Value</div>\n//                 </div>\n//               </div>\n//               <div className=\"bg-white p-4 rounded-lg shadow-sm border\">\n//                 <div className=\"text-center\">\n//                   <div className=\"text-2xl font-bold text-purple-600\">{product.variants?.length || 0}</div>\n//                   <div className=\"text-sm text-gray-600\">Variants</div>\n//                 </div>\n//               </div>\n//             </div>\n//           </div>\n\n//           {/* Variants Details */}\n//           <div>\n//             <h4 className=\"text-xl font-bold mb-4 text-gray-800\">Variant Details</h4>\n//             <div className=\"grid gap-4\">\n//               {(product.variants || []).map((variant, index) => {\n//                 const { profit, margin } = getVariantProfit(variant);\n//                 const stock = Number(variant.stock) || 0;\n//                 const isLowStock = stock <= 10;\n\n//                 return (\n//                   <div key={variant.id || index} className=\"border border-gray-200 rounded-lg p-4 bg-white shadow-sm\">\n//                     <div className=\"flex justify-between items-start mb-3\">\n//                       <h5 className=\"text-lg font-semibold text-gray-900\">{variant.name}</h5>\n//                       <span className={`px-3 py-1 rounded-full text-sm font-medium ${\n//                         isLowStock ? 'bg-red-100 text-red-800' : 'bg-green-100 text-green-800'\n//                       }`}>\n//                         {isLowStock ? 'Low Stock' : 'In Stock'}\n//                       </span>\n//                     </div>\n\n//                     <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 text-sm\">\n//                       <div className=\"bg-gray-50 p-3 rounded-lg\">\n//                         <span className=\"text-gray-600 font-medium block\">SKU</span>\n//                         <span className=\"font-mono\">{variant.sku || 'Not set'}</span>\n//                       </div>\n\n//                       <div className=\"bg-gray-50 p-3 rounded-lg\">\n//                         <span className=\"text-gray-600 font-medium block\">Stock</span>\n//                         <span className={`font-bold ${isLowStock ? 'text-red-600' : 'text-gray-900'}`}>\n//                           {stock} units\n//                         </span>\n//                       </div>\n\n//                       <div className=\"bg-gray-50 p-3 rounded-lg\">\n//                         <span className=\"text-gray-600 font-medium block\">Selling Price</span>\n//                         <span className=\"font-bold text-green-600\">₹{Number(variant.sellingPrice) || 0}</span>\n//                       </div>\n\n//                       <div className=\"bg-gray-50 p-3 rounded-lg\">\n//                         <span className=\"text-gray-600 font-medium block\">Cost Price</span>\n//                         <span className=\"font-bold text-blue-600\">₹{Number(variant.costPrice) || 0}</span>\n//                       </div>\n\n//                       <div className=\"bg-gray-50 p-3 rounded-lg\">\n//                         <span className=\"text-gray-600 font-medium block\">Profit Margin</span>\n//                         <span className={`font-bold ${profit > 0 ? 'text-green-600' : 'text-red-600'}`}>\n//                           ₹{profit.toFixed(2)} ({margin.toFixed(1)}%)\n//                         </span>\n//                       </div>\n\n//                       <div className=\"bg-gray-50 p-3 rounded-lg\">\n//                         <span className=\"text-gray-600 font-medium block\">Expiry</span>\n//                         <span className=\"text-gray-900\">\n//                           {variant.expiry === 'N/A' || !variant.expiry ? 'No expiry' : variant.expiry}\n//                         </span>\n//                       </div>\n//                     </div>\n//                   </div>\n//                 );\n//               })}\n//             </div>\n//           </div>\n//         </div>\n\n//         <div className=\"flex justify-end mt-8 pt-4 border-t\">\n//           <button\n//             onClick={onClose}\n//             className=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n//           >\n//             Close\n//           </button>\n//         </div>\n//       </div>\n//     </div>\n//   );\n// }\n\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport { Pencil, Trash2, PlusCircle, Eye, AlertTriangle, Package, X } from \"lucide-react\";\n\n// Sample data for testing\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst sampleProducts = {\n  \"Groceries\": [{\n    _id: \"1\",\n    id: 1001,\n    name: \"Basmati Rice\",\n    icon: \"🍚\",\n    category: \"Groceries\",\n    variants: [{\n      id: 1,\n      name: \"5kg Bag\",\n      sku: \"1001-VAR-1\",\n      stock: 25,\n      sellingPrice: 450,\n      costPrice: 380,\n      expiry: \"2024-12-31\"\n    }, {\n      id: 2,\n      name: \"10kg Bag\",\n      sku: \"1001-VAR-2\",\n      stock: 8,\n      sellingPrice: 850,\n      costPrice: 720,\n      expiry: \"2024-12-31\"\n    }]\n  }, {\n    _id: \"2\",\n    id: 1002,\n    name: \"Cooking Oil\",\n    icon: \"🛢️\",\n    category: \"Groceries\",\n    variants: [{\n      id: 1,\n      name: \"1L Bottle\",\n      sku: \"1002-VAR-1\",\n      stock: 15,\n      sellingPrice: 120,\n      costPrice: 95,\n      expiry: \"2025-06-30\"\n    }, {\n      id: 2,\n      name: \"5L Can\",\n      sku: \"1002-VAR-2\",\n      stock: 5,\n      sellingPrice: 580,\n      costPrice: 480,\n      expiry: \"2025-06-30\"\n    }]\n  }],\n  \"Beverages\": [{\n    _id: \"3\",\n    id: 1003,\n    name: \"Soft Drink\",\n    icon: \"🥤\",\n    category: \"Beverages\",\n    variants: [{\n      id: 1,\n      name: \"330ml Can\",\n      sku: \"1003-VAR-1\",\n      stock: 50,\n      sellingPrice: 25,\n      costPrice: 18,\n      expiry: \"2024-10-15\"\n    }, {\n      id: 2,\n      name: \"1L Bottle\",\n      sku: \"1003-VAR-2\",\n      stock: 30,\n      sellingPrice: 60,\n      costPrice: 45,\n      expiry: \"2024-10-15\"\n    }]\n  }, {\n    _id: \"4\",\n    id: 1004,\n    name: \"Fruit Juice\",\n    icon: \"🧃\",\n    category: \"Beverages\",\n    variants: [{\n      id: 1,\n      name: \"200ml Tetra Pack\",\n      sku: \"1004-VAR-1\",\n      stock: 3,\n      sellingPrice: 35,\n      costPrice: 28,\n      expiry: \"2024-08-20\"\n    }]\n  }],\n  \"Personal Care\": [{\n    _id: \"5\",\n    id: 1005,\n    name: \"Shampoo\",\n    icon: \"🧴\",\n    category: \"Personal Care\",\n    variants: [{\n      id: 1,\n      name: \"200ml Bottle\",\n      sku: \"1005-VAR-1\",\n      stock: 20,\n      sellingPrice: 180,\n      costPrice: 140,\n      expiry: \"N/A\"\n    }, {\n      id: 2,\n      name: \"400ml Bottle\",\n      sku: \"1005-VAR-2\",\n      stock: 12,\n      sellingPrice: 320,\n      costPrice: 250,\n      expiry: \"N/A\"\n    }]\n  }]\n};\n\n// Mock user for authentication\nconst mockUser = {\n  _id: \"distributor123\",\n  name: \"Sample Distributor\"\n};\nexport default function DistributorProducts() {\n  _s();\n  var _products$active, _products$active2;\n  const user = mockUser; // Using mock user instead of useAuth\n  const distributorId = user === null || user === void 0 ? void 0 : user._id;\n  const [active, setActive] = useState(\"Groceries\");\n  const [products, setProducts] = useState(sampleProducts);\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [showEditModal, setShowEditModal] = useState(false);\n  const [showViewModal, setShowViewModal] = useState(false);\n  const [editProduct, setEditProduct] = useState(null);\n  const [viewProduct, setViewProduct] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n  const distributorships = [\"Groceries\", \"Beverages\", \"Personal Care\"];\n\n  // Mock fetch function - just sets loading state briefly\n  const fetchProducts = useCallback(async () => {\n    if (!distributorId) return;\n    setLoading(true);\n    setError(\"\");\n    try {\n      // Simulate API delay\n      await new Promise(resolve => setTimeout(resolve, 500));\n      // Products are already set from sampleProducts\n    } catch (error) {\n      console.error(\"Error fetching products:\", error);\n      setError(\"Failed to fetch products. Please try again.\");\n    } finally {\n      setLoading(false);\n    }\n  }, [distributorId]);\n  useEffect(() => {\n    fetchProducts();\n  }, [fetchProducts]);\n  const handleAddProduct = async product => {\n    var _product$name;\n    if (!((_product$name = product.name) !== null && _product$name !== void 0 && _product$name.trim())) {\n      setError(\"Product name is required\");\n      return;\n    }\n    try {\n      setLoading(true);\n      setError(\"\");\n\n      // Generate unique product ID\n      const productId = Date.now();\n\n      // Generate SKUs for variants that don't have them\n      const variantsWithSKU = product.variants.map((variant, index) => ({\n        ...variant,\n        id: variant.id || Date.now() + index,\n        sku: variant.sku || `${productId}-VAR-${index + 1}`,\n        expiry: variant.expiry || 'N/A',\n        stock: Number(variant.stock) || 0,\n        sellingPrice: Number(variant.sellingPrice) || 0,\n        costPrice: Number(variant.costPrice) || 0\n      }));\n\n      // Simulate API delay\n      await new Promise(resolve => setTimeout(resolve, 500));\n      const newProduct = {\n        ...product,\n        _id: productId.toString(),\n        id: productId,\n        user: user,\n        distributorships: [active],\n        category: active,\n        variants: variantsWithSKU\n      };\n      setProducts(prev => ({\n        ...prev,\n        [active]: [...(prev[active] || []), newProduct]\n      }));\n      setShowAddModal(false);\n    } catch (error) {\n      console.error(\"Error adding product:\", error);\n      setError(\"Failed to add product. Please check all required fields.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleEditProduct = async updated => {\n    var _updated$name;\n    if (!((_updated$name = updated.name) !== null && _updated$name !== void 0 && _updated$name.trim())) {\n      setError(\"Product name is required\");\n      return;\n    }\n    try {\n      setLoading(true);\n      setError(\"\");\n\n      // Ensure all variants have required fields\n      const updatedVariants = updated.variants.map(variant => ({\n        ...variant,\n        sku: variant.sku || `${updated.id}-VAR-${variant.id}`,\n        expiry: variant.expiry || 'N/A',\n        stock: Number(variant.stock) || 0,\n        sellingPrice: Number(variant.sellingPrice) || 0,\n        costPrice: Number(variant.costPrice) || 0\n      }));\n\n      // Simulate API delay\n      await new Promise(resolve => setTimeout(resolve, 500));\n      const updatedProduct = {\n        ...updated,\n        distributorId,\n        distributorships: [active],\n        variants: updatedVariants\n      };\n      setProducts(prev => {\n        var _prev$active;\n        return {\n          ...prev,\n          [active]: ((_prev$active = prev[active]) === null || _prev$active === void 0 ? void 0 : _prev$active.map(p => p._id === updated._id ? updatedProduct : p)) || []\n        };\n      });\n      setShowEditModal(false);\n      setEditProduct(null);\n    } catch (error) {\n      console.error(\"Error updating product:\", error);\n      setError(\"Failed to update product. Please check all required fields.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleDelete = async id => {\n    if (!window.confirm(\"Are you sure you want to delete this product?\")) return;\n    try {\n      setLoading(true);\n      setError(\"\");\n\n      // Simulate API delay\n      await new Promise(resolve => setTimeout(resolve, 300));\n      setProducts(prev => {\n        var _prev$active2;\n        return {\n          ...prev,\n          [active]: ((_prev$active2 = prev[active]) === null || _prev$active2 === void 0 ? void 0 : _prev$active2.filter(p => p._id !== id)) || []\n        };\n      });\n    } catch (error) {\n      console.error(\"Error deleting product:\", error);\n      setError(\"Failed to delete product. Please try again.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  const getTotalStock = variants => {\n    return (variants || []).reduce((sum, variant) => sum + (Number(variant.stock) || 0), 0);\n  };\n  const getPriceRange = variants => {\n    if (!(variants !== null && variants !== void 0 && variants.length)) return \"₹0\";\n    const prices = variants.map(v => Number(v.sellingPrice) || 0).filter(p => p > 0);\n    if (!prices.length) return \"₹0\";\n    const min = Math.min(...prices);\n    const max = Math.max(...prices);\n    return min === max ? `₹${min}` : `₹${min} - ₹${max}`;\n  };\n  const getLowStockVariants = variants => {\n    return (variants || []).filter(v => (Number(v.stock) || 0) <= 10);\n  };\n  const closeModals = () => {\n    setShowAddModal(false);\n    setShowEditModal(false);\n    setShowViewModal(false);\n    setEditProduct(null);\n    setViewProduct(null);\n  };\n  if (!distributorId) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-4 text-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-red-600\",\n        children: \"Please log in to manage products.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1191,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1190,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-4 max-w-7xl mx-auto\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-between items-center mb-6 md:mt-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-4xl md:text-5xl font-bold md:leading-tight mb-6 tracking-tight text-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"bg-black bg-clip-text text-transparent font-eudoxus\",\n          children: \"Everything at Once,\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1200,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"bg-gradient-to-r from-purple-500 via-violet-500 to-teal-400 bg-clip-text text-transparent font-eudoxus pl-2\",\n          children: \"Inventory\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1203,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1199,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-sm text-gray-600 bg-blue-50 px-3 py-1 rounded-full\",\n        children: [\"Total Products: \", ((_products$active = products[active]) === null || _products$active === void 0 ? void 0 : _products$active.length) || 0]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1207,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1198,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg flex justify-between items-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1214,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setError(\"\"),\n        className: \"text-red-700 hover:text-red-900\",\n        children: /*#__PURE__*/_jsxDEV(X, {\n          size: 16\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1219,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1215,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1213,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-wrap gap-3 mb-6\",\n      children: distributorships.map(name => {\n        var _products$name;\n        return /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setActive(name),\n          className: `px-5 py-3 rounded-full border-2 transition-all duration-200 font-medium ${active === name ? \"bg-black text-white border-2 border-gray-200 shadow-lg\" : \"bg-white text-black border-2 border-gray-200 hover:bg-blue-50\"}`,\n          children: [name, \" (\", ((_products$name = products[name]) === null || _products$name === void 0 ? void 0 : _products$name.length) || 0, \")\"]\n        }, name, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1226,\n          columnNumber: 11\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1224,\n      columnNumber: 7\n    }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center py-12\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1242,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"mt-2 text-gray-600\",\n        children: \"Loading products...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1243,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1241,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-xl shadow-lg overflow-hidden\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"overflow-x-auto\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"min-w-full\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            className: \"bg-white text-blue-700 \",\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-4 py-4 text-left font-semibold\",\n                children: \"Product\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1251,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-6 py-4 text-left font-semibold\",\n                children: \"Total Stock\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1252,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-6 py-4 text-left font-semibold\",\n                children: \"Price Range\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1253,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-6 py-4 text-left font-semibold\",\n                children: \"Variants\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1254,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-6 py-4 text-left font-semibold\",\n                children: \"Status\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1255,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-6 py-4 text-right font-semibold\",\n                children: \"Actions\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1256,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1250,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1249,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            className: \"divide-y divide-gray-200\",\n            children: (_products$active2 = products[active]) !== null && _products$active2 !== void 0 && _products$active2.length ? products[active].map((product, index) => {\n              var _product$variants, _product$variants2;\n              const lowStockVariants = getLowStockVariants(product.variants);\n              return /*#__PURE__*/_jsxDEV(\"tr\", {\n                className: `hover:bg-blue-50 transition-colors ${index % 2 === 0 ? 'bg-gray-50' : 'bg-white'}`,\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-6 py-4\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center gap-3\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-2xl\",\n                      children: product.icon\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1272,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"font-semibold text-gray-900\",\n                        children: product.name\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1274,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"text-sm text-gray-500\",\n                        children: [\"ID: \", product.id]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1275,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1273,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1271,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1270,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-6 py-4\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center gap-2\",\n                    children: [/*#__PURE__*/_jsxDEV(Package, {\n                      size: 18,\n                      className: \"text-gray-500\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1281,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"font-medium\",\n                      children: getTotalStock(product.variants)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1282,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1280,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1279,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-6 py-4 font-semibold text-green-600\",\n                  children: getPriceRange(product.variants)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1285,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-6 py-4\",\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-sm\",\n                    children: [((_product$variants = product.variants) === null || _product$variants === void 0 ? void 0 : _product$variants.length) || 0, \" variant\", (((_product$variants2 = product.variants) === null || _product$variants2 === void 0 ? void 0 : _product$variants2.length) || 0) !== 1 ? 's' : '']\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1289,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1288,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-6 py-4\",\n                  children: lowStockVariants.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center gap-2 text-orange-600\",\n                    children: [/*#__PURE__*/_jsxDEV(AlertTriangle, {\n                      size: 16\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1296,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-sm font-medium\",\n                      children: \"Low Stock\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1297,\n                      columnNumber: 31\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1295,\n                    columnNumber: 29\n                  }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-green-600 text-sm font-medium\",\n                    children: \"In Stock\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1300,\n                    columnNumber: 29\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1293,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-6 py-4\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex justify-end gap-2\",\n                    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => {\n                        setViewProduct(product);\n                        setShowViewModal(true);\n                      },\n                      className: \"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors\",\n                      title: \"View Details\",\n                      children: /*#__PURE__*/_jsxDEV(Eye, {\n                        size: 18\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1313,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1305,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => {\n                        setEditProduct(product);\n                        setShowEditModal(true);\n                      },\n                      className: \"p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-100 rounded-lg transition-colors\",\n                      title: \"Edit Product\",\n                      children: /*#__PURE__*/_jsxDEV(Pencil, {\n                        size: 18\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1323,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1315,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => handleDelete(product._id),\n                      className: \"p-2 text-red-500 hover:text-red-700 hover:bg-red-100 rounded-lg transition-colors\",\n                      title: \"Delete Product\",\n                      disabled: loading,\n                      children: /*#__PURE__*/_jsxDEV(Trash2, {\n                        size: 18\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1331,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1325,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1304,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1303,\n                  columnNumber: 25\n                }, this)]\n              }, product._id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1264,\n                columnNumber: 23\n              }, this);\n            }) : /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: /*#__PURE__*/_jsxDEV(\"td\", {\n                colSpan: \"6\",\n                className: \"px-6 py-12 text-center text-gray-500\",\n                children: [/*#__PURE__*/_jsxDEV(Package, {\n                  size: 48,\n                  className: \"mx-auto mb-4 text-gray-300\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1341,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-lg font-medium\",\n                  children: [\"No products found in \", active]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1342,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm\",\n                  children: \"Add your first product to get started.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1343,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1340,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1339,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1259,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1248,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1247,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1246,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setShowAddModal(true),\n      disabled: loading,\n      className: \"mt-6 flex items-center gap-3 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white px-6 py-3 rounded-full shadow-lg hover:shadow-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed font-medium\",\n      children: [/*#__PURE__*/_jsxDEV(PlusCircle, {\n        size: 20\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1358,\n        columnNumber: 9\n      }, this), \" Add New Product\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1353,\n      columnNumber: 7\n    }, this), showAddModal && /*#__PURE__*/_jsxDEV(ProductModal, {\n      title: \"Add New Product\",\n      category: active,\n      onClose: closeModals,\n      onSubmit: handleAddProduct,\n      loading: loading\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1362,\n      columnNumber: 9\n    }, this), showEditModal && editProduct && /*#__PURE__*/_jsxDEV(ProductModal, {\n      title: \"Edit Product\",\n      product: editProduct,\n      category: active,\n      onClose: closeModals,\n      onSubmit: handleEditProduct,\n      loading: loading\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1372,\n      columnNumber: 9\n    }, this), showViewModal && viewProduct && /*#__PURE__*/_jsxDEV(ProductViewModal, {\n      product: viewProduct,\n      onClose: closeModals\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1383,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1197,\n    columnNumber: 5\n  }, this);\n}\n_s(DistributorProducts, \"+iJH6UXN8vbECmk5loVKAcH7Gro=\");\n_c = DistributorProducts;\nfunction ProductModal({\n  title,\n  product = {},\n  category,\n  onClose,\n  onSubmit,\n  loading = false\n}) {\n  _s2();\n  var _product$variants3;\n  const [name, setName] = useState(product.name || \"\");\n  const [icon, setIcon] = useState(product.icon || \"📦\");\n  const [variants, setVariants] = useState(((_product$variants3 = product.variants) === null || _product$variants3 === void 0 ? void 0 : _product$variants3.length) > 0 ? product.variants.map(v => ({\n    ...v,\n    stock: v.stock || 0,\n    sellingPrice: v.sellingPrice || 0,\n    costPrice: v.costPrice || 0\n  })) : [{\n    id: Date.now(),\n    name: \"\",\n    stock: 0,\n    sellingPrice: 0,\n    costPrice: 0,\n    sku: \"\",\n    expiry: \"\"\n  }]);\n  const [errors, setErrors] = useState({});\n  const validateForm = () => {\n    const newErrors = {};\n    if (!name.trim()) {\n      newErrors.name = \"Product name is required\";\n    }\n    variants.forEach((variant, index) => {\n      if (!variant.name.trim()) {\n        newErrors[`variant_${index}_name`] = \"Variant name is required\";\n      }\n      if (Number(variant.sellingPrice) <= 0) {\n        newErrors[`variant_${index}_sellingPrice`] = \"Selling price must be greater than 0\";\n      }\n      if (Number(variant.costPrice) < 0) {\n        newErrors[`variant_${index}_costPrice`] = \"Cost price cannot be negative\";\n      }\n      if (Number(variant.stock) < 0) {\n        newErrors[`variant_${index}_stock`] = \"Stock cannot be negative\";\n      }\n    });\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n  const handleAddVariant = () => {\n    setVariants(prev => [...prev, {\n      id: Date.now(),\n      name: \"\",\n      stock: 0,\n      sellingPrice: 0,\n      costPrice: 0,\n      sku: \"\",\n      expiry: \"\"\n    }]);\n  };\n  const handleRemoveVariant = index => {\n    if (variants.length > 1) {\n      setVariants(prev => prev.filter((_, i) => i !== index));\n    }\n  };\n  const handleVariantChange = (index, field, value) => {\n    setVariants(prev => prev.map((variant, i) => i === index ? {\n      ...variant,\n      [field]: value\n    } : variant));\n\n    // Clear specific error when user starts typing\n    if (errors[`variant_${index}_${field}`]) {\n      setErrors(prev => ({\n        ...prev,\n        [`variant_${index}_${field}`]: undefined\n      }));\n    }\n  };\n  const handleSubmit = e => {\n    e.preventDefault();\n    if (!validateForm()) return;\n    const data = {\n      ...product,\n      name: name.trim(),\n      icon,\n      category,\n      variants: variants.map(variant => ({\n        ...variant,\n        name: variant.name.trim(),\n        stock: Number(variant.stock) || 0,\n        sellingPrice: Number(variant.sellingPrice) || 0,\n        costPrice: Number(variant.costPrice) || 0,\n        sku: variant.sku.trim()\n      }))\n    };\n    onSubmit(data);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white p-6 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between items-center mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-bold text-blue-800\",\n          children: title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1490,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onClose,\n          className: \"text-gray-500 hover:text-gray-700 p-1\",\n          children: /*#__PURE__*/_jsxDEV(X, {\n            size: 24\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1495,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1491,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1489,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        className: \"space-y-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-semibold mb-2 text-gray-700\",\n              children: \"Product Name *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1502,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"Enter product name\",\n              value: name,\n              onChange: e => {\n                setName(e.target.value);\n                if (errors.name) setErrors(prev => ({\n                  ...prev,\n                  name: undefined\n                }));\n              },\n              className: `w-full border-2 px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${errors.name ? 'border-red-500' : 'border-gray-300'}`,\n              disabled: loading\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1503,\n              columnNumber: 15\n            }, this), errors.name && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-red-500 text-sm mt-1\",\n              children: errors.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1516,\n              columnNumber: 31\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1501,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-semibold mb-2 text-gray-700\",\n              children: \"Product Icon\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1520,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"\\uD83D\\uDCE6\",\n              value: icon,\n              onChange: e => setIcon(e.target.value),\n              className: \"w-full border-2 border-gray-300 px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",\n              disabled: loading\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1521,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1519,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1500,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between items-center mb-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-lg font-semibold text-gray-800\",\n              children: \"Product Variants *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1534,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: handleAddVariant,\n              className: \"text-blue-600 hover:text-blue-800 font-medium flex items-center gap-1\",\n              disabled: loading,\n              children: [/*#__PURE__*/_jsxDEV(PlusCircle, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1541,\n                columnNumber: 17\n              }, this), \" Add Variant\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1535,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1533,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-4\",\n            children: variants.map((variant, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"border-2 border-gray-200 rounded-lg p-4 bg-gray-50\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between items-center mb-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-semibold text-gray-700\",\n                  children: [\"Variant \", index + 1]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1549,\n                  columnNumber: 21\n                }, this), variants.length > 1 && /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  onClick: () => handleRemoveVariant(index),\n                  className: \"text-red-500 hover:text-red-700 font-medium\",\n                  disabled: loading,\n                  children: \"Remove\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1551,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1548,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"grid grid-cols-1 md:grid-cols-2 gap-3 mb-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"block text-sm font-medium text-gray-700 mb-1\",\n                    children: \"Variant Name *\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1564,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    placeholder: \"e.g., 500ml, Large, Red\",\n                    value: variant.name,\n                    onChange: e => handleVariantChange(index, \"name\", e.target.value),\n                    className: `w-full border px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${errors[`variant_${index}_name`] ? 'border-red-500' : 'border-gray-300'}`,\n                    disabled: loading\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1565,\n                    columnNumber: 23\n                  }, this), errors[`variant_${index}_name`] && /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-red-500 text-xs mt-1\",\n                    children: errors[`variant_${index}_name`]\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1576,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1563,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"block text-sm font-medium text-gray-700 mb-1\",\n                    children: \"SKU\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1581,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    placeholder: \"Auto-generated if empty\",\n                    value: variant.sku,\n                    onChange: e => handleVariantChange(index, \"sku\", e.target.value),\n                    className: \"w-full border border-gray-300 px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                    disabled: loading\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1582,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1580,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1562,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"grid grid-cols-2 md:grid-cols-4 gap-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"block text-sm font-medium text-gray-700 mb-1\",\n                    children: \"Stock *\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1595,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"number\",\n                    placeholder: \"0\",\n                    value: variant.stock,\n                    onChange: e => handleVariantChange(index, \"stock\", e.target.value),\n                    className: `w-full border px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${errors[`variant_${index}_stock`] ? 'border-red-500' : 'border-gray-300'}`,\n                    min: \"0\",\n                    disabled: loading\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1596,\n                    columnNumber: 23\n                  }, this), errors[`variant_${index}_stock`] && /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-red-500 text-xs mt-1\",\n                    children: errors[`variant_${index}_stock`]\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1608,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1594,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"block text-sm font-medium text-gray-700 mb-1\",\n                    children: \"Selling Price *\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1613,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"number\",\n                    placeholder: \"0.00\",\n                    value: variant.sellingPrice,\n                    onChange: e => handleVariantChange(index, \"sellingPrice\", e.target.value),\n                    className: `w-full border px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${errors[`variant_${index}_sellingPrice`] ? 'border-red-500' : 'border-gray-300'}`,\n                    min: \"0\",\n                    step: \"0.01\",\n                    disabled: loading\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1614,\n                    columnNumber: 23\n                  }, this), errors[`variant_${index}_sellingPrice`] && /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-red-500 text-xs mt-1\",\n                    children: errors[`variant_${index}_sellingPrice`]\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1627,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1612,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"block text-sm font-medium text-gray-700 mb-1\",\n                    children: \"Cost Price *\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1632,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"number\",\n                    placeholder: \"0.00\",\n                    value: variant.costPrice,\n                    onChange: e => handleVariantChange(index, \"costPrice\", e.target.value),\n                    className: `w-full border px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${errors[`variant_${index}_costPrice`] ? 'border-red-500' : 'border-gray-300'}`,\n                    min: \"0\",\n                    step: \"0.01\",\n                    disabled: loading\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1633,\n                    columnNumber: 23\n                  }, this), errors[`variant_${index}_costPrice`] && /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-red-500 text-xs mt-1\",\n                    children: errors[`variant_${index}_costPrice`]\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1646,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1631,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"block text-sm font-medium text-gray-700 mb-1\",\n                    children: \"Expiry Date\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1650,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"date\",\n                    value: variant.expiry === 'N/A' ? '' : variant.expiry,\n                    onChange: e => handleVariantChange(index, \"expiry\", e.target.value || 'N/A'),\n                    className: \"w-full border border-gray-300 px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                    disabled: loading\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1651,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1649,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1593,\n                columnNumber: 19\n              }, this)]\n            }, variant.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1547,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1545,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1532,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-end space-x-4 pt-6 border-t\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: onClose,\n            className: \"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors\",\n            disabled: loading,\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1666,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\",\n            disabled: loading,\n            children: loading ? 'Saving...' : product._id ? 'Update Product' : 'Add Product'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1674,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1665,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1499,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1488,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 1487,\n    columnNumber: 5\n  }, this);\n}\n_s2(ProductModal, \"CU4lHKdawK/hJRbocsakKIv5fPI=\");\n_c2 = ProductModal;\nfunction ProductViewModal({\n  product,\n  onClose\n}) {\n  var _product$variants4, _product$variants5;\n  const getTotalStock = variants => {\n    return (variants || []).reduce((sum, variant) => sum + (Number(variant.stock) || 0), 0);\n  };\n  const getTotalValue = variants => {\n    return (variants || []).reduce((sum, variant) => sum + (Number(variant.stock) || 0) * (Number(variant.sellingPrice) || 0), 0);\n  };\n  const getProfitMargin = (costPrice, sellingPrice) => {\n    const cost = Number(costPrice) || 0;\n    const selling = Number(sellingPrice) || 0;\n    if (cost === 0) return 0;\n    return ((selling - cost) / cost * 100).toFixed(1);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white p-6 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between items-center mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-3xl\",\n            children: product.icon\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1711,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-2xl font-bold text-blue-800\",\n              children: product.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1713,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-gray-600\",\n              children: [\"Product ID: \", product.id]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1714,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1712,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1710,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onClose,\n          className: \"text-gray-500 hover:text-gray-700 p-1\",\n          children: /*#__PURE__*/_jsxDEV(X, {\n            size: 24\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1721,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1717,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1709,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-blue-50 p-4 rounded-lg\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"font-semibold text-blue-800 mb-2\",\n            children: \"Total Stock\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1727,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-2xl font-bold text-blue-600\",\n            children: getTotalStock(product.variants)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1728,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1726,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-green-50 p-4 rounded-lg\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"font-semibold text-green-800 mb-2\",\n            children: \"Total Value\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1731,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-2xl font-bold text-green-600\",\n            children: [\"\\u20B9\", getTotalValue(product.variants).toLocaleString()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1732,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1730,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-purple-50 p-4 rounded-lg\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"font-semibold text-purple-800 mb-2\",\n            children: \"Variants\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1735,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-2xl font-bold text-purple-600\",\n            children: ((_product$variants4 = product.variants) === null || _product$variants4 === void 0 ? void 0 : _product$variants4.length) || 0\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1736,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1734,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1725,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-semibold text-gray-800 mb-4\",\n          children: \"Variant Details\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1741,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"overflow-x-auto\",\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"w-full border border-gray-200 rounded-lg\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              className: \"bg-gray-50\",\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-4 py-3 text-left font-semibold text-gray-700\",\n                  children: \"Variant\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1746,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-4 py-3 text-left font-semibold text-gray-700\",\n                  children: \"SKU\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1747,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-4 py-3 text-left font-semibold text-gray-700\",\n                  children: \"Stock\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1748,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-4 py-3 text-left font-semibold text-gray-700\",\n                  children: \"Cost Price\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1749,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-4 py-3 text-left font-semibold text-gray-700\",\n                  children: \"Selling Price\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1750,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-4 py-3 text-left font-semibold text-gray-700\",\n                  children: \"Profit Margin\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1751,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-4 py-3 text-left font-semibold text-gray-700\",\n                  children: \"Expiry\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1752,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-4 py-3 text-left font-semibold text-gray-700\",\n                  children: \"Status\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1753,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1745,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1744,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              className: \"divide-y divide-gray-200\",\n              children: (_product$variants5 = product.variants) === null || _product$variants5 === void 0 ? void 0 : _product$variants5.map((variant, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n                className: index % 2 === 0 ? 'bg-white' : 'bg-gray-50',\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-4 py-3 font-medium\",\n                  children: variant.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1759,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-4 py-3 text-sm text-gray-600\",\n                  children: variant.sku\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1760,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-4 py-3\",\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: `font-medium ${variant.stock <= 10 ? 'text-orange-600' : 'text-green-600'}`,\n                    children: variant.stock\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1762,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1761,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-4 py-3\",\n                  children: [\"\\u20B9\", variant.costPrice]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1768,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-4 py-3 font-medium\",\n                  children: [\"\\u20B9\", variant.sellingPrice]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1769,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-4 py-3\",\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: `font-medium ${getProfitMargin(variant.costPrice, variant.sellingPrice) >= 20 ? 'text-green-600' : 'text-orange-600'}`,\n                    children: [getProfitMargin(variant.costPrice, variant.sellingPrice), \"%\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1771,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1770,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-4 py-3 text-sm\",\n                  children: variant.expiry === 'N/A' ? 'N/A' : new Date(variant.expiry).toLocaleDateString()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1779,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-4 py-3\",\n                  children: variant.stock <= 10 ? /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"inline-flex items-center gap-1 text-orange-600 text-xs font-medium\",\n                    children: [/*#__PURE__*/_jsxDEV(AlertTriangle, {\n                      size: 12\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1785,\n                      columnNumber: 27\n                    }, this), \"Low Stock\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1784,\n                    columnNumber: 25\n                  }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-green-600 text-xs font-medium\",\n                    children: \"In Stock\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1789,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1782,\n                  columnNumber: 21\n                }, this)]\n              }, variant.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1758,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1756,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1743,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1742,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1740,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-end pt-6 border-t mt-6\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onClose,\n          className: \"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors\",\n          children: \"Close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1800,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1799,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1708,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 1707,\n    columnNumber: 5\n  }, this);\n}\n_c3 = ProductViewModal;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"DistributorProducts\");\n$RefreshReg$(_c2, \"ProductModal\");\n$RefreshReg$(_c3, \"ProductViewModal\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","Pencil","Trash2","PlusCircle","Eye","AlertTriangle","Package","X","jsxDEV","_jsxDEV","sampleProducts","_id","id","name","icon","category","variants","sku","stock","sellingPrice","costPrice","expiry","mockUser","DistributorProducts","_s","_products$active","_products$active2","user","distributorId","active","setActive","products","setProducts","showAddModal","setShowAddModal","showEditModal","setShowEditModal","showViewModal","setShowViewModal","editProduct","setEditProduct","viewProduct","setViewProduct","loading","setLoading","error","setError","distributorships","fetchProducts","Promise","resolve","setTimeout","console","handleAddProduct","product","_product$name","trim","productId","Date","now","variantsWithSKU","map","variant","index","Number","newProduct","toString","prev","handleEditProduct","updated","_updated$name","updatedVariants","updatedProduct","_prev$active","p","handleDelete","window","confirm","_prev$active2","filter","getTotalStock","reduce","sum","getPriceRange","length","prices","v","min","Math","max","getLowStockVariants","closeModals","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","size","_products$name","_product$variants","_product$variants2","lowStockVariants","title","disabled","colSpan","ProductModal","onClose","onSubmit","ProductViewModal","_c","_s2","_product$variants3","setName","setIcon","setVariants","errors","setErrors","validateForm","newErrors","forEach","Object","keys","handleAddVariant","handleRemoveVariant","_","i","handleVariantChange","field","value","undefined","handleSubmit","e","preventDefault","data","type","placeholder","onChange","target","step","_c2","_product$variants4","_product$variants5","getTotalValue","getProfitMargin","cost","selling","toFixed","toLocaleString","toLocaleDateString","_c3","$RefreshReg$"],"sources":["/Users/nishant/Desktop/sledgeNew/Test/frontend/src/pages/Distributors/distributorProducts.js"],"sourcesContent":["// import React, { useState, useEffect, useCallback } from \"react\";\n// import { Pencil, Trash2, PlusCircle, Eye, AlertTriangle, Package, X } from \"lucide-react\";\n// import API from \"../../api\";\n// import { useAuth } from \"../../components/AuthContext\";\n\n// export default function DistributorProducts() {\n//   const { user } = useAuth();\n//   const distributorId = user?._id;\n//   const [active, setActive] = useState(\"Groceries\");\n//   const [products, setProducts] = useState({});\n//   const [showAddModal, setShowAddModal] = useState(false);\n//   const [showEditModal, setShowEditModal] = useState(false);\n//   const [showViewModal, setShowViewModal] = useState(false);\n//   const [editProduct, setEditProduct] = useState(null);\n//   const [viewProduct, setViewProduct] = useState(null);\n//   const [loading, setLoading] = useState(false);\n//   const [error, setError] = useState(\"\");\n//   const distributorships = [\"Groceries\", \"Beverages\", \"Personal Care\"];\n\n//   // Fetch products from the backend\n//   const fetchProducts = useCallback(async () => {\n//     if (!distributorId) return;\n    \n//     setLoading(true);\n//     setError(\"\");\n    \n//     try {\n//       const response = await API.get(\"/products\", {\n//         params: { distributorId },\n//       });\n      \n//       const groupedProducts = response.data.reduce((acc, product) => {\n//         const category = product.category || 'Uncategorized';\n//         acc[category] = acc[category] || [];\n//         acc[category].push(product);\n//         return acc;\n//       }, {});\n      \n//       setProducts(groupedProducts);\n//     } catch (error) {\n//       console.error(\"Error fetching products:\", error);\n//       setError(\"Failed to fetch products. Please try again.\");\n//     } finally {\n//       setLoading(false);\n//     }\n//   }, [distributorId]);\n\n//   useEffect(() => {\n//     fetchProducts();\n//   }, [fetchProducts]);\n\n//   const handleAddProduct = async (product) => {\n//     if (!product.name?.trim()) {\n//       setError(\"Product name is required\");\n//       return;\n//     }\n\n//     try {\n//       setLoading(true);\n//       setError(\"\");\n      \n//       // Generate unique product ID\n//       const productId = Date.now();\n      \n//       // Generate SKUs for variants that don't have them\n//       const variantsWithSKU = product.variants.map((variant, index) => ({\n//         ...variant,\n//         id: variant.id || Date.now() + index,\n//         sku: variant.sku || `${productId}-VAR-${index + 1}`,\n//         expiry: variant.expiry || 'N/A',\n//         stock: Number(variant.stock) || 0,\n//         sellingPrice: Number(variant.sellingPrice) || 0,\n//         costPrice: Number(variant.costPrice) || 0\n//       }));\n\n//       const response = await API.post(\"/products\", {\n//         ...product,\n//         id: productId,\n//         user: user,\n//         distributorships: [active],\n//         category: active,\n\n//         variants: variantsWithSKU,\n//       });\n      \n//       setProducts((prev) => ({\n//         ...prev,\n//         [active]: [...(prev[active] || []), response.data],\n//       }));\n      \n//       setShowAddModal(false);\n//     } catch (error) {\n//       console.error(\"Error adding product:\", error);\n//       setError(\"Failed to add product. Please check all required fields.\");\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   const handleEditProduct = async (updated) => {\n//     if (!updated.name?.trim()) {\n//       setError(\"Product name is required\");\n//       return;\n//     }\n\n//     try {\n//       setLoading(true);\n//       setError(\"\");\n      \n//       // Ensure all variants have required fields\n//       const updatedVariants = updated.variants.map((variant) => ({\n//         ...variant,\n//         sku: variant.sku || `${updated.id}-VAR-${variant.id}`,\n//         expiry: variant.expiry || 'N/A',\n//         stock: Number(variant.stock) || 0,\n//         sellingPrice: Number(variant.sellingPrice) || 0,\n//         costPrice: Number(variant.costPrice) || 0\n//       }));\n\n//       const response = await API.put(`/products/${updated._id}`, {\n//         ...updated,\n//         distributorId,\n//         distributorships: [active],\n//         variants: updatedVariants,\n//       });\n      \n//       setProducts((prev) => ({\n//         ...prev,\n//         [active]: prev[active]?.map((p) => (p._id === updated._id ? response.data : p)) || [],\n//       }));\n      \n//       setShowEditModal(false);\n//       setEditProduct(null);\n//     } catch (error) {\n//       console.error(\"Error updating product:\", error);\n//       setError(\"Failed to update product. Please check all required fields.\");\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   const handleDelete = async (id) => {\n//     if (!window.confirm(\"Are you sure you want to delete this product?\")) return;\n    \n//     try {\n//       setLoading(true);\n//       setError(\"\");\n      \n//       await API.delete(`/products/${id}`);\n      \n//       setProducts((prev) => ({\n//         ...prev,\n//         [active]: prev[active]?.filter((p) => p._id !== id) || [],\n//       }));\n//     } catch (error) {\n//       console.error(\"Error deleting product:\", error);\n//       setError(\"Failed to delete product. Please try again.\");\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   const getTotalStock = (variants) => {\n//     return (variants || []).reduce((sum, variant) => sum + (Number(variant.stock) || 0), 0);\n//   };   \n\n//   const getPriceRange = (variants) => {\n//     if (!variants?.length) return \"₹0\";\n    \n//     const prices = variants\n//       .map(v => Number(v.sellingPrice) || 0)\n//       .filter(p => p > 0);\n    \n//     if (!prices.length) return \"₹0\";\n    \n//     const min = Math.min(...prices);\n//     const max = Math.max(...prices);\n//     return min === max ? `₹${min}` : `₹${min} - ₹${max}`;\n//   };\n\n//   const getLowStockVariants = (variants) => {\n//     return (variants || []).filter((v) => (Number(v.stock) || 0) <= 10);\n//   };\n\n//   const closeModals = () => {\n//     setShowAddModal(false);\n//     setShowEditModal(false);\n//     setShowViewModal(false);\n//     setEditProduct(null);\n//     setViewProduct(null);\n//   };\n\n//   if (!distributorId) {\n//     return (\n//       <div className=\"p-4 text-center\">\n//         <div className=\"text-red-600\">Please log in to manage products.</div>\n//       </div>\n//     );\n//   }\n\n//   return (\n//     <div className=\"p-4 max-w-7xl mx-auto\">\n//       <div className=\"flex justify-between items-center mb-6\">\n//         <h1 className=\"text-3xl font-bold text-blue-800\">Product Management</h1>\n//         <div className=\"text-sm text-gray-600 bg-blue-50 px-3 py-1 rounded-full\">\n//           Total Products: {products[active]?.length || 0}\n//         </div>\n//       </div>\n\n//       {error && (\n//         <div className=\"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg flex justify-between items-center\">\n//           <span>{error}</span>\n//           <button \n//             onClick={() => setError(\"\")}\n//             className=\"text-red-700 hover:text-red-900\"\n//           >\n//             <X size={16} />\n//           </button>\n//         </div>\n//       )}\n\n//       <div className=\"flex flex-wrap gap-3 mb-6\">\n//         {distributorships.map((name) => (\n//           <button\n//             key={name}\n//             onClick={() => setActive(name)}\n//             className={`px-5 py-2 rounded-full border-2 transition-all duration-200 font-medium ${\n//               active === name \n//                 ? \"bg-blue-700 text-white border-blue-700 shadow-lg\" \n//                 : \"bg-white text-blue-700 border-blue-200 hover:bg-blue-50\"\n//             }`}\n//           >\n//             {name} ({products[name]?.length || 0})\n//           </button>\n//         ))}\n//       </div>\n\n//       {loading ? (\n//         <div className=\"text-center py-12\">\n//           <div className=\"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n//           <p className=\"mt-2 text-gray-600\">Loading products...</p>\n//         </div>\n//       ) : (\n//         <div className=\"bg-white rounded-xl shadow-lg overflow-hidden\">\n//           <div className=\"overflow-x-auto\">\n//             <table className=\"min-w-full\">\n//               <thead className=\"bg-gradient-to-r from-blue-600 to-blue-700 text-white\">\n//                 <tr>\n//                   <th className=\"px-6 py-4 text-left font-semibold\">Product</th>\n//                   <th className=\"px-6 py-4 text-left font-semibold\">Total Stock</th>\n//                   <th className=\"px-6 py-4 text-left font-semibold\">Price Range</th>\n//                   <th className=\"px-6 py-4 text-left font-semibold\">Variants</th>\n//                   <th className=\"px-6 py-4 text-left font-semibold\">Status</th>\n//                   <th className=\"px-6 py-4 text-right font-semibold\">Actions</th>\n//                 </tr>\n//               </thead>\n//               <tbody className=\"divide-y divide-gray-200\">\n//                 {products[active]?.length ? (\n//                   products[active].map((product, index) => {\n//                     const lowStockVariants = getLowStockVariants(product.variants);\n//                     return (\n//                       <tr\n//                         key={product._id}\n//                         className={`hover:bg-blue-50 transition-colors ${\n//                           index % 2 === 0 ? 'bg-gray-50' : 'bg-white'\n//                         }`}\n//                       >\n//                         <td className=\"px-6 py-4\">\n//                           <div className=\"flex items-center gap-3\">\n//                             <span className=\"text-2xl\">{product.icon}</span>\n//                             <div>\n//                               <div className=\"font-semibold text-gray-900\">{product.name}</div>\n//                               <div className=\"text-sm text-gray-500\">ID: {product.id}</div>\n//                             </div>\n//                           </div>\n//                         </td>\n//                         <td className=\"px-6 py-4\">\n//                           <div className=\"flex items-center gap-2\">\n//                             <Package size={18} className=\"text-gray-500\" />\n//                             <span className=\"font-medium\">{getTotalStock(product.variants)}</span>\n//                           </div>\n//                         </td>\n//                         <td className=\"px-6 py-4 font-semibold text-green-600\">\n//                           {getPriceRange(product.variants)}\n//                         </td>\n//                         <td className=\"px-6 py-4\">\n//                           <span className=\"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-sm\">\n//                             {product.variants?.length || 0} variant{(product.variants?.length || 0) !== 1 ? 's' : ''}\n//                           </span>\n//                         </td>\n//                         <td className=\"px-6 py-4\">\n//                           {lowStockVariants.length > 0 ? (\n//                             <div className=\"flex items-center gap-2 text-orange-600\">\n//                               <AlertTriangle size={16} />\n//                               <span className=\"text-sm font-medium\">Low Stock</span>\n//                             </div>\n//                           ) : (\n//                             <span className=\"text-green-600 text-sm font-medium\">In Stock</span>\n//                           )}\n//                         </td>\n//                         <td className=\"px-6 py-4\">\n//                           <div className=\"flex justify-end gap-2\">\n//                             <button\n//                               onClick={() => {\n//                                 setViewProduct(product);\n//                                 setShowViewModal(true);\n//                               }}\n//                               className=\"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors\"\n//                               title=\"View Details\"\n//                             >\n//                               <Eye size={18} />\n//                             </button>\n//                             <button\n//                               onClick={() => {\n//                                 setEditProduct(product);\n//                                 setShowEditModal(true);\n//                               }}\n//                               className=\"p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-100 rounded-lg transition-colors\"\n//                               title=\"Edit Product\"\n//                             >\n//                               <Pencil size={18} />\n//                             </button>\n//                             <button\n//                               onClick={() => handleDelete(product._id)}\n//                               className=\"p-2 text-red-500 hover:text-red-700 hover:bg-red-100 rounded-lg transition-colors\"\n//                               title=\"Delete Product\"\n//                               disabled={loading}\n//                             >\n//                               <Trash2 size={18} />\n//                             </button>\n//                           </div>\n//                         </td>\n//                       </tr>\n//                     );\n//                   })\n//                 ) : (\n//                   <tr>\n//                     <td colSpan=\"6\" className=\"px-6 py-12 text-center text-gray-500\">\n//                       <Package size={48} className=\"mx-auto mb-4 text-gray-300\" />\n//                       <p className=\"text-lg font-medium\">No products found in {active}</p>\n//                       <p className=\"text-sm\">Add your first product to get started.</p>\n//                     </td>\n//                   </tr>\n//                 )}\n//               </tbody>\n//             </table>\n//           </div>\n//         </div>\n//       )}\n\n//       <button\n//         onClick={() => setShowAddModal(true)}\n//         disabled={loading}\n//         className=\"mt-6 flex items-center gap-3 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white px-6 py-3 rounded-full shadow-lg hover:shadow-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed font-medium\"\n//       >\n//         <PlusCircle size={20} /> Add New Product\n//       </button>\n\n//       {showAddModal && (\n//         <ProductModal\n//           title=\"Add New Product\"\n//           category={active}\n//           onClose={closeModals}\n//           onSubmit={handleAddProduct}\n//           loading={loading}\n//         />\n//       )}\n\n//       {showEditModal && editProduct && (\n//         <ProductModal\n//           title=\"Edit Product\"\n//           product={editProduct}\n//           category={active}\n//           onClose={closeModals}\n//           onSubmit={handleEditProduct}\n//           loading={loading}\n//         />\n//       )}\n\n//       {showViewModal && viewProduct && (\n//         <ProductViewModal\n//           product={viewProduct}\n//           onClose={closeModals}\n//         />\n//       )}\n//     </div>\n//   );\n// }\n\n// function ProductModal({ title, product = {}, category, onClose, onSubmit, loading = false }) {\n//   const [name, setName] = useState(product.name || \"\");\n//   const [icon, setIcon] = useState(product.icon || \"📦\");\n//   const [variants, setVariants] = useState(\n//     product.variants?.length > 0 \n//       ? product.variants.map(v => ({...v, stock: v.stock || 0, sellingPrice: v.sellingPrice || 0, costPrice: v.costPrice || 0}))\n//       : [{ id: Date.now(), name: \"\", stock: 0, sellingPrice: 0, costPrice: 0, sku: \"\", expiry: \"\" }]\n//   );\n//   const [errors, setErrors] = useState({});\n\n//   const validateForm = () => {\n//     const newErrors = {};\n    \n//     if (!name.trim()) {\n//       newErrors.name = \"Product name is required\";\n//     }\n    \n//     variants.forEach((variant, index) => {\n//       if (!variant.name.trim()) {\n//         newErrors[`variant_${index}_name`] = \"Variant name is required\";\n//       }\n//       if (Number(variant.sellingPrice) <= 0) {\n//         newErrors[`variant_${index}_sellingPrice`] = \"Selling price must be greater than 0\";\n//       }\n//       if (Number(variant.costPrice) < 0) {\n//         newErrors[`variant_${index}_costPrice`] = \"Cost price cannot be negative\";\n//       }\n//       if (Number(variant.stock) < 0) {\n//         newErrors[`variant_${index}_stock`] = \"Stock cannot be negative\";\n//       }\n//     });\n    \n//     setErrors(newErrors);\n//     return Object.keys(newErrors).length === 0;\n//   };\n\n//   const handleAddVariant = () => {\n//     setVariants((prev) => [\n//       ...prev,\n//       { \n//         id: Date.now(), \n//         name: \"\", \n//         stock: 0, \n//         sellingPrice: 0, \n//         costPrice: 0, \n//         sku: \"\", \n//         expiry: \"\" \n//       },\n//     ]);\n//   };\n\n//   const handleRemoveVariant = (index) => {\n//     if (variants.length > 1) {\n//       setVariants((prev) => prev.filter((_, i) => i !== index));\n//     }\n//   };\n\n//   const handleVariantChange = (index, field, value) => {\n//     setVariants((prev) =>\n//       prev.map((variant, i) =>\n//         i === index ? { ...variant, [field]: value } : variant\n//       )\n//     );\n    \n//     // Clear specific error when user starts typing\n//     if (errors[`variant_${index}_${field}`]) {\n//       setErrors(prev => ({\n//         ...prev,\n//         [`variant_${index}_${field}`]: undefined\n//       }));\n//     }\n//   };\n\n//   const handleSubmit = (e) => {\n//     e.preventDefault();\n//     if (!validateForm()) return;\n    \n//     const data = { \n//       ...product, \n//       name: name.trim(), \n//       icon,\n//       category,\n//       variants: variants.map(variant => ({\n//         ...variant,\n//         name: variant.name.trim(),\n//         stock: Number(variant.stock) || 0,\n//         sellingPrice: Number(variant.sellingPrice) || 0,\n//         costPrice: Number(variant.costPrice) || 0,\n//         sku: variant.sku.trim()\n//       }))\n//     };\n//     onSubmit(data);\n//   };\n\n//   return (\n//     <div className=\"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4\">\n//       <div className=\"bg-white p-6 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto\">\n//         <div className=\"flex justify-between items-center mb-6\">\n//           <h2 className=\"text-2xl font-bold text-blue-800\">{title}</h2>\n//           <button\n//             onClick={onClose}\n//             className=\"text-gray-500 hover:text-gray-700 p-1\"\n//           >\n//             <X size={24} />\n//           </button>\n//         </div>\n        \n//         <form onSubmit={handleSubmit} className=\"space-y-6\">\n//           <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n//             <div>\n//               <label className=\"block text-sm font-semibold mb-2 text-gray-700\">Product Name *</label>\n//               <input\n//                 type=\"text\"\n//                 placeholder=\"Enter product name\"\n//                 value={name}\n//                 onChange={(e) => {\n//                   setName(e.target.value);\n//                   if (errors.name) setErrors(prev => ({...prev, name: undefined}));\n//                 }}\n//                 className={`w-full border-2 px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${\n//                   errors.name ? 'border-red-500' : 'border-gray-300'\n//                 }`}\n//                 disabled={loading}\n//               />\n//               {errors.name && <p className=\"text-red-500 text-sm mt-1\">{errors.name}</p>}\n//             </div>\n            \n//             <div>\n//               <label className=\"block text-sm font-semibold mb-2 text-gray-700\">Product Icon</label>\n//               <input\n//                 type=\"text\"\n//                 placeholder=\"📦\"\n//                 value={icon}\n//                 onChange={(e) => setIcon(e.target.value)}\n//                 className=\"w-full border-2 border-gray-300 px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n//                 disabled={loading}\n//               />\n//             </div>\n//           </div>\n\n//           <div>\n//             <div className=\"flex justify-between items-center mb-4\">\n//               <h3 className=\"text-lg font-semibold text-gray-800\">Product Variants *</h3>\n//               <button\n//                 type=\"button\"\n//                 onClick={handleAddVariant}\n//                 className=\"text-blue-600 hover:text-blue-800 font-medium flex items-center gap-1\"\n//                 disabled={loading}\n//               >\n//                 <PlusCircle size={16} /> Add Variant\n//               </button>\n//             </div>\n            \n//             <div className=\"space-y-4\">\n//               {variants.map((variant, index) => (\n//                 <div key={variant.id} className=\"border-2 border-gray-200 rounded-lg p-4 bg-gray-50\">\n//                   <div className=\"flex justify-between items-center mb-3\">\n//                     <span className=\"font-semibold text-gray-700\">Variant {index + 1}</span>\n//                     {variants.length > 1 && (\n//                       <button\n//                         type=\"button\"\n//                         onClick={() => handleRemoveVariant(index)}\n//                         className=\"text-red-500 hover:text-red-700 font-medium\"\n//                         disabled={loading}\n//                       >\n//                         Remove\n//                       </button>\n//                     )}\n//                   </div>\n                  \n//                   <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3 mb-3\">\n//                     <div>\n//                       <label className=\"block text-sm font-medium text-gray-700 mb-1\">Variant Name *</label>\n//                       <input\n//                         type=\"text\"\n//                         placeholder=\"e.g., 500ml, Large, Red\"\n//                         value={variant.name}\n//                         onChange={(e) => handleVariantChange(index, \"name\", e.target.value)}\n//                         className={`w-full border px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${\n//                           errors[`variant_${index}_name`] ? 'border-red-500' : 'border-gray-300'\n//                         }`}\n//                         disabled={loading}\n//                       />\n//                       {errors[`variant_${index}_name`] && (\n//                         <p className=\"text-red-500 text-xs mt-1\">{errors[`variant_${index}_name`]}</p>\n//                       )}\n//                     </div>\n                    \n//                     <div>\n//                       <label className=\"block text-sm font-medium text-gray-700 mb-1\">SKU</label>\n//                       <input\n//                         type=\"text\"\n//                         placeholder=\"Auto-generated if empty\"\n//                         value={variant.sku}\n//                         onChange={(e) => handleVariantChange(index, \"sku\", e.target.value)}\n//                         className=\"w-full border border-gray-300 px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n//                         disabled={loading}\n//                       />\n//                     </div>\n//                   </div>\n                  \n//                   <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\n//                     <div>\n//                       <label className=\"block text-sm font-medium text-gray-700 mb-1\">Stock *</label>\n//                       <input\n//                         type=\"number\"\n//                         placeholder=\"0\"\n//                         value={variant.stock}\n//                         onChange={(e) => handleVariantChange(index, \"stock\", e.target.value)}\n//                         className={`w-full border px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${\n//                           errors[`variant_${index}_stock`] ? 'border-red-500' : 'border-gray-300'\n//                         }`}\n//                         min=\"0\"\n//                         disabled={loading}\n//                       />\n//                       {errors[`variant_${index}_stock`] && (\n//                         <p className=\"text-red-500 text-xs mt-1\">{errors[`variant_${index}_stock`]}</p>\n//                       )}\n//                     </div>\n\n//                     <div>\n//                       <label className=\"block text-sm font-medium text-gray-700 mb-1\">Selling Price *</label>\n//                       <input\n//                         type=\"number\"\n//                         placeholder=\"0.00\"\n//                         value={variant.sellingPrice}\n//                         onChange={(e) => handleVariantChange(index, \"sellingPrice\", e.target.value)}\n//                         className={`w-full border px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${\n//                           errors[`variant_${index}_sellingPrice`] ? 'border-red-500' : 'border-gray-300'\n//                         }`}\n//                         min=\"0\"\n//                         step=\"0.01\"\n//                         disabled={loading}\n//                       />\n//                       {errors[`variant_${index}_sellingPrice`] && (\n//                         <p className=\"text-red-500 text-xs mt-1\">{errors[`variant_${index}_sellingPrice`]}</p>\n//                       )}\n//                     </div>\n\n//                     <div>\n//                       <label className=\"block text-sm font-medium text-gray-700 mb-1\">Cost Price *</label>\n//                       <input\n//                         type=\"number\"\n//                         placeholder=\"0.00\"\n//                         value={variant.costPrice}\n//                         onChange={(e) => handleVariantChange(index, \"costPrice\", e.target.value)}\n//                         className={`w-full border px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${\n//                           errors[`variant_${index}_costPrice`] ? 'border-red-500' : 'border-gray-300'\n//                         }`}\n//                         min=\"0\"\n//                         step=\"0.01\"\n//                         disabled={loading}\n//                       />\n//                       {errors[`variant_${index}_costPrice`] && (\n//                         <p className=\"text-red-500 text-xs mt-1\">{errors[`variant_${index}_costPrice`]}</p>\n//                       )}\n//                     </div>\n\n//                     <div>\n//                       <label className=\"block text-sm font-medium text-gray-700 mb-1\">Expiry Date</label>\n//                       <input\n//                         type=\"date\"\n//                         value={variant.expiry && variant.expiry !== 'N/A' ? variant.expiry : ''}\n//                         onChange={(e) => handleVariantChange(index, \"expiry\", e.target.value || 'N/A')}\n//                         className=\"w-full border border-gray-300 px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n//                         disabled={loading}\n//                       />\n//                     </div>\n//                   </div>\n//                 </div>\n//               ))}\n//             </div>\n//           </div>\n        \n//           <div className=\"flex justify-end gap-4 pt-4 border-t\">\n//             <button\n//               type=\"button\"\n//               onClick={onClose}\n//               className=\"px-6 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors\"\n//               disabled={loading}\n//             >\n//               Cancel\n//             </button>\n//             <button\n//               type=\"submit\"\n//               className=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2\"\n//               disabled={loading}\n//             >\n//               {loading && <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>}\n//               {loading ? 'Saving...' : 'Save Product'}\n//             </button>\n//           </div>\n//         </form>\n//       </div>\n//     </div>\n//   );\n// }\n\n// function ProductViewModal({ product, onClose }) {\n//   const getTotalStock = (variants) => {\n//     return (variants || []).reduce((sum, variant) => sum + (Number(variant.stock) || 0), 0);\n//   };\n\n//   const getTotalValue = (variants) => {\n//     return (variants || []).reduce((sum, variant) => sum + ((Number(variant.stock) || 0) * (Number(variant.sellingPrice) || 0)), 0);\n//   };\n\n//   const getVariantProfit = (variant) => {\n//     const selling = Number(variant.sellingPrice) || 0;\n//     const cost = Number(variant.costPrice) || 0;\n//     const profit = selling - cost;\n//     const margin = cost > 0 ? (profit / cost) * 100 : 0;\n//     return { profit, margin };\n//   };\n\n//   return (\n//     <div className=\"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4\">\n//       <div className=\"bg-white p-6 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto\">\n//         <div className=\"flex justify-between items-center mb-6\">\n//           <h2 className=\"text-2xl font-bold text-blue-800\">Product Details</h2>\n//           <button\n//             onClick={onClose}\n//             className=\"text-gray-500 hover:text-gray-700 p-1 rounded-full hover:bg-gray-100 transition-colors\"\n//           >\n//             <X size={24} />\n//           </button>\n//         </div>\n        \n//         <div className=\"space-y-6\">\n//           {/* Product Header */}\n//           <div className=\"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-xl border border-blue-200\">\n//             <div className=\"flex items-center gap-4 mb-4\">\n//               <span className=\"text-4xl\">{product.icon}</span>\n//               <div>\n//                 <h3 className=\"text-2xl font-bold text-gray-900\">{product.name}</h3>\n//                 <p className=\"text-blue-600 font-medium\">Category: {product.category}</p>\n//                 <p className=\"text-sm text-gray-500\">Product ID: {product.id}</p>\n//               </div>\n//             </div>\n            \n//             {/* Summary Statistics */}\n//             <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n//               <div className=\"bg-white p-4 rounded-lg shadow-sm border\">\n//                 <div className=\"text-center\">\n//                   <div className=\"text-2xl font-bold text-blue-600\">{getTotalStock(product.variants)}</div>\n//                   <div className=\"text-sm text-gray-600\">Total Stock</div>\n//                 </div>\n//               </div>\n//               <div className=\"bg-white p-4 rounded-lg shadow-sm border\">\n//                 <div className=\"text-center\">\n//                   <div className=\"text-2xl font-bold text-green-600\">₹{getTotalValue(product.variants).toFixed(2)}</div>\n//                   <div className=\"text-sm text-gray-600\">Total Value</div>\n//                 </div>\n//               </div>\n//               <div className=\"bg-white p-4 rounded-lg shadow-sm border\">\n//                 <div className=\"text-center\">\n//                   <div className=\"text-2xl font-bold text-purple-600\">{product.variants?.length || 0}</div>\n//                   <div className=\"text-sm text-gray-600\">Variants</div>\n//                 </div>\n//               </div>\n//             </div>\n//           </div>\n          \n//           {/* Variants Details */}\n//           <div>\n//             <h4 className=\"text-xl font-bold mb-4 text-gray-800\">Variant Details</h4>\n//             <div className=\"grid gap-4\">\n//               {(product.variants || []).map((variant, index) => {\n//                 const { profit, margin } = getVariantProfit(variant);\n//                 const stock = Number(variant.stock) || 0;\n//                 const isLowStock = stock <= 10;\n                \n//                 return (\n//                   <div key={variant.id || index} className=\"border border-gray-200 rounded-lg p-4 bg-white shadow-sm\">\n//                     <div className=\"flex justify-between items-start mb-3\">\n//                       <h5 className=\"text-lg font-semibold text-gray-900\">{variant.name}</h5>\n//                       <span className={`px-3 py-1 rounded-full text-sm font-medium ${\n//                         isLowStock ? 'bg-red-100 text-red-800' : 'bg-green-100 text-green-800'\n//                       }`}>\n//                         {isLowStock ? 'Low Stock' : 'In Stock'}\n//                       </span>\n//                     </div>\n                    \n//                     <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 text-sm\">\n//                       <div className=\"bg-gray-50 p-3 rounded-lg\">\n//                         <span className=\"text-gray-600 font-medium block\">SKU</span>\n//                         <span className=\"font-mono\">{variant.sku || 'Not set'}</span>\n//                       </div>\n                      \n//                       <div className=\"bg-gray-50 p-3 rounded-lg\">\n//                         <span className=\"text-gray-600 font-medium block\">Stock</span>\n//                         <span className={`font-bold ${isLowStock ? 'text-red-600' : 'text-gray-900'}`}>\n//                           {stock} units\n//                         </span>\n//                       </div>\n                      \n//                       <div className=\"bg-gray-50 p-3 rounded-lg\">\n//                         <span className=\"text-gray-600 font-medium block\">Selling Price</span>\n//                         <span className=\"font-bold text-green-600\">₹{Number(variant.sellingPrice) || 0}</span>\n//                       </div>\n                      \n//                       <div className=\"bg-gray-50 p-3 rounded-lg\">\n//                         <span className=\"text-gray-600 font-medium block\">Cost Price</span>\n//                         <span className=\"font-bold text-blue-600\">₹{Number(variant.costPrice) || 0}</span>\n//                       </div>\n                      \n//                       <div className=\"bg-gray-50 p-3 rounded-lg\">\n//                         <span className=\"text-gray-600 font-medium block\">Profit Margin</span>\n//                         <span className={`font-bold ${profit > 0 ? 'text-green-600' : 'text-red-600'}`}>\n//                           ₹{profit.toFixed(2)} ({margin.toFixed(1)}%)\n//                         </span>\n//                       </div>\n                      \n//                       <div className=\"bg-gray-50 p-3 rounded-lg\">\n//                         <span className=\"text-gray-600 font-medium block\">Expiry</span>\n//                         <span className=\"text-gray-900\">\n//                           {variant.expiry === 'N/A' || !variant.expiry ? 'No expiry' : variant.expiry}\n//                         </span>\n//                       </div>\n//                     </div>\n//                   </div>\n//                 );\n//               })}\n//             </div>\n//           </div>\n//         </div>\n        \n//         <div className=\"flex justify-end mt-8 pt-4 border-t\">\n//           <button\n//             onClick={onClose}\n//             className=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n//           >\n//             Close\n//           </button>\n//         </div>\n//       </div>\n//     </div>\n//   );\n// }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport { Pencil, Trash2, PlusCircle, Eye, AlertTriangle, Package, X } from \"lucide-react\";\n\n// Sample data for testing\nconst sampleProducts = {\n  \"Groceries\": [\n    {\n      _id: \"1\",\n      id: 1001,\n      name: \"Basmati Rice\",\n      icon: \"🍚\",\n      category: \"Groceries\",\n      variants: [\n        {\n          id: 1,\n          name: \"5kg Bag\",\n          sku: \"1001-VAR-1\",\n          stock: 25,\n          sellingPrice: 450,\n          costPrice: 380,\n          expiry: \"2024-12-31\"\n        },\n        {\n          id: 2,\n          name: \"10kg Bag\",\n          sku: \"1001-VAR-2\",\n          stock: 8,\n          sellingPrice: 850,\n          costPrice: 720,\n          expiry: \"2024-12-31\"\n        }\n      ]\n    },\n    {\n      _id: \"2\",\n      id: 1002,\n      name: \"Cooking Oil\",\n      icon: \"🛢️\",\n      category: \"Groceries\",\n      variants: [\n        {\n          id: 1,\n          name: \"1L Bottle\",\n          sku: \"1002-VAR-1\",\n          stock: 15,\n          sellingPrice: 120,\n          costPrice: 95,\n          expiry: \"2025-06-30\"\n        },\n        {\n          id: 2,\n          name: \"5L Can\",\n          sku: \"1002-VAR-2\",\n          stock: 5,\n          sellingPrice: 580,\n          costPrice: 480,\n          expiry: \"2025-06-30\"\n        }\n      ]\n    }\n  ],\n  \"Beverages\": [\n    {\n      _id: \"3\",\n      id: 1003,\n      name: \"Soft Drink\",\n      icon: \"🥤\",\n      category: \"Beverages\",\n      variants: [\n        {\n          id: 1,\n          name: \"330ml Can\",\n          sku: \"1003-VAR-1\",\n          stock: 50,\n          sellingPrice: 25,\n          costPrice: 18,\n          expiry: \"2024-10-15\"\n        },\n        {\n          id: 2,\n          name: \"1L Bottle\",\n          sku: \"1003-VAR-2\",\n          stock: 30,\n          sellingPrice: 60,\n          costPrice: 45,\n          expiry: \"2024-10-15\"\n        }\n      ]\n    },\n    {\n      _id: \"4\",\n      id: 1004,\n      name: \"Fruit Juice\",\n      icon: \"🧃\",\n      category: \"Beverages\",\n      variants: [\n        {\n          id: 1,\n          name: \"200ml Tetra Pack\",\n          sku: \"1004-VAR-1\",\n          stock: 3,\n          sellingPrice: 35,\n          costPrice: 28,\n          expiry: \"2024-08-20\"\n        }\n      ]\n    }\n  ],\n  \"Personal Care\": [\n    {\n      _id: \"5\",\n      id: 1005,\n      name: \"Shampoo\",\n      icon: \"🧴\",\n      category: \"Personal Care\",\n      variants: [\n        {\n          id: 1,\n          name: \"200ml Bottle\",\n          sku: \"1005-VAR-1\",\n          stock: 20,\n          sellingPrice: 180,\n          costPrice: 140,\n          expiry: \"N/A\"\n        },\n        {\n          id: 2,\n          name: \"400ml Bottle\",\n          sku: \"1005-VAR-2\",\n          stock: 12,\n          sellingPrice: 320,\n          costPrice: 250,\n          expiry: \"N/A\"\n        }\n      ]\n    }\n  ]\n};\n\n// Mock user for authentication\nconst mockUser = {\n  _id: \"distributor123\",\n  name: \"Sample Distributor\"\n};\n\nexport default function DistributorProducts() {\n  const user = mockUser; // Using mock user instead of useAuth\n  const distributorId = user?._id;\n  const [active, setActive] = useState(\"Groceries\");\n  const [products, setProducts] = useState(sampleProducts);\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [showEditModal, setShowEditModal] = useState(false);\n  const [showViewModal, setShowViewModal] = useState(false);\n  const [editProduct, setEditProduct] = useState(null);\n  const [viewProduct, setViewProduct] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n  const distributorships = [\"Groceries\", \"Beverages\", \"Personal Care\"];\n\n  // Mock fetch function - just sets loading state briefly\n  const fetchProducts = useCallback(async () => {\n    if (!distributorId) return;\n    \n    setLoading(true);\n    setError(\"\");\n    \n    try {\n      // Simulate API delay\n      await new Promise(resolve => setTimeout(resolve, 500));\n      // Products are already set from sampleProducts\n    } catch (error) {\n      console.error(\"Error fetching products:\", error);\n      setError(\"Failed to fetch products. Please try again.\");\n    } finally {\n      setLoading(false);\n    }\n  }, [distributorId]);\n\n  useEffect(() => {\n    fetchProducts();\n  }, [fetchProducts]);\n\n  const handleAddProduct = async (product) => {\n    if (!product.name?.trim()) {\n      setError(\"Product name is required\");\n      return;\n    }\n\n    try {\n      setLoading(true);\n      setError(\"\");\n      \n      // Generate unique product ID\n      const productId = Date.now();\n      \n      // Generate SKUs for variants that don't have them\n      const variantsWithSKU = product.variants.map((variant, index) => ({\n        ...variant,\n        id: variant.id || Date.now() + index,\n        sku: variant.sku || `${productId}-VAR-${index + 1}`,\n        expiry: variant.expiry || 'N/A',\n        stock: Number(variant.stock) || 0,\n        sellingPrice: Number(variant.sellingPrice) || 0,\n        costPrice: Number(variant.costPrice) || 0\n      }));\n\n      // Simulate API delay\n      await new Promise(resolve => setTimeout(resolve, 500));\n\n      const newProduct = {\n        ...product,\n        _id: productId.toString(),\n        id: productId,\n        user: user,\n        distributorships: [active],\n        category: active,\n        variants: variantsWithSKU,\n      };\n      \n      setProducts((prev) => ({\n        ...prev,\n        [active]: [...(prev[active] || []), newProduct],\n      }));\n      \n      setShowAddModal(false);\n    } catch (error) {\n      console.error(\"Error adding product:\", error);\n      setError(\"Failed to add product. Please check all required fields.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleEditProduct = async (updated) => {\n    if (!updated.name?.trim()) {\n      setError(\"Product name is required\");\n      return;\n    }\n\n    try {\n      setLoading(true);\n      setError(\"\");\n      \n      // Ensure all variants have required fields\n      const updatedVariants = updated.variants.map((variant) => ({\n        ...variant,\n        sku: variant.sku || `${updated.id}-VAR-${variant.id}`,\n        expiry: variant.expiry || 'N/A',\n        stock: Number(variant.stock) || 0,\n        sellingPrice: Number(variant.sellingPrice) || 0,\n        costPrice: Number(variant.costPrice) || 0\n      }));\n\n      // Simulate API delay\n      await new Promise(resolve => setTimeout(resolve, 500));\n\n      const updatedProduct = {\n        ...updated,\n        distributorId,\n        distributorships: [active],\n        variants: updatedVariants,\n      };\n      \n      setProducts((prev) => ({\n        ...prev,\n        [active]: prev[active]?.map((p) => (p._id === updated._id ? updatedProduct : p)) || [],\n      }));\n      \n      setShowEditModal(false);\n      setEditProduct(null);\n    } catch (error) {\n      console.error(\"Error updating product:\", error);\n      setError(\"Failed to update product. Please check all required fields.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleDelete = async (id) => {\n    if (!window.confirm(\"Are you sure you want to delete this product?\")) return;\n    \n    try {\n      setLoading(true);\n      setError(\"\");\n      \n      // Simulate API delay\n      await new Promise(resolve => setTimeout(resolve, 300));\n      \n      setProducts((prev) => ({\n        ...prev,\n        [active]: prev[active]?.filter((p) => p._id !== id) || [],\n      }));\n    } catch (error) {\n      console.error(\"Error deleting product:\", error);\n      setError(\"Failed to delete product. Please try again.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getTotalStock = (variants) => {\n    return (variants || []).reduce((sum, variant) => sum + (Number(variant.stock) || 0), 0);\n  };   \n\n  const getPriceRange = (variants) => {\n    if (!variants?.length) return \"₹0\";\n    \n    const prices = variants\n      .map(v => Number(v.sellingPrice) || 0)\n      .filter(p => p > 0);\n    \n    if (!prices.length) return \"₹0\";\n    \n    const min = Math.min(...prices);\n    const max = Math.max(...prices);\n    return min === max ? `₹${min}` : `₹${min} - ₹${max}`;\n  };\n\n  const getLowStockVariants = (variants) => {\n    return (variants || []).filter((v) => (Number(v.stock) || 0) <= 10);\n  };\n\n  const closeModals = () => {\n    setShowAddModal(false);\n    setShowEditModal(false);\n    setShowViewModal(false);\n    setEditProduct(null);\n    setViewProduct(null);\n  };\n\n  if (!distributorId) {\n    return (\n      <div className=\"p-4 text-center\">\n        <div className=\"text-red-600\">Please log in to manage products.</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"p-4 max-w-7xl mx-auto\">\n      <div className=\"flex justify-between items-center mb-6 md:mt-4\">\n        <h2 className=\"text-4xl md:text-5xl font-bold md:leading-tight mb-6 tracking-tight text-between\">\n              <span className=\"bg-black bg-clip-text text-transparent font-eudoxus\">\n                Everything at Once, \n              </span>\n              <span className=\"bg-gradient-to-r from-purple-500 via-violet-500 to-teal-400 bg-clip-text text-transparent font-eudoxus pl-2\">\n                 Inventory\n              </span>\n            </h2>\n        <div className=\"text-sm text-gray-600 bg-blue-50 px-3 py-1 rounded-full\">\n          Total Products: {products[active]?.length || 0}\n        </div>\n      </div>\n\n      {error && (\n        <div className=\"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg flex justify-between items-center\">\n          <span>{error}</span>\n          <button \n            onClick={() => setError(\"\")}\n            className=\"text-red-700 hover:text-red-900\"\n          >\n            <X size={16} />\n          </button>\n        </div>\n      )}\n\n      <div className=\"flex flex-wrap gap-3 mb-6\">\n        {distributorships.map((name) => (\n          <button\n            key={name}\n            onClick={() => setActive(name)}\n            className={`px-5 py-3 rounded-full border-2 transition-all duration-200 font-medium ${\n              active === name \n                ? \"bg-black text-white border-2 border-gray-200 shadow-lg\" \n                : \"bg-white text-black border-2 border-gray-200 hover:bg-blue-50\"\n            }`}\n          >\n            {name} ({products[name]?.length || 0})\n          </button>\n        ))}\n      </div>\n\n      {loading ? (\n        <div className=\"text-center py-12\">\n          <div className=\"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n          <p className=\"mt-2 text-gray-600\">Loading products...</p>\n        </div>\n      ) : (\n        <div className=\"bg-white rounded-xl shadow-lg overflow-hidden\">\n          <div className=\"overflow-x-auto\">\n            <table className=\"min-w-full\">\n              <thead className=\"bg-white text-blue-700 \">\n                <tr>\n                  <th className=\"px-4 py-4 text-left font-semibold\">Product</th>\n                  <th className=\"px-6 py-4 text-left font-semibold\">Total Stock</th>\n                  <th className=\"px-6 py-4 text-left font-semibold\">Price Range</th>\n                  <th className=\"px-6 py-4 text-left font-semibold\">Variants</th>\n                  <th className=\"px-6 py-4 text-left font-semibold\">Status</th>\n                  <th className=\"px-6 py-4 text-right font-semibold\">Actions</th>\n                </tr>\n              </thead>\n              <tbody className=\"divide-y divide-gray-200\">\n                {products[active]?.length ? (\n                  products[active].map((product, index) => {\n                    const lowStockVariants = getLowStockVariants(product.variants);\n                    return (\n                      <tr\n                        key={product._id}\n                        className={`hover:bg-blue-50 transition-colors ${\n                          index % 2 === 0 ? 'bg-gray-50' : 'bg-white'\n                        }`}\n                      >\n                        <td className=\"px-6 py-4\">\n                          <div className=\"flex items-center gap-3\">\n                            <span className=\"text-2xl\">{product.icon}</span>\n                            <div>\n                              <div className=\"font-semibold text-gray-900\">{product.name}</div>\n                              <div className=\"text-sm text-gray-500\">ID: {product.id}</div>\n                            </div>\n                          </div>\n                        </td>\n                        <td className=\"px-6 py-4\">\n                          <div className=\"flex items-center gap-2\">\n                            <Package size={18} className=\"text-gray-500\" />\n                            <span className=\"font-medium\">{getTotalStock(product.variants)}</span>\n                          </div>\n                        </td>\n                        <td className=\"px-6 py-4 font-semibold text-green-600\">\n                          {getPriceRange(product.variants)}\n                        </td>\n                        <td className=\"px-6 py-4\">\n                          <span className=\"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-sm\">\n                            {product.variants?.length || 0} variant{(product.variants?.length || 0) !== 1 ? 's' : ''}\n                          </span>\n                        </td>\n                        <td className=\"px-6 py-4\">\n                          {lowStockVariants.length > 0 ? (\n                            <div className=\"flex items-center gap-2 text-orange-600\">\n                              <AlertTriangle size={16} />\n                              <span className=\"text-sm font-medium\">Low Stock</span>\n                            </div>\n                          ) : (\n                            <span className=\"text-green-600 text-sm font-medium\">In Stock</span>\n                          )}\n                        </td>\n                        <td className=\"px-6 py-4\">\n                          <div className=\"flex justify-end gap-2\">\n                            <button\n                              onClick={() => {\n                                setViewProduct(product);\n                                setShowViewModal(true);\n                              }}\n                              className=\"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors\"\n                              title=\"View Details\"\n                            >\n                              <Eye size={18} />\n                            </button>\n                            <button\n                              onClick={() => {\n                                setEditProduct(product);\n                                setShowEditModal(true);\n                              }}\n                              className=\"p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-100 rounded-lg transition-colors\"\n                              title=\"Edit Product\"\n                            >\n                              <Pencil size={18} />\n                            </button>\n                            <button\n                              onClick={() => handleDelete(product._id)}\n                              className=\"p-2 text-red-500 hover:text-red-700 hover:bg-red-100 rounded-lg transition-colors\"\n                              title=\"Delete Product\"\n                              disabled={loading}\n                            >\n                              <Trash2 size={18} />\n                            </button>\n                          </div>\n                        </td>\n                      </tr>\n                    );\n                  })\n                ) : (\n                  <tr>\n                    <td colSpan=\"6\" className=\"px-6 py-12 text-center text-gray-500\">\n                      <Package size={48} className=\"mx-auto mb-4 text-gray-300\" />\n                      <p className=\"text-lg font-medium\">No products found in {active}</p>\n                      <p className=\"text-sm\">Add your first product to get started.</p>\n                    </td>\n                  </tr>\n                )}\n              </tbody>\n            </table>\n          </div>\n        </div>\n      )}\n\n      <button\n        onClick={() => setShowAddModal(true)}\n        disabled={loading}\n        className=\"mt-6 flex items-center gap-3 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white px-6 py-3 rounded-full shadow-lg hover:shadow-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed font-medium\"\n      >\n        <PlusCircle size={20} /> Add New Product\n      </button>\n\n      {showAddModal && (\n        <ProductModal\n          title=\"Add New Product\"\n          category={active}\n          onClose={closeModals}\n          onSubmit={handleAddProduct}\n          loading={loading}\n        />\n      )}\n\n      {showEditModal && editProduct && (\n        <ProductModal\n          title=\"Edit Product\"\n          product={editProduct}\n          category={active}\n          onClose={closeModals}\n          onSubmit={handleEditProduct}\n          loading={loading}\n        />\n      )}\n\n      {showViewModal && viewProduct && (\n        <ProductViewModal\n          product={viewProduct}\n          onClose={closeModals}\n        />\n      )}\n    </div>\n  );\n}\n\nfunction ProductModal({ title, product = {}, category, onClose, onSubmit, loading = false }) {\n  const [name, setName] = useState(product.name || \"\");\n  const [icon, setIcon] = useState(product.icon || \"📦\");\n  const [variants, setVariants] = useState(\n    product.variants?.length > 0 \n      ? product.variants.map(v => ({...v, stock: v.stock || 0, sellingPrice: v.sellingPrice || 0, costPrice: v.costPrice || 0}))\n      : [{ id: Date.now(), name: \"\", stock: 0, sellingPrice: 0, costPrice: 0, sku: \"\", expiry: \"\" }]\n  );\n  const [errors, setErrors] = useState({});\n\n  const validateForm = () => {\n    const newErrors = {};\n    \n    if (!name.trim()) {\n      newErrors.name = \"Product name is required\";\n    }\n    \n    variants.forEach((variant, index) => {\n      if (!variant.name.trim()) {\n        newErrors[`variant_${index}_name`] = \"Variant name is required\";\n      }\n      if (Number(variant.sellingPrice) <= 0) {\n        newErrors[`variant_${index}_sellingPrice`] = \"Selling price must be greater than 0\";\n      }\n      if (Number(variant.costPrice) < 0) {\n        newErrors[`variant_${index}_costPrice`] = \"Cost price cannot be negative\";\n      }\n      if (Number(variant.stock) < 0) {\n        newErrors[`variant_${index}_stock`] = \"Stock cannot be negative\";\n      }\n    });\n    \n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleAddVariant = () => {\n    setVariants((prev) => [\n      ...prev,\n      { \n        id: Date.now(), \n        name: \"\", \n        stock: 0, \n        sellingPrice: 0, \n        costPrice: 0, \n        sku: \"\", \n        expiry: \"\" \n      },\n    ]);\n  };\n\n  const handleRemoveVariant = (index) => {\n    if (variants.length > 1) {\n      setVariants((prev) => prev.filter((_, i) => i !== index));\n    }\n  };\n\n  const handleVariantChange = (index, field, value) => {\n    setVariants((prev) =>\n      prev.map((variant, i) =>\n        i === index ? { ...variant, [field]: value } : variant\n      )\n    );\n    \n    // Clear specific error when user starts typing\n    if (errors[`variant_${index}_${field}`]) {\n      setErrors(prev => ({\n        ...prev,\n        [`variant_${index}_${field}`]: undefined\n      }));\n    }\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (!validateForm()) return;\n    \n    const data = { \n      ...product, \n      name: name.trim(), \n      icon,\n      category,\n      variants: variants.map(variant => ({\n        ...variant,\n        name: variant.name.trim(),\n        stock: Number(variant.stock) || 0,\n        sellingPrice: Number(variant.sellingPrice) || 0,\n        costPrice: Number(variant.costPrice) || 0,\n        sku: variant.sku.trim()\n      }))\n    };\n    onSubmit(data);\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4\">\n      <div className=\"bg-white p-6 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto\">\n        <div className=\"flex justify-between items-center mb-6\">\n          <h2 className=\"text-2xl font-bold text-blue-800\">{title}</h2>\n          <button\n            onClick={onClose}\n            className=\"text-gray-500 hover:text-gray-700 p-1\"\n          >\n            <X size={24} />\n          </button>\n        </div>\n        \n        <form onSubmit={handleSubmit} className=\"space-y-6\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-sm font-semibold mb-2 text-gray-700\">Product Name *</label>\n              <input\n                type=\"text\"\n                placeholder=\"Enter product name\"\n                value={name}\n                onChange={(e) => {\n                  setName(e.target.value);\n                  if (errors.name) setErrors(prev => ({...prev, name: undefined}));\n                }}\n                className={`w-full border-2 px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${\n                  errors.name ? 'border-red-500' : 'border-gray-300'\n                }`}\n                disabled={loading}\n              />\n              {errors.name && <p className=\"text-red-500 text-sm mt-1\">{errors.name}</p>}\n            </div>\n            \n            <div>\n              <label className=\"block text-sm font-semibold mb-2 text-gray-700\">Product Icon</label>\n              <input\n                type=\"text\"\n                placeholder=\"📦\"\n                value={icon}\n                onChange={(e) => setIcon(e.target.value)}\n                className=\"w-full border-2 border-gray-300 px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                disabled={loading}\n              />\n            </div>\n          </div>\n\n          <div>\n            <div className=\"flex justify-between items-center mb-4\">\n              <h3 className=\"text-lg font-semibold text-gray-800\">Product Variants *</h3>\n              <button\n                type=\"button\"\n                onClick={handleAddVariant}\n                className=\"text-blue-600 hover:text-blue-800 font-medium flex items-center gap-1\"\n                disabled={loading}\n              >\n                <PlusCircle size={16} /> Add Variant\n              </button>\n            </div>\n            \n            <div className=\"space-y-4\">\n              {variants.map((variant, index) => (\n                <div key={variant.id} className=\"border-2 border-gray-200 rounded-lg p-4 bg-gray-50\">\n                  <div className=\"flex justify-between items-center mb-3\">\n                    <span className=\"font-semibold text-gray-700\">Variant {index + 1}</span>\n                    {variants.length > 1 && (\n                      <button\n                        type=\"button\"\n                        onClick={() => handleRemoveVariant(index)}\n                        className=\"text-red-500 hover:text-red-700 font-medium\"\n                        disabled={loading}\n                      >\n                        Remove\n                      </button>\n                    )}\n                  </div>\n                  \n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3 mb-3\">\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">Variant Name *</label>\n                      <input\n                        type=\"text\"\n                        placeholder=\"e.g., 500ml, Large, Red\"\n                        value={variant.name}\n                        onChange={(e) => handleVariantChange(index, \"name\", e.target.value)}\n                        className={`w-full border px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${\n                          errors[`variant_${index}_name`] ? 'border-red-500' : 'border-gray-300'\n                        }`}\n                        disabled={loading}\n                      />\n                      {errors[`variant_${index}_name`] && (\n                        <p className=\"text-red-500 text-xs mt-1\">{errors[`variant_${index}_name`]}</p>\n                      )}\n                    </div>\n                    \n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">SKU</label>\n                      <input\n                        type=\"text\"\n                        placeholder=\"Auto-generated if empty\"\n                        value={variant.sku}\n                        onChange={(e) => handleVariantChange(index, \"sku\", e.target.value)}\n                        className=\"w-full border border-gray-300 px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                        disabled={loading}\n                      />\n                    </div>\n                  </div>\n                  \n                  <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">Stock *</label>\n                      <input\n                        type=\"number\"\n                        placeholder=\"0\"\n                        value={variant.stock}\n                        onChange={(e) => handleVariantChange(index, \"stock\", e.target.value)}\n                        className={`w-full border px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${\n                          errors[`variant_${index}_stock`] ? 'border-red-500' : 'border-gray-300'\n                        }`}\n                        min=\"0\"\n                        disabled={loading}\n                      />\n                      {errors[`variant_${index}_stock`] && (\n                        <p className=\"text-red-500 text-xs mt-1\">{errors[`variant_${index}_stock`]}</p>\n                      )}\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">Selling Price *</label>\n                      <input\n                        type=\"number\"\n                        placeholder=\"0.00\"\n                        value={variant.sellingPrice}\n                        onChange={(e) => handleVariantChange(index, \"sellingPrice\", e.target.value)}\n                        className={`w-full border px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${\n                          errors[`variant_${index}_sellingPrice`] ? 'border-red-500' : 'border-gray-300'\n                        }`}\n                        min=\"0\"\n                        step=\"0.01\"\n                        disabled={loading}\n                      />\n                      {errors[`variant_${index}_sellingPrice`] && (\n                        <p className=\"text-red-500 text-xs mt-1\">{errors[`variant_${index}_sellingPrice`]}</p>\n                      )}\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">Cost Price *</label>\n                      <input\n                        type=\"number\"\n                        placeholder=\"0.00\"\n                        value={variant.costPrice}\n                        onChange={(e) => handleVariantChange(index, \"costPrice\", e.target.value)}\n                        className={`w-full border px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${\n                          errors[`variant_${index}_costPrice`] ? 'border-red-500' : 'border-gray-300'\n                        }`}\n                        min=\"0\"\n                        step=\"0.01\"\n                        disabled={loading}\n                      />\n                      {errors[`variant_${index}_costPrice`] && (\n                        <p className=\"text-red-500 text-xs mt-1\">{errors[`variant_${index}_costPrice`]}</p>\n                      )}\n                    </div>\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">Expiry Date</label>\n                      <input\n                        type=\"date\"\n                        value={variant.expiry === 'N/A' ? '' : variant.expiry}\n                        onChange={(e) => handleVariantChange(index, \"expiry\", e.target.value || 'N/A')}\n                        className=\"w-full border border-gray-300 px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                        disabled={loading}\n                      />\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n\n          <div className=\"flex justify-end space-x-4 pt-6 border-t\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors\"\n              disabled={loading}\n            >\n              Cancel\n            </button>\n            <button\n              type=\"submit\"\n              className=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n              disabled={loading}\n            >\n              {loading ? 'Saving...' : product._id ? 'Update Product' : 'Add Product'}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n\nfunction ProductViewModal({ product, onClose }) {\n  const getTotalStock = (variants) => {\n    return (variants || []).reduce((sum, variant) => sum + (Number(variant.stock) || 0), 0);\n  };\n\n  const getTotalValue = (variants) => {\n    return (variants || []).reduce((sum, variant) => \n      sum + ((Number(variant.stock) || 0) * (Number(variant.sellingPrice) || 0)), 0\n    );\n  };\n\n  const getProfitMargin = (costPrice, sellingPrice) => {\n    const cost = Number(costPrice) || 0;\n    const selling = Number(sellingPrice) || 0;\n    if (cost === 0) return 0;\n    return ((selling - cost) / cost * 100).toFixed(1);\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4\">\n      <div className=\"bg-white p-6 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto\">\n        <div className=\"flex justify-between items-center mb-6\">\n          <div className=\"flex items-center gap-3\">\n            <span className=\"text-3xl\">{product.icon}</span>\n            <div>\n              <h2 className=\"text-2xl font-bold text-blue-800\">{product.name}</h2>\n              <p className=\"text-gray-600\">Product ID: {product.id}</p>\n            </div>\n          </div>\n          <button\n            onClick={onClose}\n            className=\"text-gray-500 hover:text-gray-700 p-1\"\n          >\n            <X size={24} />\n          </button>\n        </div>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6\">\n          <div className=\"bg-blue-50 p-4 rounded-lg\">\n            <h3 className=\"font-semibold text-blue-800 mb-2\">Total Stock</h3>\n            <p className=\"text-2xl font-bold text-blue-600\">{getTotalStock(product.variants)}</p>\n          </div>\n          <div className=\"bg-green-50 p-4 rounded-lg\">\n            <h3 className=\"font-semibold text-green-800 mb-2\">Total Value</h3>\n            <p className=\"text-2xl font-bold text-green-600\">₹{getTotalValue(product.variants).toLocaleString()}</p>\n          </div>\n          <div className=\"bg-purple-50 p-4 rounded-lg\">\n            <h3 className=\"font-semibold text-purple-800 mb-2\">Variants</h3>\n            <p className=\"text-2xl font-bold text-purple-600\">{product.variants?.length || 0}</p>\n          </div>\n        </div>\n\n        <div>\n          <h3 className=\"text-lg font-semibold text-gray-800 mb-4\">Variant Details</h3>\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full border border-gray-200 rounded-lg\">\n              <thead className=\"bg-gray-50\">\n                <tr>\n                  <th className=\"px-4 py-3 text-left font-semibold text-gray-700\">Variant</th>\n                  <th className=\"px-4 py-3 text-left font-semibold text-gray-700\">SKU</th>\n                  <th className=\"px-4 py-3 text-left font-semibold text-gray-700\">Stock</th>\n                  <th className=\"px-4 py-3 text-left font-semibold text-gray-700\">Cost Price</th>\n                  <th className=\"px-4 py-3 text-left font-semibold text-gray-700\">Selling Price</th>\n                  <th className=\"px-4 py-3 text-left font-semibold text-gray-700\">Profit Margin</th>\n                  <th className=\"px-4 py-3 text-left font-semibold text-gray-700\">Expiry</th>\n                  <th className=\"px-4 py-3 text-left font-semibold text-gray-700\">Status</th>\n                </tr>\n              </thead>\n              <tbody className=\"divide-y divide-gray-200\">\n                {product.variants?.map((variant, index) => (\n                  <tr key={variant.id} className={index % 2 === 0 ? 'bg-white' : 'bg-gray-50'}>\n                    <td className=\"px-4 py-3 font-medium\">{variant.name}</td>\n                    <td className=\"px-4 py-3 text-sm text-gray-600\">{variant.sku}</td>\n                    <td className=\"px-4 py-3\">\n                      <span className={`font-medium ${\n                        variant.stock <= 10 ? 'text-orange-600' : 'text-green-600'\n                      }`}>\n                        {variant.stock}\n                      </span>\n                    </td>\n                    <td className=\"px-4 py-3\">₹{variant.costPrice}</td>\n                    <td className=\"px-4 py-3 font-medium\">₹{variant.sellingPrice}</td>\n                    <td className=\"px-4 py-3\">\n                      <span className={`font-medium ${\n                        getProfitMargin(variant.costPrice, variant.sellingPrice) >= 20 \n                          ? 'text-green-600' \n                          : 'text-orange-600'\n                      }`}>\n                        {getProfitMargin(variant.costPrice, variant.sellingPrice)}%\n                      </span>\n                    </td>\n                    <td className=\"px-4 py-3 text-sm\">\n                      {variant.expiry === 'N/A' ? 'N/A' : new Date(variant.expiry).toLocaleDateString()}\n                    </td>\n                    <td className=\"px-4 py-3\">\n                      {variant.stock <= 10 ? (\n                        <span className=\"inline-flex items-center gap-1 text-orange-600 text-xs font-medium\">\n                          <AlertTriangle size={12} />\n                          Low Stock\n                        </span>\n                      ) : (\n                        <span className=\"text-green-600 text-xs font-medium\">In Stock</span>\n                      )}\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        </div>\n\n        <div className=\"flex justify-end pt-6 border-t mt-6\">\n          <button\n            onClick={onClose}\n            className=\"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors\"\n          >\n            Close\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n"],"mappings":";;;AAAA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AA8BA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,WAAW,QAAQ,OAAO;AAC/D,SAASC,MAAM,EAAEC,MAAM,EAAEC,UAAU,EAAEC,GAAG,EAAEC,aAAa,EAAEC,OAAO,EAAEC,CAAC,QAAQ,cAAc;;AAEzF;AAAA,SAAAC,MAAA,IAAAC,OAAA;AACA,MAAMC,cAAc,GAAG;EACrB,WAAW,EAAE,CACX;IACEC,GAAG,EAAE,GAAG;IACRC,EAAE,EAAE,IAAI;IACRC,IAAI,EAAE,cAAc;IACpBC,IAAI,EAAE,IAAI;IACVC,QAAQ,EAAE,WAAW;IACrBC,QAAQ,EAAE,CACR;MACEJ,EAAE,EAAE,CAAC;MACLC,IAAI,EAAE,SAAS;MACfI,GAAG,EAAE,YAAY;MACjBC,KAAK,EAAE,EAAE;MACTC,YAAY,EAAE,GAAG;MACjBC,SAAS,EAAE,GAAG;MACdC,MAAM,EAAE;IACV,CAAC,EACD;MACET,EAAE,EAAE,CAAC;MACLC,IAAI,EAAE,UAAU;MAChBI,GAAG,EAAE,YAAY;MACjBC,KAAK,EAAE,CAAC;MACRC,YAAY,EAAE,GAAG;MACjBC,SAAS,EAAE,GAAG;MACdC,MAAM,EAAE;IACV,CAAC;EAEL,CAAC,EACD;IACEV,GAAG,EAAE,GAAG;IACRC,EAAE,EAAE,IAAI;IACRC,IAAI,EAAE,aAAa;IACnBC,IAAI,EAAE,KAAK;IACXC,QAAQ,EAAE,WAAW;IACrBC,QAAQ,EAAE,CACR;MACEJ,EAAE,EAAE,CAAC;MACLC,IAAI,EAAE,WAAW;MACjBI,GAAG,EAAE,YAAY;MACjBC,KAAK,EAAE,EAAE;MACTC,YAAY,EAAE,GAAG;MACjBC,SAAS,EAAE,EAAE;MACbC,MAAM,EAAE;IACV,CAAC,EACD;MACET,EAAE,EAAE,CAAC;MACLC,IAAI,EAAE,QAAQ;MACdI,GAAG,EAAE,YAAY;MACjBC,KAAK,EAAE,CAAC;MACRC,YAAY,EAAE,GAAG;MACjBC,SAAS,EAAE,GAAG;MACdC,MAAM,EAAE;IACV,CAAC;EAEL,CAAC,CACF;EACD,WAAW,EAAE,CACX;IACEV,GAAG,EAAE,GAAG;IACRC,EAAE,EAAE,IAAI;IACRC,IAAI,EAAE,YAAY;IAClBC,IAAI,EAAE,IAAI;IACVC,QAAQ,EAAE,WAAW;IACrBC,QAAQ,EAAE,CACR;MACEJ,EAAE,EAAE,CAAC;MACLC,IAAI,EAAE,WAAW;MACjBI,GAAG,EAAE,YAAY;MACjBC,KAAK,EAAE,EAAE;MACTC,YAAY,EAAE,EAAE;MAChBC,SAAS,EAAE,EAAE;MACbC,MAAM,EAAE;IACV,CAAC,EACD;MACET,EAAE,EAAE,CAAC;MACLC,IAAI,EAAE,WAAW;MACjBI,GAAG,EAAE,YAAY;MACjBC,KAAK,EAAE,EAAE;MACTC,YAAY,EAAE,EAAE;MAChBC,SAAS,EAAE,EAAE;MACbC,MAAM,EAAE;IACV,CAAC;EAEL,CAAC,EACD;IACEV,GAAG,EAAE,GAAG;IACRC,EAAE,EAAE,IAAI;IACRC,IAAI,EAAE,aAAa;IACnBC,IAAI,EAAE,IAAI;IACVC,QAAQ,EAAE,WAAW;IACrBC,QAAQ,EAAE,CACR;MACEJ,EAAE,EAAE,CAAC;MACLC,IAAI,EAAE,kBAAkB;MACxBI,GAAG,EAAE,YAAY;MACjBC,KAAK,EAAE,CAAC;MACRC,YAAY,EAAE,EAAE;MAChBC,SAAS,EAAE,EAAE;MACbC,MAAM,EAAE;IACV,CAAC;EAEL,CAAC,CACF;EACD,eAAe,EAAE,CACf;IACEV,GAAG,EAAE,GAAG;IACRC,EAAE,EAAE,IAAI;IACRC,IAAI,EAAE,SAAS;IACfC,IAAI,EAAE,IAAI;IACVC,QAAQ,EAAE,eAAe;IACzBC,QAAQ,EAAE,CACR;MACEJ,EAAE,EAAE,CAAC;MACLC,IAAI,EAAE,cAAc;MACpBI,GAAG,EAAE,YAAY;MACjBC,KAAK,EAAE,EAAE;MACTC,YAAY,EAAE,GAAG;MACjBC,SAAS,EAAE,GAAG;MACdC,MAAM,EAAE;IACV,CAAC,EACD;MACET,EAAE,EAAE,CAAC;MACLC,IAAI,EAAE,cAAc;MACpBI,GAAG,EAAE,YAAY;MACjBC,KAAK,EAAE,EAAE;MACTC,YAAY,EAAE,GAAG;MACjBC,SAAS,EAAE,GAAG;MACdC,MAAM,EAAE;IACV,CAAC;EAEL,CAAC;AAEL,CAAC;;AAED;AACA,MAAMC,QAAQ,GAAG;EACfX,GAAG,EAAE,gBAAgB;EACrBE,IAAI,EAAE;AACR,CAAC;AAED,eAAe,SAASU,mBAAmBA,CAAA,EAAG;EAAAC,EAAA;EAAA,IAAAC,gBAAA,EAAAC,iBAAA;EAC5C,MAAMC,IAAI,GAAGL,QAAQ,CAAC,CAAC;EACvB,MAAMM,aAAa,GAAGD,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEhB,GAAG;EAC/B,MAAM,CAACkB,MAAM,EAAEC,SAAS,CAAC,GAAGhC,QAAQ,CAAC,WAAW,CAAC;EACjD,MAAM,CAACiC,QAAQ,EAAEC,WAAW,CAAC,GAAGlC,QAAQ,CAACY,cAAc,CAAC;EACxD,MAAM,CAACuB,YAAY,EAAEC,eAAe,CAAC,GAAGpC,QAAQ,CAAC,KAAK,CAAC;EACvD,MAAM,CAACqC,aAAa,EAAEC,gBAAgB,CAAC,GAAGtC,QAAQ,CAAC,KAAK,CAAC;EACzD,MAAM,CAACuC,aAAa,EAAEC,gBAAgB,CAAC,GAAGxC,QAAQ,CAAC,KAAK,CAAC;EACzD,MAAM,CAACyC,WAAW,EAAEC,cAAc,CAAC,GAAG1C,QAAQ,CAAC,IAAI,CAAC;EACpD,MAAM,CAAC2C,WAAW,EAAEC,cAAc,CAAC,GAAG5C,QAAQ,CAAC,IAAI,CAAC;EACpD,MAAM,CAAC6C,OAAO,EAAEC,UAAU,CAAC,GAAG9C,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,CAAC+C,KAAK,EAAEC,QAAQ,CAAC,GAAGhD,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAMiD,gBAAgB,GAAG,CAAC,WAAW,EAAE,WAAW,EAAE,eAAe,CAAC;;EAEpE;EACA,MAAMC,aAAa,GAAGhD,WAAW,CAAC,YAAY;IAC5C,IAAI,CAAC4B,aAAa,EAAE;IAEpBgB,UAAU,CAAC,IAAI,CAAC;IAChBE,QAAQ,CAAC,EAAE,CAAC;IAEZ,IAAI;MACF;MACA,MAAM,IAAIG,OAAO,CAACC,OAAO,IAAIC,UAAU,CAACD,OAAO,EAAE,GAAG,CAAC,CAAC;MACtD;IACF,CAAC,CAAC,OAAOL,KAAK,EAAE;MACdO,OAAO,CAACP,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;MAChDC,QAAQ,CAAC,6CAA6C,CAAC;IACzD,CAAC,SAAS;MACRF,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC,EAAE,CAAChB,aAAa,CAAC,CAAC;EAEnB7B,SAAS,CAAC,MAAM;IACdiD,aAAa,CAAC,CAAC;EACjB,CAAC,EAAE,CAACA,aAAa,CAAC,CAAC;EAEnB,MAAMK,gBAAgB,GAAG,MAAOC,OAAO,IAAK;IAAA,IAAAC,aAAA;IAC1C,IAAI,GAAAA,aAAA,GAACD,OAAO,CAACzC,IAAI,cAAA0C,aAAA,eAAZA,aAAA,CAAcC,IAAI,CAAC,CAAC,GAAE;MACzBV,QAAQ,CAAC,0BAA0B,CAAC;MACpC;IACF;IAEA,IAAI;MACFF,UAAU,CAAC,IAAI,CAAC;MAChBE,QAAQ,CAAC,EAAE,CAAC;;MAEZ;MACA,MAAMW,SAAS,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC;;MAE5B;MACA,MAAMC,eAAe,GAAGN,OAAO,CAACtC,QAAQ,CAAC6C,GAAG,CAAC,CAACC,OAAO,EAAEC,KAAK,MAAM;QAChE,GAAGD,OAAO;QACVlD,EAAE,EAAEkD,OAAO,CAAClD,EAAE,IAAI8C,IAAI,CAACC,GAAG,CAAC,CAAC,GAAGI,KAAK;QACpC9C,GAAG,EAAE6C,OAAO,CAAC7C,GAAG,IAAI,GAAGwC,SAAS,QAAQM,KAAK,GAAG,CAAC,EAAE;QACnD1C,MAAM,EAAEyC,OAAO,CAACzC,MAAM,IAAI,KAAK;QAC/BH,KAAK,EAAE8C,MAAM,CAACF,OAAO,CAAC5C,KAAK,CAAC,IAAI,CAAC;QACjCC,YAAY,EAAE6C,MAAM,CAACF,OAAO,CAAC3C,YAAY,CAAC,IAAI,CAAC;QAC/CC,SAAS,EAAE4C,MAAM,CAACF,OAAO,CAAC1C,SAAS,CAAC,IAAI;MAC1C,CAAC,CAAC,CAAC;;MAEH;MACA,MAAM,IAAI6B,OAAO,CAACC,OAAO,IAAIC,UAAU,CAACD,OAAO,EAAE,GAAG,CAAC,CAAC;MAEtD,MAAMe,UAAU,GAAG;QACjB,GAAGX,OAAO;QACV3C,GAAG,EAAE8C,SAAS,CAACS,QAAQ,CAAC,CAAC;QACzBtD,EAAE,EAAE6C,SAAS;QACb9B,IAAI,EAAEA,IAAI;QACVoB,gBAAgB,EAAE,CAAClB,MAAM,CAAC;QAC1Bd,QAAQ,EAAEc,MAAM;QAChBb,QAAQ,EAAE4C;MACZ,CAAC;MAED5B,WAAW,CAAEmC,IAAI,KAAM;QACrB,GAAGA,IAAI;QACP,CAACtC,MAAM,GAAG,CAAC,IAAIsC,IAAI,CAACtC,MAAM,CAAC,IAAI,EAAE,CAAC,EAAEoC,UAAU;MAChD,CAAC,CAAC,CAAC;MAEH/B,eAAe,CAAC,KAAK,CAAC;IACxB,CAAC,CAAC,OAAOW,KAAK,EAAE;MACdO,OAAO,CAACP,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;MAC7CC,QAAQ,CAAC,0DAA0D,CAAC;IACtE,CAAC,SAAS;MACRF,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAED,MAAMwB,iBAAiB,GAAG,MAAOC,OAAO,IAAK;IAAA,IAAAC,aAAA;IAC3C,IAAI,GAAAA,aAAA,GAACD,OAAO,CAACxD,IAAI,cAAAyD,aAAA,eAAZA,aAAA,CAAcd,IAAI,CAAC,CAAC,GAAE;MACzBV,QAAQ,CAAC,0BAA0B,CAAC;MACpC;IACF;IAEA,IAAI;MACFF,UAAU,CAAC,IAAI,CAAC;MAChBE,QAAQ,CAAC,EAAE,CAAC;;MAEZ;MACA,MAAMyB,eAAe,GAAGF,OAAO,CAACrD,QAAQ,CAAC6C,GAAG,CAAEC,OAAO,KAAM;QACzD,GAAGA,OAAO;QACV7C,GAAG,EAAE6C,OAAO,CAAC7C,GAAG,IAAI,GAAGoD,OAAO,CAACzD,EAAE,QAAQkD,OAAO,CAAClD,EAAE,EAAE;QACrDS,MAAM,EAAEyC,OAAO,CAACzC,MAAM,IAAI,KAAK;QAC/BH,KAAK,EAAE8C,MAAM,CAACF,OAAO,CAAC5C,KAAK,CAAC,IAAI,CAAC;QACjCC,YAAY,EAAE6C,MAAM,CAACF,OAAO,CAAC3C,YAAY,CAAC,IAAI,CAAC;QAC/CC,SAAS,EAAE4C,MAAM,CAACF,OAAO,CAAC1C,SAAS,CAAC,IAAI;MAC1C,CAAC,CAAC,CAAC;;MAEH;MACA,MAAM,IAAI6B,OAAO,CAACC,OAAO,IAAIC,UAAU,CAACD,OAAO,EAAE,GAAG,CAAC,CAAC;MAEtD,MAAMsB,cAAc,GAAG;QACrB,GAAGH,OAAO;QACVzC,aAAa;QACbmB,gBAAgB,EAAE,CAAClB,MAAM,CAAC;QAC1Bb,QAAQ,EAAEuD;MACZ,CAAC;MAEDvC,WAAW,CAAEmC,IAAI;QAAA,IAAAM,YAAA;QAAA,OAAM;UACrB,GAAGN,IAAI;UACP,CAACtC,MAAM,GAAG,EAAA4C,YAAA,GAAAN,IAAI,CAACtC,MAAM,CAAC,cAAA4C,YAAA,uBAAZA,YAAA,CAAcZ,GAAG,CAAEa,CAAC,IAAMA,CAAC,CAAC/D,GAAG,KAAK0D,OAAO,CAAC1D,GAAG,GAAG6D,cAAc,GAAGE,CAAE,CAAC,KAAI;QACtF,CAAC;MAAA,CAAC,CAAC;MAEHtC,gBAAgB,CAAC,KAAK,CAAC;MACvBI,cAAc,CAAC,IAAI,CAAC;IACtB,CAAC,CAAC,OAAOK,KAAK,EAAE;MACdO,OAAO,CAACP,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;MAC/CC,QAAQ,CAAC,6DAA6D,CAAC;IACzE,CAAC,SAAS;MACRF,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAED,MAAM+B,YAAY,GAAG,MAAO/D,EAAE,IAAK;IACjC,IAAI,CAACgE,MAAM,CAACC,OAAO,CAAC,+CAA+C,CAAC,EAAE;IAEtE,IAAI;MACFjC,UAAU,CAAC,IAAI,CAAC;MAChBE,QAAQ,CAAC,EAAE,CAAC;;MAEZ;MACA,MAAM,IAAIG,OAAO,CAACC,OAAO,IAAIC,UAAU,CAACD,OAAO,EAAE,GAAG,CAAC,CAAC;MAEtDlB,WAAW,CAAEmC,IAAI;QAAA,IAAAW,aAAA;QAAA,OAAM;UACrB,GAAGX,IAAI;UACP,CAACtC,MAAM,GAAG,EAAAiD,aAAA,GAAAX,IAAI,CAACtC,MAAM,CAAC,cAAAiD,aAAA,uBAAZA,aAAA,CAAcC,MAAM,CAAEL,CAAC,IAAKA,CAAC,CAAC/D,GAAG,KAAKC,EAAE,CAAC,KAAI;QACzD,CAAC;MAAA,CAAC,CAAC;IACL,CAAC,CAAC,OAAOiC,KAAK,EAAE;MACdO,OAAO,CAACP,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;MAC/CC,QAAQ,CAAC,6CAA6C,CAAC;IACzD,CAAC,SAAS;MACRF,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAED,MAAMoC,aAAa,GAAIhE,QAAQ,IAAK;IAClC,OAAO,CAACA,QAAQ,IAAI,EAAE,EAAEiE,MAAM,CAAC,CAACC,GAAG,EAAEpB,OAAO,KAAKoB,GAAG,IAAIlB,MAAM,CAACF,OAAO,CAAC5C,KAAK,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC;EACzF,CAAC;EAED,MAAMiE,aAAa,GAAInE,QAAQ,IAAK;IAClC,IAAI,EAACA,QAAQ,aAARA,QAAQ,eAARA,QAAQ,CAAEoE,MAAM,GAAE,OAAO,IAAI;IAElC,MAAMC,MAAM,GAAGrE,QAAQ,CACpB6C,GAAG,CAACyB,CAAC,IAAItB,MAAM,CAACsB,CAAC,CAACnE,YAAY,CAAC,IAAI,CAAC,CAAC,CACrC4D,MAAM,CAACL,CAAC,IAAIA,CAAC,GAAG,CAAC,CAAC;IAErB,IAAI,CAACW,MAAM,CAACD,MAAM,EAAE,OAAO,IAAI;IAE/B,MAAMG,GAAG,GAAGC,IAAI,CAACD,GAAG,CAAC,GAAGF,MAAM,CAAC;IAC/B,MAAMI,GAAG,GAAGD,IAAI,CAACC,GAAG,CAAC,GAAGJ,MAAM,CAAC;IAC/B,OAAOE,GAAG,KAAKE,GAAG,GAAG,IAAIF,GAAG,EAAE,GAAG,IAAIA,GAAG,OAAOE,GAAG,EAAE;EACtD,CAAC;EAED,MAAMC,mBAAmB,GAAI1E,QAAQ,IAAK;IACxC,OAAO,CAACA,QAAQ,IAAI,EAAE,EAAE+D,MAAM,CAAEO,CAAC,IAAK,CAACtB,MAAM,CAACsB,CAAC,CAACpE,KAAK,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC;EACrE,CAAC;EAED,MAAMyE,WAAW,GAAGA,CAAA,KAAM;IACxBzD,eAAe,CAAC,KAAK,CAAC;IACtBE,gBAAgB,CAAC,KAAK,CAAC;IACvBE,gBAAgB,CAAC,KAAK,CAAC;IACvBE,cAAc,CAAC,IAAI,CAAC;IACpBE,cAAc,CAAC,IAAI,CAAC;EACtB,CAAC;EAED,IAAI,CAACd,aAAa,EAAE;IAClB,oBACEnB,OAAA;MAAKmF,SAAS,EAAC,iBAAiB;MAAAC,QAAA,eAC9BpF,OAAA;QAAKmF,SAAS,EAAC,cAAc;QAAAC,QAAA,EAAC;MAAiC;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAClE,CAAC;EAEV;EAEA,oBACExF,OAAA;IAAKmF,SAAS,EAAC,uBAAuB;IAAAC,QAAA,gBACpCpF,OAAA;MAAKmF,SAAS,EAAC,gDAAgD;MAAAC,QAAA,gBAC7DpF,OAAA;QAAImF,SAAS,EAAC,kFAAkF;QAAAC,QAAA,gBAC1FpF,OAAA;UAAMmF,SAAS,EAAC,qDAAqD;UAAAC,QAAA,EAAC;QAEtE;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC,eACPxF,OAAA;UAAMmF,SAAS,EAAC,6GAA6G;UAAAC,QAAA,EAAC;QAE9H;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACL,CAAC,eACTxF,OAAA;QAAKmF,SAAS,EAAC,yDAAyD;QAAAC,QAAA,GAAC,kBACvD,EAAC,EAAApE,gBAAA,GAAAM,QAAQ,CAACF,MAAM,CAAC,cAAAJ,gBAAA,uBAAhBA,gBAAA,CAAkB2D,MAAM,KAAI,CAAC;MAAA;QAAAU,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC3C,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,EAELpD,KAAK,iBACJpC,OAAA;MAAKmF,SAAS,EAAC,qGAAqG;MAAAC,QAAA,gBAClHpF,OAAA;QAAAoF,QAAA,EAAOhD;MAAK;QAAAiD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eACpBxF,OAAA;QACEyF,OAAO,EAAEA,CAAA,KAAMpD,QAAQ,CAAC,EAAE,CAAE;QAC5B8C,SAAS,EAAC,iCAAiC;QAAAC,QAAA,eAE3CpF,OAAA,CAACF,CAAC;UAAC4F,IAAI,EAAE;QAAG;UAAAL,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACT,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CACN,eAEDxF,OAAA;MAAKmF,SAAS,EAAC,2BAA2B;MAAAC,QAAA,EACvC9C,gBAAgB,CAACc,GAAG,CAAEhD,IAAI;QAAA,IAAAuF,cAAA;QAAA,oBACzB3F,OAAA;UAEEyF,OAAO,EAAEA,CAAA,KAAMpE,SAAS,CAACjB,IAAI,CAAE;UAC/B+E,SAAS,EAAE,2EACT/D,MAAM,KAAKhB,IAAI,GACX,wDAAwD,GACxD,+DAA+D,EAClE;UAAAgF,QAAA,GAEFhF,IAAI,EAAC,IAAE,EAAC,EAAAuF,cAAA,GAAArE,QAAQ,CAAClB,IAAI,CAAC,cAAAuF,cAAA,uBAAdA,cAAA,CAAgBhB,MAAM,KAAI,CAAC,EAAC,GACvC;QAAA,GATOvE,IAAI;UAAAiF,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OASH,CAAC;MAAA,CACV;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC,CAAC,EAELtD,OAAO,gBACNlC,OAAA;MAAKmF,SAAS,EAAC,mBAAmB;MAAAC,QAAA,gBAChCpF,OAAA;QAAKmF,SAAS,EAAC;MAA2E;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC,eACjGxF,OAAA;QAAGmF,SAAS,EAAC,oBAAoB;QAAAC,QAAA,EAAC;MAAmB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACtD,CAAC,gBAENxF,OAAA;MAAKmF,SAAS,EAAC,+CAA+C;MAAAC,QAAA,eAC5DpF,OAAA;QAAKmF,SAAS,EAAC,iBAAiB;QAAAC,QAAA,eAC9BpF,OAAA;UAAOmF,SAAS,EAAC,YAAY;UAAAC,QAAA,gBAC3BpF,OAAA;YAAOmF,SAAS,EAAC,yBAAyB;YAAAC,QAAA,eACxCpF,OAAA;cAAAoF,QAAA,gBACEpF,OAAA;gBAAImF,SAAS,EAAC,mCAAmC;gBAAAC,QAAA,EAAC;cAAO;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eAC9DxF,OAAA;gBAAImF,SAAS,EAAC,mCAAmC;gBAAAC,QAAA,EAAC;cAAW;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eAClExF,OAAA;gBAAImF,SAAS,EAAC,mCAAmC;gBAAAC,QAAA,EAAC;cAAW;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eAClExF,OAAA;gBAAImF,SAAS,EAAC,mCAAmC;gBAAAC,QAAA,EAAC;cAAQ;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eAC/DxF,OAAA;gBAAImF,SAAS,EAAC,mCAAmC;gBAAAC,QAAA,EAAC;cAAM;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eAC7DxF,OAAA;gBAAImF,SAAS,EAAC,oCAAoC;gBAAAC,QAAA,EAAC;cAAO;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC7D;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACA,CAAC,eACRxF,OAAA;YAAOmF,SAAS,EAAC,0BAA0B;YAAAC,QAAA,EACxC,CAAAnE,iBAAA,GAAAK,QAAQ,CAACF,MAAM,CAAC,cAAAH,iBAAA,eAAhBA,iBAAA,CAAkB0D,MAAM,GACvBrD,QAAQ,CAACF,MAAM,CAAC,CAACgC,GAAG,CAAC,CAACP,OAAO,EAAES,KAAK,KAAK;cAAA,IAAAsC,iBAAA,EAAAC,kBAAA;cACvC,MAAMC,gBAAgB,GAAGb,mBAAmB,CAACpC,OAAO,CAACtC,QAAQ,CAAC;cAC9D,oBACEP,OAAA;gBAEEmF,SAAS,EAAE,sCACT7B,KAAK,GAAG,CAAC,KAAK,CAAC,GAAG,YAAY,GAAG,UAAU,EAC1C;gBAAA8B,QAAA,gBAEHpF,OAAA;kBAAImF,SAAS,EAAC,WAAW;kBAAAC,QAAA,eACvBpF,OAAA;oBAAKmF,SAAS,EAAC,yBAAyB;oBAAAC,QAAA,gBACtCpF,OAAA;sBAAMmF,SAAS,EAAC,UAAU;sBAAAC,QAAA,EAAEvC,OAAO,CAACxC;oBAAI;sBAAAgF,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAO,CAAC,eAChDxF,OAAA;sBAAAoF,QAAA,gBACEpF,OAAA;wBAAKmF,SAAS,EAAC,6BAA6B;wBAAAC,QAAA,EAAEvC,OAAO,CAACzC;sBAAI;wBAAAiF,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAM,CAAC,eACjExF,OAAA;wBAAKmF,SAAS,EAAC,uBAAuB;wBAAAC,QAAA,GAAC,MAAI,EAACvC,OAAO,CAAC1C,EAAE;sBAAA;wBAAAkF,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAM,CAAC;oBAAA;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAC1D,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACH;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACJ,CAAC,eACLxF,OAAA;kBAAImF,SAAS,EAAC,WAAW;kBAAAC,QAAA,eACvBpF,OAAA;oBAAKmF,SAAS,EAAC,yBAAyB;oBAAAC,QAAA,gBACtCpF,OAAA,CAACH,OAAO;sBAAC6F,IAAI,EAAE,EAAG;sBAACP,SAAS,EAAC;oBAAe;sBAAAE,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAE,CAAC,eAC/CxF,OAAA;sBAAMmF,SAAS,EAAC,aAAa;sBAAAC,QAAA,EAAEb,aAAa,CAAC1B,OAAO,CAACtC,QAAQ;oBAAC;sBAAA8E,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAO,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACnE;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACJ,CAAC,eACLxF,OAAA;kBAAImF,SAAS,EAAC,wCAAwC;kBAAAC,QAAA,EACnDV,aAAa,CAAC7B,OAAO,CAACtC,QAAQ;gBAAC;kBAAA8E,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC9B,CAAC,eACLxF,OAAA;kBAAImF,SAAS,EAAC,WAAW;kBAAAC,QAAA,eACvBpF,OAAA;oBAAMmF,SAAS,EAAC,0DAA0D;oBAAAC,QAAA,GACvE,EAAAQ,iBAAA,GAAA/C,OAAO,CAACtC,QAAQ,cAAAqF,iBAAA,uBAAhBA,iBAAA,CAAkBjB,MAAM,KAAI,CAAC,EAAC,UAAQ,EAAC,CAAC,EAAAkB,kBAAA,GAAAhD,OAAO,CAACtC,QAAQ,cAAAsF,kBAAA,uBAAhBA,kBAAA,CAAkBlB,MAAM,KAAI,CAAC,MAAM,CAAC,GAAG,GAAG,GAAG,EAAE;kBAAA;oBAAAU,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACpF;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACL,CAAC,eACLxF,OAAA;kBAAImF,SAAS,EAAC,WAAW;kBAAAC,QAAA,EACtBU,gBAAgB,CAACnB,MAAM,GAAG,CAAC,gBAC1B3E,OAAA;oBAAKmF,SAAS,EAAC,yCAAyC;oBAAAC,QAAA,gBACtDpF,OAAA,CAACJ,aAAa;sBAAC8F,IAAI,EAAE;oBAAG;sBAAAL,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAE,CAAC,eAC3BxF,OAAA;sBAAMmF,SAAS,EAAC,qBAAqB;sBAAAC,QAAA,EAAC;oBAAS;sBAAAC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAM,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACnD,CAAC,gBAENxF,OAAA;oBAAMmF,SAAS,EAAC,oCAAoC;oBAAAC,QAAA,EAAC;kBAAQ;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM;gBACpE;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACC,CAAC,eACLxF,OAAA;kBAAImF,SAAS,EAAC,WAAW;kBAAAC,QAAA,eACvBpF,OAAA;oBAAKmF,SAAS,EAAC,wBAAwB;oBAAAC,QAAA,gBACrCpF,OAAA;sBACEyF,OAAO,EAAEA,CAAA,KAAM;wBACbxD,cAAc,CAACY,OAAO,CAAC;wBACvBhB,gBAAgB,CAAC,IAAI,CAAC;sBACxB,CAAE;sBACFsD,SAAS,EAAC,sFAAsF;sBAChGY,KAAK,EAAC,cAAc;sBAAAX,QAAA,eAEpBpF,OAAA,CAACL,GAAG;wBAAC+F,IAAI,EAAE;sBAAG;wBAAAL,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAE;oBAAC;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACX,CAAC,eACTxF,OAAA;sBACEyF,OAAO,EAAEA,CAAA,KAAM;wBACb1D,cAAc,CAACc,OAAO,CAAC;wBACvBlB,gBAAgB,CAAC,IAAI,CAAC;sBACxB,CAAE;sBACFwD,SAAS,EAAC,sFAAsF;sBAChGY,KAAK,EAAC,cAAc;sBAAAX,QAAA,eAEpBpF,OAAA,CAACR,MAAM;wBAACkG,IAAI,EAAE;sBAAG;wBAAAL,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAE;oBAAC;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACd,CAAC,eACTxF,OAAA;sBACEyF,OAAO,EAAEA,CAAA,KAAMvB,YAAY,CAACrB,OAAO,CAAC3C,GAAG,CAAE;sBACzCiF,SAAS,EAAC,mFAAmF;sBAC7FY,KAAK,EAAC,gBAAgB;sBACtBC,QAAQ,EAAE9D,OAAQ;sBAAAkD,QAAA,eAElBpF,OAAA,CAACP,MAAM;wBAACiG,IAAI,EAAE;sBAAG;wBAAAL,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAE;oBAAC;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACd,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACN;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACJ,CAAC;cAAA,GArEA3C,OAAO,CAAC3C,GAAG;gBAAAmF,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAsEd,CAAC;YAET,CAAC,CAAC,gBAEFxF,OAAA;cAAAoF,QAAA,eACEpF,OAAA;gBAAIiG,OAAO,EAAC,GAAG;gBAACd,SAAS,EAAC,sCAAsC;gBAAAC,QAAA,gBAC9DpF,OAAA,CAACH,OAAO;kBAAC6F,IAAI,EAAE,EAAG;kBAACP,SAAS,EAAC;gBAA4B;kBAAAE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,eAC5DxF,OAAA;kBAAGmF,SAAS,EAAC,qBAAqB;kBAAAC,QAAA,GAAC,uBAAqB,EAAChE,MAAM;gBAAA;kBAAAiE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC,eACpExF,OAAA;kBAAGmF,SAAS,EAAC,SAAS;kBAAAC,QAAA,EAAC;gBAAsC;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAG,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC/D;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH;UACL;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACI,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACL;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CACN,eAEDxF,OAAA;MACEyF,OAAO,EAAEA,CAAA,KAAMhE,eAAe,CAAC,IAAI,CAAE;MACrCuE,QAAQ,EAAE9D,OAAQ;MAClBiD,SAAS,EAAC,mQAAmQ;MAAAC,QAAA,gBAE7QpF,OAAA,CAACN,UAAU;QAACgG,IAAI,EAAE;MAAG;QAAAL,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,oBAC1B;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC,EAERhE,YAAY,iBACXxB,OAAA,CAACkG,YAAY;MACXH,KAAK,EAAC,iBAAiB;MACvBzF,QAAQ,EAAEc,MAAO;MACjB+E,OAAO,EAAEjB,WAAY;MACrBkB,QAAQ,EAAExD,gBAAiB;MAC3BV,OAAO,EAAEA;IAAQ;MAAAmD,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAClB,CACF,EAEA9D,aAAa,IAAII,WAAW,iBAC3B9B,OAAA,CAACkG,YAAY;MACXH,KAAK,EAAC,cAAc;MACpBlD,OAAO,EAAEf,WAAY;MACrBxB,QAAQ,EAAEc,MAAO;MACjB+E,OAAO,EAAEjB,WAAY;MACrBkB,QAAQ,EAAEzC,iBAAkB;MAC5BzB,OAAO,EAAEA;IAAQ;MAAAmD,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAClB,CACF,EAEA5D,aAAa,IAAII,WAAW,iBAC3BhC,OAAA,CAACqG,gBAAgB;MACfxD,OAAO,EAAEb,WAAY;MACrBmE,OAAO,EAAEjB;IAAY;MAAAG,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACtB,CACF;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV;AAACzE,EAAA,CAnYuBD,mBAAmB;AAAAwF,EAAA,GAAnBxF,mBAAmB;AAqY3C,SAASoF,YAAYA,CAAC;EAAEH,KAAK;EAAElD,OAAO,GAAG,CAAC,CAAC;EAAEvC,QAAQ;EAAE6F,OAAO;EAAEC,QAAQ;EAAElE,OAAO,GAAG;AAAM,CAAC,EAAE;EAAAqE,GAAA;EAAA,IAAAC,kBAAA;EAC3F,MAAM,CAACpG,IAAI,EAAEqG,OAAO,CAAC,GAAGpH,QAAQ,CAACwD,OAAO,CAACzC,IAAI,IAAI,EAAE,CAAC;EACpD,MAAM,CAACC,IAAI,EAAEqG,OAAO,CAAC,GAAGrH,QAAQ,CAACwD,OAAO,CAACxC,IAAI,IAAI,IAAI,CAAC;EACtD,MAAM,CAACE,QAAQ,EAAEoG,WAAW,CAAC,GAAGtH,QAAQ,CACtC,EAAAmH,kBAAA,GAAA3D,OAAO,CAACtC,QAAQ,cAAAiG,kBAAA,uBAAhBA,kBAAA,CAAkB7B,MAAM,IAAG,CAAC,GACxB9B,OAAO,CAACtC,QAAQ,CAAC6C,GAAG,CAACyB,CAAC,KAAK;IAAC,GAAGA,CAAC;IAAEpE,KAAK,EAAEoE,CAAC,CAACpE,KAAK,IAAI,CAAC;IAAEC,YAAY,EAAEmE,CAAC,CAACnE,YAAY,IAAI,CAAC;IAAEC,SAAS,EAAEkE,CAAC,CAAClE,SAAS,IAAI;EAAC,CAAC,CAAC,CAAC,GACxH,CAAC;IAAER,EAAE,EAAE8C,IAAI,CAACC,GAAG,CAAC,CAAC;IAAE9C,IAAI,EAAE,EAAE;IAAEK,KAAK,EAAE,CAAC;IAAEC,YAAY,EAAE,CAAC;IAAEC,SAAS,EAAE,CAAC;IAAEH,GAAG,EAAE,EAAE;IAAEI,MAAM,EAAE;EAAG,CAAC,CACjG,CAAC;EACD,MAAM,CAACgG,MAAM,EAAEC,SAAS,CAAC,GAAGxH,QAAQ,CAAC,CAAC,CAAC,CAAC;EAExC,MAAMyH,YAAY,GAAGA,CAAA,KAAM;IACzB,MAAMC,SAAS,GAAG,CAAC,CAAC;IAEpB,IAAI,CAAC3G,IAAI,CAAC2C,IAAI,CAAC,CAAC,EAAE;MAChBgE,SAAS,CAAC3G,IAAI,GAAG,0BAA0B;IAC7C;IAEAG,QAAQ,CAACyG,OAAO,CAAC,CAAC3D,OAAO,EAAEC,KAAK,KAAK;MACnC,IAAI,CAACD,OAAO,CAACjD,IAAI,CAAC2C,IAAI,CAAC,CAAC,EAAE;QACxBgE,SAAS,CAAC,WAAWzD,KAAK,OAAO,CAAC,GAAG,0BAA0B;MACjE;MACA,IAAIC,MAAM,CAACF,OAAO,CAAC3C,YAAY,CAAC,IAAI,CAAC,EAAE;QACrCqG,SAAS,CAAC,WAAWzD,KAAK,eAAe,CAAC,GAAG,sCAAsC;MACrF;MACA,IAAIC,MAAM,CAACF,OAAO,CAAC1C,SAAS,CAAC,GAAG,CAAC,EAAE;QACjCoG,SAAS,CAAC,WAAWzD,KAAK,YAAY,CAAC,GAAG,+BAA+B;MAC3E;MACA,IAAIC,MAAM,CAACF,OAAO,CAAC5C,KAAK,CAAC,GAAG,CAAC,EAAE;QAC7BsG,SAAS,CAAC,WAAWzD,KAAK,QAAQ,CAAC,GAAG,0BAA0B;MAClE;IACF,CAAC,CAAC;IAEFuD,SAAS,CAACE,SAAS,CAAC;IACpB,OAAOE,MAAM,CAACC,IAAI,CAACH,SAAS,CAAC,CAACpC,MAAM,KAAK,CAAC;EAC5C,CAAC;EAED,MAAMwC,gBAAgB,GAAGA,CAAA,KAAM;IAC7BR,WAAW,CAAEjD,IAAI,IAAK,CACpB,GAAGA,IAAI,EACP;MACEvD,EAAE,EAAE8C,IAAI,CAACC,GAAG,CAAC,CAAC;MACd9C,IAAI,EAAE,EAAE;MACRK,KAAK,EAAE,CAAC;MACRC,YAAY,EAAE,CAAC;MACfC,SAAS,EAAE,CAAC;MACZH,GAAG,EAAE,EAAE;MACPI,MAAM,EAAE;IACV,CAAC,CACF,CAAC;EACJ,CAAC;EAED,MAAMwG,mBAAmB,GAAI9D,KAAK,IAAK;IACrC,IAAI/C,QAAQ,CAACoE,MAAM,GAAG,CAAC,EAAE;MACvBgC,WAAW,CAAEjD,IAAI,IAAKA,IAAI,CAACY,MAAM,CAAC,CAAC+C,CAAC,EAAEC,CAAC,KAAKA,CAAC,KAAKhE,KAAK,CAAC,CAAC;IAC3D;EACF,CAAC;EAED,MAAMiE,mBAAmB,GAAGA,CAACjE,KAAK,EAAEkE,KAAK,EAAEC,KAAK,KAAK;IACnDd,WAAW,CAAEjD,IAAI,IACfA,IAAI,CAACN,GAAG,CAAC,CAACC,OAAO,EAAEiE,CAAC,KAClBA,CAAC,KAAKhE,KAAK,GAAG;MAAE,GAAGD,OAAO;MAAE,CAACmE,KAAK,GAAGC;IAAM,CAAC,GAAGpE,OACjD,CACF,CAAC;;IAED;IACA,IAAIuD,MAAM,CAAC,WAAWtD,KAAK,IAAIkE,KAAK,EAAE,CAAC,EAAE;MACvCX,SAAS,CAACnD,IAAI,KAAK;QACjB,GAAGA,IAAI;QACP,CAAC,WAAWJ,KAAK,IAAIkE,KAAK,EAAE,GAAGE;MACjC,CAAC,CAAC,CAAC;IACL;EACF,CAAC;EAED,MAAMC,YAAY,GAAIC,CAAC,IAAK;IAC1BA,CAAC,CAACC,cAAc,CAAC,CAAC;IAClB,IAAI,CAACf,YAAY,CAAC,CAAC,EAAE;IAErB,MAAMgB,IAAI,GAAG;MACX,GAAGjF,OAAO;MACVzC,IAAI,EAAEA,IAAI,CAAC2C,IAAI,CAAC,CAAC;MACjB1C,IAAI;MACJC,QAAQ;MACRC,QAAQ,EAAEA,QAAQ,CAAC6C,GAAG,CAACC,OAAO,KAAK;QACjC,GAAGA,OAAO;QACVjD,IAAI,EAAEiD,OAAO,CAACjD,IAAI,CAAC2C,IAAI,CAAC,CAAC;QACzBtC,KAAK,EAAE8C,MAAM,CAACF,OAAO,CAAC5C,KAAK,CAAC,IAAI,CAAC;QACjCC,YAAY,EAAE6C,MAAM,CAACF,OAAO,CAAC3C,YAAY,CAAC,IAAI,CAAC;QAC/CC,SAAS,EAAE4C,MAAM,CAACF,OAAO,CAAC1C,SAAS,CAAC,IAAI,CAAC;QACzCH,GAAG,EAAE6C,OAAO,CAAC7C,GAAG,CAACuC,IAAI,CAAC;MACxB,CAAC,CAAC;IACJ,CAAC;IACDqD,QAAQ,CAAC0B,IAAI,CAAC;EAChB,CAAC;EAED,oBACE9H,OAAA;IAAKmF,SAAS,EAAC,gFAAgF;IAAAC,QAAA,eAC7FpF,OAAA;MAAKmF,SAAS,EAAC,kFAAkF;MAAAC,QAAA,gBAC/FpF,OAAA;QAAKmF,SAAS,EAAC,wCAAwC;QAAAC,QAAA,gBACrDpF,OAAA;UAAImF,SAAS,EAAC,kCAAkC;UAAAC,QAAA,EAAEW;QAAK;UAAAV,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC,eAC7DxF,OAAA;UACEyF,OAAO,EAAEU,OAAQ;UACjBhB,SAAS,EAAC,uCAAuC;UAAAC,QAAA,eAEjDpF,OAAA,CAACF,CAAC;YAAC4F,IAAI,EAAE;UAAG;YAAAL,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACT,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC,eAENxF,OAAA;QAAMoG,QAAQ,EAAEuB,YAAa;QAACxC,SAAS,EAAC,WAAW;QAAAC,QAAA,gBACjDpF,OAAA;UAAKmF,SAAS,EAAC,uCAAuC;UAAAC,QAAA,gBACpDpF,OAAA;YAAAoF,QAAA,gBACEpF,OAAA;cAAOmF,SAAS,EAAC,gDAAgD;cAAAC,QAAA,EAAC;YAAc;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eACxFxF,OAAA;cACE+H,IAAI,EAAC,MAAM;cACXC,WAAW,EAAC,oBAAoB;cAChCP,KAAK,EAAErH,IAAK;cACZ6H,QAAQ,EAAGL,CAAC,IAAK;gBACfnB,OAAO,CAACmB,CAAC,CAACM,MAAM,CAACT,KAAK,CAAC;gBACvB,IAAIb,MAAM,CAACxG,IAAI,EAAEyG,SAAS,CAACnD,IAAI,KAAK;kBAAC,GAAGA,IAAI;kBAAEtD,IAAI,EAAEsH;gBAAS,CAAC,CAAC,CAAC;cAClE,CAAE;cACFvC,SAAS,EAAE,4FACTyB,MAAM,CAACxG,IAAI,GAAG,gBAAgB,GAAG,iBAAiB,EACjD;cACH4F,QAAQ,EAAE9D;YAAQ;cAAAmD,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACnB,CAAC,EACDoB,MAAM,CAACxG,IAAI,iBAAIJ,OAAA;cAAGmF,SAAS,EAAC,2BAA2B;cAAAC,QAAA,EAAEwB,MAAM,CAACxG;YAAI;cAAAiF,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACvE,CAAC,eAENxF,OAAA;YAAAoF,QAAA,gBACEpF,OAAA;cAAOmF,SAAS,EAAC,gDAAgD;cAAAC,QAAA,EAAC;YAAY;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eACtFxF,OAAA;cACE+H,IAAI,EAAC,MAAM;cACXC,WAAW,EAAC,cAAI;cAChBP,KAAK,EAAEpH,IAAK;cACZ4H,QAAQ,EAAGL,CAAC,IAAKlB,OAAO,CAACkB,CAAC,CAACM,MAAM,CAACT,KAAK,CAAE;cACzCtC,SAAS,EAAC,0GAA0G;cACpHa,QAAQ,EAAE9D;YAAQ;cAAAmD,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACnB,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACC,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC,eAENxF,OAAA;UAAAoF,QAAA,gBACEpF,OAAA;YAAKmF,SAAS,EAAC,wCAAwC;YAAAC,QAAA,gBACrDpF,OAAA;cAAImF,SAAS,EAAC,qCAAqC;cAAAC,QAAA,EAAC;YAAkB;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eAC3ExF,OAAA;cACE+H,IAAI,EAAC,QAAQ;cACbtC,OAAO,EAAE0B,gBAAiB;cAC1BhC,SAAS,EAAC,uEAAuE;cACjFa,QAAQ,EAAE9D,OAAQ;cAAAkD,QAAA,gBAElBpF,OAAA,CAACN,UAAU;gBAACgG,IAAI,EAAE;cAAG;gBAAAL,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,gBAC1B;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN,CAAC,eAENxF,OAAA;YAAKmF,SAAS,EAAC,WAAW;YAAAC,QAAA,EACvB7E,QAAQ,CAAC6C,GAAG,CAAC,CAACC,OAAO,EAAEC,KAAK,kBAC3BtD,OAAA;cAAsBmF,SAAS,EAAC,oDAAoD;cAAAC,QAAA,gBAClFpF,OAAA;gBAAKmF,SAAS,EAAC,wCAAwC;gBAAAC,QAAA,gBACrDpF,OAAA;kBAAMmF,SAAS,EAAC,6BAA6B;kBAAAC,QAAA,GAAC,UAAQ,EAAC9B,KAAK,GAAG,CAAC;gBAAA;kBAAA+B,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,EACvEjF,QAAQ,CAACoE,MAAM,GAAG,CAAC,iBAClB3E,OAAA;kBACE+H,IAAI,EAAC,QAAQ;kBACbtC,OAAO,EAAEA,CAAA,KAAM2B,mBAAmB,CAAC9D,KAAK,CAAE;kBAC1C6B,SAAS,EAAC,6CAA6C;kBACvDa,QAAQ,EAAE9D,OAAQ;kBAAAkD,QAAA,EACnB;gBAED;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CACT;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACE,CAAC,eAENxF,OAAA;gBAAKmF,SAAS,EAAC,4CAA4C;gBAAAC,QAAA,gBACzDpF,OAAA;kBAAAoF,QAAA,gBACEpF,OAAA;oBAAOmF,SAAS,EAAC,8CAA8C;oBAAAC,QAAA,EAAC;kBAAc;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC,eACtFxF,OAAA;oBACE+H,IAAI,EAAC,MAAM;oBACXC,WAAW,EAAC,yBAAyB;oBACrCP,KAAK,EAAEpE,OAAO,CAACjD,IAAK;oBACpB6H,QAAQ,EAAGL,CAAC,IAAKL,mBAAmB,CAACjE,KAAK,EAAE,MAAM,EAAEsE,CAAC,CAACM,MAAM,CAACT,KAAK,CAAE;oBACpEtC,SAAS,EAAE,0FACTyB,MAAM,CAAC,WAAWtD,KAAK,OAAO,CAAC,GAAG,gBAAgB,GAAG,iBAAiB,EACrE;oBACH0C,QAAQ,EAAE9D;kBAAQ;oBAAAmD,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACnB,CAAC,EACDoB,MAAM,CAAC,WAAWtD,KAAK,OAAO,CAAC,iBAC9BtD,OAAA;oBAAGmF,SAAS,EAAC,2BAA2B;oBAAAC,QAAA,EAAEwB,MAAM,CAAC,WAAWtD,KAAK,OAAO;kBAAC;oBAAA+B,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAI,CAC9E;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACE,CAAC,eAENxF,OAAA;kBAAAoF,QAAA,gBACEpF,OAAA;oBAAOmF,SAAS,EAAC,8CAA8C;oBAAAC,QAAA,EAAC;kBAAG;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC,eAC3ExF,OAAA;oBACE+H,IAAI,EAAC,MAAM;oBACXC,WAAW,EAAC,yBAAyB;oBACrCP,KAAK,EAAEpE,OAAO,CAAC7C,GAAI;oBACnByH,QAAQ,EAAGL,CAAC,IAAKL,mBAAmB,CAACjE,KAAK,EAAE,KAAK,EAAEsE,CAAC,CAACM,MAAM,CAACT,KAAK,CAAE;oBACnEtC,SAAS,EAAC,wGAAwG;oBAClHa,QAAQ,EAAE9D;kBAAQ;oBAAAmD,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACnB,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACC,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACH,CAAC,eAENxF,OAAA;gBAAKmF,SAAS,EAAC,uCAAuC;gBAAAC,QAAA,gBACpDpF,OAAA;kBAAAoF,QAAA,gBACEpF,OAAA;oBAAOmF,SAAS,EAAC,8CAA8C;oBAAAC,QAAA,EAAC;kBAAO;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC,eAC/ExF,OAAA;oBACE+H,IAAI,EAAC,QAAQ;oBACbC,WAAW,EAAC,GAAG;oBACfP,KAAK,EAAEpE,OAAO,CAAC5C,KAAM;oBACrBwH,QAAQ,EAAGL,CAAC,IAAKL,mBAAmB,CAACjE,KAAK,EAAE,OAAO,EAAEsE,CAAC,CAACM,MAAM,CAACT,KAAK,CAAE;oBACrEtC,SAAS,EAAE,0FACTyB,MAAM,CAAC,WAAWtD,KAAK,QAAQ,CAAC,GAAG,gBAAgB,GAAG,iBAAiB,EACtE;oBACHwB,GAAG,EAAC,GAAG;oBACPkB,QAAQ,EAAE9D;kBAAQ;oBAAAmD,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACnB,CAAC,EACDoB,MAAM,CAAC,WAAWtD,KAAK,QAAQ,CAAC,iBAC/BtD,OAAA;oBAAGmF,SAAS,EAAC,2BAA2B;oBAAAC,QAAA,EAAEwB,MAAM,CAAC,WAAWtD,KAAK,QAAQ;kBAAC;oBAAA+B,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAI,CAC/E;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACE,CAAC,eAENxF,OAAA;kBAAAoF,QAAA,gBACEpF,OAAA;oBAAOmF,SAAS,EAAC,8CAA8C;oBAAAC,QAAA,EAAC;kBAAe;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC,eACvFxF,OAAA;oBACE+H,IAAI,EAAC,QAAQ;oBACbC,WAAW,EAAC,MAAM;oBAClBP,KAAK,EAAEpE,OAAO,CAAC3C,YAAa;oBAC5BuH,QAAQ,EAAGL,CAAC,IAAKL,mBAAmB,CAACjE,KAAK,EAAE,cAAc,EAAEsE,CAAC,CAACM,MAAM,CAACT,KAAK,CAAE;oBAC5EtC,SAAS,EAAE,0FACTyB,MAAM,CAAC,WAAWtD,KAAK,eAAe,CAAC,GAAG,gBAAgB,GAAG,iBAAiB,EAC7E;oBACHwB,GAAG,EAAC,GAAG;oBACPqD,IAAI,EAAC,MAAM;oBACXnC,QAAQ,EAAE9D;kBAAQ;oBAAAmD,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACnB,CAAC,EACDoB,MAAM,CAAC,WAAWtD,KAAK,eAAe,CAAC,iBACtCtD,OAAA;oBAAGmF,SAAS,EAAC,2BAA2B;oBAAAC,QAAA,EAAEwB,MAAM,CAAC,WAAWtD,KAAK,eAAe;kBAAC;oBAAA+B,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAI,CACtF;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACE,CAAC,eAENxF,OAAA;kBAAAoF,QAAA,gBACEpF,OAAA;oBAAOmF,SAAS,EAAC,8CAA8C;oBAAAC,QAAA,EAAC;kBAAY;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC,eACpFxF,OAAA;oBACE+H,IAAI,EAAC,QAAQ;oBACbC,WAAW,EAAC,MAAM;oBAClBP,KAAK,EAAEpE,OAAO,CAAC1C,SAAU;oBACzBsH,QAAQ,EAAGL,CAAC,IAAKL,mBAAmB,CAACjE,KAAK,EAAE,WAAW,EAAEsE,CAAC,CAACM,MAAM,CAACT,KAAK,CAAE;oBACzEtC,SAAS,EAAE,0FACTyB,MAAM,CAAC,WAAWtD,KAAK,YAAY,CAAC,GAAG,gBAAgB,GAAG,iBAAiB,EAC1E;oBACHwB,GAAG,EAAC,GAAG;oBACPqD,IAAI,EAAC,MAAM;oBACXnC,QAAQ,EAAE9D;kBAAQ;oBAAAmD,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACnB,CAAC,EACDoB,MAAM,CAAC,WAAWtD,KAAK,YAAY,CAAC,iBACnCtD,OAAA;oBAAGmF,SAAS,EAAC,2BAA2B;oBAAAC,QAAA,EAAEwB,MAAM,CAAC,WAAWtD,KAAK,YAAY;kBAAC;oBAAA+B,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAI,CACnF;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACE,CAAC,eACNxF,OAAA;kBAAAoF,QAAA,gBACEpF,OAAA;oBAAOmF,SAAS,EAAC,8CAA8C;oBAAAC,QAAA,EAAC;kBAAW;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC,eACnFxF,OAAA;oBACE+H,IAAI,EAAC,MAAM;oBACXN,KAAK,EAAEpE,OAAO,CAACzC,MAAM,KAAK,KAAK,GAAG,EAAE,GAAGyC,OAAO,CAACzC,MAAO;oBACtDqH,QAAQ,EAAGL,CAAC,IAAKL,mBAAmB,CAACjE,KAAK,EAAE,QAAQ,EAAEsE,CAAC,CAACM,MAAM,CAACT,KAAK,IAAI,KAAK,CAAE;oBAC/EtC,SAAS,EAAC,wGAAwG;oBAClHa,QAAQ,EAAE9D;kBAAQ;oBAAAmD,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACnB,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACC,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACH,CAAC;YAAA,GAhHEnC,OAAO,CAAClD,EAAE;cAAAkF,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAiHf,CACN;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACC,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC,eAENxF,OAAA;UAAKmF,SAAS,EAAC,0CAA0C;UAAAC,QAAA,gBACvDpF,OAAA;YACE+H,IAAI,EAAC,QAAQ;YACbtC,OAAO,EAAEU,OAAQ;YACjBhB,SAAS,EAAC,8FAA8F;YACxGa,QAAQ,EAAE9D,OAAQ;YAAAkD,QAAA,EACnB;UAED;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eACTxF,OAAA;YACE+H,IAAI,EAAC,QAAQ;YACb5C,SAAS,EAAC,iIAAiI;YAC3Ia,QAAQ,EAAE9D,OAAQ;YAAAkD,QAAA,EAEjBlD,OAAO,GAAG,WAAW,GAAGW,OAAO,CAAC3C,GAAG,GAAG,gBAAgB,GAAG;UAAa;YAAAmF,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACjE,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACF,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACJ;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV;AAACe,GAAA,CAtSQL,YAAY;AAAAkC,GAAA,GAAZlC,YAAY;AAwSrB,SAASG,gBAAgBA,CAAC;EAAExD,OAAO;EAAEsD;AAAQ,CAAC,EAAE;EAAA,IAAAkC,kBAAA,EAAAC,kBAAA;EAC9C,MAAM/D,aAAa,GAAIhE,QAAQ,IAAK;IAClC,OAAO,CAACA,QAAQ,IAAI,EAAE,EAAEiE,MAAM,CAAC,CAACC,GAAG,EAAEpB,OAAO,KAAKoB,GAAG,IAAIlB,MAAM,CAACF,OAAO,CAAC5C,KAAK,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC;EACzF,CAAC;EAED,MAAM8H,aAAa,GAAIhI,QAAQ,IAAK;IAClC,OAAO,CAACA,QAAQ,IAAI,EAAE,EAAEiE,MAAM,CAAC,CAACC,GAAG,EAAEpB,OAAO,KAC1CoB,GAAG,GAAI,CAAClB,MAAM,CAACF,OAAO,CAAC5C,KAAK,CAAC,IAAI,CAAC,KAAK8C,MAAM,CAACF,OAAO,CAAC3C,YAAY,CAAC,IAAI,CAAC,CAAE,EAAE,CAC9E,CAAC;EACH,CAAC;EAED,MAAM8H,eAAe,GAAGA,CAAC7H,SAAS,EAAED,YAAY,KAAK;IACnD,MAAM+H,IAAI,GAAGlF,MAAM,CAAC5C,SAAS,CAAC,IAAI,CAAC;IACnC,MAAM+H,OAAO,GAAGnF,MAAM,CAAC7C,YAAY,CAAC,IAAI,CAAC;IACzC,IAAI+H,IAAI,KAAK,CAAC,EAAE,OAAO,CAAC;IACxB,OAAO,CAAC,CAACC,OAAO,GAAGD,IAAI,IAAIA,IAAI,GAAG,GAAG,EAAEE,OAAO,CAAC,CAAC,CAAC;EACnD,CAAC;EAED,oBACE3I,OAAA;IAAKmF,SAAS,EAAC,gFAAgF;IAAAC,QAAA,eAC7FpF,OAAA;MAAKmF,SAAS,EAAC,kFAAkF;MAAAC,QAAA,gBAC/FpF,OAAA;QAAKmF,SAAS,EAAC,wCAAwC;QAAAC,QAAA,gBACrDpF,OAAA;UAAKmF,SAAS,EAAC,yBAAyB;UAAAC,QAAA,gBACtCpF,OAAA;YAAMmF,SAAS,EAAC,UAAU;YAAAC,QAAA,EAAEvC,OAAO,CAACxC;UAAI;YAAAgF,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC,eAChDxF,OAAA;YAAAoF,QAAA,gBACEpF,OAAA;cAAImF,SAAS,EAAC,kCAAkC;cAAAC,QAAA,EAAEvC,OAAO,CAACzC;YAAI;cAAAiF,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,eACpExF,OAAA;cAAGmF,SAAS,EAAC,eAAe;cAAAC,QAAA,GAAC,cAAY,EAACvC,OAAO,CAAC1C,EAAE;YAAA;cAAAkF,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACtD,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC,eACNxF,OAAA;UACEyF,OAAO,EAAEU,OAAQ;UACjBhB,SAAS,EAAC,uCAAuC;UAAAC,QAAA,eAEjDpF,OAAA,CAACF,CAAC;YAAC4F,IAAI,EAAE;UAAG;YAAAL,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACT,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC,eAENxF,OAAA;QAAKmF,SAAS,EAAC,4CAA4C;QAAAC,QAAA,gBACzDpF,OAAA;UAAKmF,SAAS,EAAC,2BAA2B;UAAAC,QAAA,gBACxCpF,OAAA;YAAImF,SAAS,EAAC,kCAAkC;YAAAC,QAAA,EAAC;UAAW;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eACjExF,OAAA;YAAGmF,SAAS,EAAC,kCAAkC;YAAAC,QAAA,EAAEb,aAAa,CAAC1B,OAAO,CAACtC,QAAQ;UAAC;YAAA8E,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAClF,CAAC,eACNxF,OAAA;UAAKmF,SAAS,EAAC,4BAA4B;UAAAC,QAAA,gBACzCpF,OAAA;YAAImF,SAAS,EAAC,mCAAmC;YAAAC,QAAA,EAAC;UAAW;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eAClExF,OAAA;YAAGmF,SAAS,EAAC,mCAAmC;YAAAC,QAAA,GAAC,QAAC,EAACmD,aAAa,CAAC1F,OAAO,CAACtC,QAAQ,CAAC,CAACqI,cAAc,CAAC,CAAC;UAAA;YAAAvD,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACrG,CAAC,eACNxF,OAAA;UAAKmF,SAAS,EAAC,6BAA6B;UAAAC,QAAA,gBAC1CpF,OAAA;YAAImF,SAAS,EAAC,oCAAoC;YAAAC,QAAA,EAAC;UAAQ;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eAChExF,OAAA;YAAGmF,SAAS,EAAC,oCAAoC;YAAAC,QAAA,EAAE,EAAAiD,kBAAA,GAAAxF,OAAO,CAACtC,QAAQ,cAAA8H,kBAAA,uBAAhBA,kBAAA,CAAkB1D,MAAM,KAAI;UAAC;YAAAU,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAClF,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,eAENxF,OAAA;QAAAoF,QAAA,gBACEpF,OAAA;UAAImF,SAAS,EAAC,0CAA0C;UAAAC,QAAA,EAAC;QAAe;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eAC7ExF,OAAA;UAAKmF,SAAS,EAAC,iBAAiB;UAAAC,QAAA,eAC9BpF,OAAA;YAAOmF,SAAS,EAAC,0CAA0C;YAAAC,QAAA,gBACzDpF,OAAA;cAAOmF,SAAS,EAAC,YAAY;cAAAC,QAAA,eAC3BpF,OAAA;gBAAAoF,QAAA,gBACEpF,OAAA;kBAAImF,SAAS,EAAC,iDAAiD;kBAAAC,QAAA,EAAC;gBAAO;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC,eAC5ExF,OAAA;kBAAImF,SAAS,EAAC,iDAAiD;kBAAAC,QAAA,EAAC;gBAAG;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC,eACxExF,OAAA;kBAAImF,SAAS,EAAC,iDAAiD;kBAAAC,QAAA,EAAC;gBAAK;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC,eAC1ExF,OAAA;kBAAImF,SAAS,EAAC,iDAAiD;kBAAAC,QAAA,EAAC;gBAAU;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC,eAC/ExF,OAAA;kBAAImF,SAAS,EAAC,iDAAiD;kBAAAC,QAAA,EAAC;gBAAa;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC,eAClFxF,OAAA;kBAAImF,SAAS,EAAC,iDAAiD;kBAAAC,QAAA,EAAC;gBAAa;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC,eAClFxF,OAAA;kBAAImF,SAAS,EAAC,iDAAiD;kBAAAC,QAAA,EAAC;gBAAM;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC,eAC3ExF,OAAA;kBAAImF,SAAS,EAAC,iDAAiD;kBAAAC,QAAA,EAAC;gBAAM;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACzE;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACA,CAAC,eACRxF,OAAA;cAAOmF,SAAS,EAAC,0BAA0B;cAAAC,QAAA,GAAAkD,kBAAA,GACxCzF,OAAO,CAACtC,QAAQ,cAAA+H,kBAAA,uBAAhBA,kBAAA,CAAkBlF,GAAG,CAAC,CAACC,OAAO,EAAEC,KAAK,kBACpCtD,OAAA;gBAAqBmF,SAAS,EAAE7B,KAAK,GAAG,CAAC,KAAK,CAAC,GAAG,UAAU,GAAG,YAAa;gBAAA8B,QAAA,gBAC1EpF,OAAA;kBAAImF,SAAS,EAAC,uBAAuB;kBAAAC,QAAA,EAAE/B,OAAO,CAACjD;gBAAI;kBAAAiF,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAK,CAAC,eACzDxF,OAAA;kBAAImF,SAAS,EAAC,iCAAiC;kBAAAC,QAAA,EAAE/B,OAAO,CAAC7C;gBAAG;kBAAA6E,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAK,CAAC,eAClExF,OAAA;kBAAImF,SAAS,EAAC,WAAW;kBAAAC,QAAA,eACvBpF,OAAA;oBAAMmF,SAAS,EAAE,eACf9B,OAAO,CAAC5C,KAAK,IAAI,EAAE,GAAG,iBAAiB,GAAG,gBAAgB,EACzD;oBAAA2E,QAAA,EACA/B,OAAO,CAAC5C;kBAAK;oBAAA4E,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACV;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACL,CAAC,eACLxF,OAAA;kBAAImF,SAAS,EAAC,WAAW;kBAAAC,QAAA,GAAC,QAAC,EAAC/B,OAAO,CAAC1C,SAAS;gBAAA;kBAAA0E,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAK,CAAC,eACnDxF,OAAA;kBAAImF,SAAS,EAAC,uBAAuB;kBAAAC,QAAA,GAAC,QAAC,EAAC/B,OAAO,CAAC3C,YAAY;gBAAA;kBAAA2E,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAK,CAAC,eAClExF,OAAA;kBAAImF,SAAS,EAAC,WAAW;kBAAAC,QAAA,eACvBpF,OAAA;oBAAMmF,SAAS,EAAE,eACfqD,eAAe,CAACnF,OAAO,CAAC1C,SAAS,EAAE0C,OAAO,CAAC3C,YAAY,CAAC,IAAI,EAAE,GAC1D,gBAAgB,GAChB,iBAAiB,EACpB;oBAAA0E,QAAA,GACAoD,eAAe,CAACnF,OAAO,CAAC1C,SAAS,EAAE0C,OAAO,CAAC3C,YAAY,CAAC,EAAC,GAC5D;kBAAA;oBAAA2E,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACL,CAAC,eACLxF,OAAA;kBAAImF,SAAS,EAAC,mBAAmB;kBAAAC,QAAA,EAC9B/B,OAAO,CAACzC,MAAM,KAAK,KAAK,GAAG,KAAK,GAAG,IAAIqC,IAAI,CAACI,OAAO,CAACzC,MAAM,CAAC,CAACiI,kBAAkB,CAAC;gBAAC;kBAAAxD,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC/E,CAAC,eACLxF,OAAA;kBAAImF,SAAS,EAAC,WAAW;kBAAAC,QAAA,EACtB/B,OAAO,CAAC5C,KAAK,IAAI,EAAE,gBAClBT,OAAA;oBAAMmF,SAAS,EAAC,oEAAoE;oBAAAC,QAAA,gBAClFpF,OAAA,CAACJ,aAAa;sBAAC8F,IAAI,EAAE;oBAAG;sBAAAL,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAE,CAAC,aAE7B;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC,gBAEPxF,OAAA;oBAAMmF,SAAS,EAAC,oCAAoC;oBAAAC,QAAA,EAAC;kBAAQ;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM;gBACpE;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACC,CAAC;cAAA,GAjCEnC,OAAO,CAAClD,EAAE;gBAAAkF,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAkCf,CACL;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACG,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACL,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,eAENxF,OAAA;QAAKmF,SAAS,EAAC,qCAAqC;QAAAC,QAAA,eAClDpF,OAAA;UACEyF,OAAO,EAAEU,OAAQ;UACjBhB,SAAS,EAAC,iFAAiF;UAAAC,QAAA,EAC5F;QAED;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV;AAACsD,GAAA,GA1HQzC,gBAAgB;AAAA,IAAAC,EAAA,EAAA8B,GAAA,EAAAU,GAAA;AAAAC,YAAA,CAAAzC,EAAA;AAAAyC,YAAA,CAAAX,GAAA;AAAAW,YAAA,CAAAD,GAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}